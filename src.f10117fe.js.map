{"version":3,"sources":["node_modules/regenerator-runtime/runtime.js","src/store.ts","src/trie.ts","src/dict.ts","src/stats.ts","src/ui/global.ts","src/random.ts","src/game.ts","src/timer.ts","src/ui/score.ts","src/ui/board.ts","src/ui/define.ts","src/ui/menu.ts","src/ui/review.ts","src/ui/settings.ts","src/ui/stats.ts","src/training.ts","src/ui/training.ts","src/ui/ui.ts","src/index.ts","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICttBa;;;AAgBX,mBAA4D;AAAA,QAAhD,MAAgD,uEAAvC,QAAuC;AAAA,QAApB,SAAoB,uEAAR,QAAQ;;AAAA;;AAApB,SAAA,SAAA,GAAA,SAAA;AACtC,SAAK,EAAL,GAAU,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AACxC,UAAM,OAAO,GAAG,SAAS,CAAC,IAAV,CAAe,MAAf,EAAuB,CAAvB,CAAhB;;AACA,MAAA,OAAO,CAAC,OAAR,GAAkB;AAAA,eAAM,MAAM,CAAC,OAAO,CAAC,KAAT,CAAZ;AAAA,OAAlB;;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB;AAAA,eAAM,OAAO,CAAC,OAAO,CAAC,MAAT,CAAb;AAAA,OAApB;;AAGA,MAAA,OAAO,CAAC,eAAR,GAA0B,YAAK;AAC7B,QAAA,OAAO,CAAC,MAAR,CAAe,iBAAf,CAAiC,SAAjC;AACD,OAFD;AAGD,KATS,CAAV;AAUD;;;;wBAEM,KAAW;AAChB,UAAI,GAAJ;AACA,aAAO,KAAK,YAAL,CAAkB,UAAlB,EAA8B,UAAA,KAAK,EAAG;AAC3C,QAAA,GAAG,GAAG,KAAK,CAAC,GAAN,CAAU,GAAV,CAAN;AACD,OAFM,EAEJ,IAFI,CAEC;AAAA,eAAM,GAAG,CAAC,MAAV;AAAA,OAFD,CAAP;AAGD;;;wBAEM,KAAa,OAAQ;AAC1B,aAAO,KAAK,YAAL,CAAkB,WAAlB,EAA+B,UAAA,KAAK,EAAG;AAC5C,QAAA,KAAK,CAAC,GAAN,CAAU,KAAV,EAAiB,GAAjB;AACD,OAFM,CAAP;AAGD;;;iCAGC,MACA,UAAyC;AAAA;;AAEzC,aAAO,KAAK,EAAL,CAAQ,IAAR,CACL,UAAA,EAAE;AAAA,eACA,IAAI,OAAJ,CAAkB,UAAC,OAAD,EAAU,MAAV,EAAoB;AACpC,cAAM,WAAW,GAAG,EAAE,CAAC,WAAH,CAAe,KAAI,CAAC,SAApB,EAA+B,IAA/B,CAApB;;AACA,UAAA,WAAW,CAAC,UAAZ,GAAyB;AAAA,mBAAM,OAAO,EAAb;AAAA,WAAzB;;AACA,UAAA,WAAW,CAAC,OAAZ,GAAsB,WAAW,CAAC,OAAZ,GAAsB;AAAA,mBAAM,MAAM,CAAC,WAAW,CAAC,KAAb,CAAZ;AAAA,WAA5C;;AACA,UAAA,QAAQ,CAAC,WAAW,CAAC,WAAZ,CAAwB,KAAI,CAAC,SAA7B,CAAD,CAAR;AACD,SALD,CADA;AAAA,OADG,CAAP;AASD;;;4BApD4D;AAAA,UAA1C,MAA0C,uEAAjC,QAAiC;AAAA,UAAvB,UAAuB,uEAAV,CAAC,QAAD,CAAU;;;;;;;;iDACpD,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AACrC,sBAAM,OAAO,GAAG,SAAS,CAAC,IAAV,CAAe,MAAf,EAAuB,CAAvB,CAAhB;;AACA,kBAAA,OAAO,CAAC,OAAR,GAAkB;AAAA,2BAAM,MAAM,CAAC,OAAO,CAAC,KAAT,CAAZ;AAAA,mBAAlB;;AACA,kBAAA,OAAO,CAAC,SAAR,GAAoB;AAAA,2BAAM,OAAO,CAAC,OAAO,CAAC,MAAT,CAAb;AAAA,mBAApB;;AACA,kBAAA,OAAO,CAAC,eAAR,GAA0B,YAAK;AAAA;AAAA;AAAA;;AAAA;AAC7B,2CAAwB,UAAxB,8HAAoC;AAAA,4BAAzB,SAAyB;AAClC,wBAAA,OAAO,CAAC,MAAR,CAAe,iBAAf,CAAiC,SAAjC;AACD;AAH4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAI9B,mBAJD;AAKD,iBATM;;;;;;;;;AAUR;;;;;;AAdH,OAAA,CAAA,KAAA,GAAA,KAAA;;;;;;;;;;;;;;ICEa;;;AAKX,gBAAoB,MAApB,EAAyC,KAAzC,EAAsD;AAAA;;AACpD,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,QAAL,GAAgB,IAAI,KAAJ,CAAU,EAAV,CAAhB;AACA,SAAK,MAAL,GAAc,KAAd;AACA,QAAI,MAAM,KAAK,IAAf,EAAqB,MAAM,CAAC,QAAP,CAAgB,KAAK,CAAC,UAAN,CAAiB,CAAjB,IAAsB,EAAtC,IAA4C,IAA5C;AACtB;;;;2BAEa,MAAgB;AAC5B,UAAM,IAAI,GAAG,IAAI,IAAJ,CAAS,IAAT,EAAe,EAAf,CAAb;;AACA,WAAK,IAAM,IAAX,IAAmB,IAAnB,EAAyB;AACvB,YAAI,OAAO,GAAG,IAAd;;AACA,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,MAAzB,EAAiC,CAAC,EAAlC,EAAsC;AACpC,cAAM,MAAM,GAAG,IAAI,CAAC,CAAD,CAAnB;AACA,cAAM,GAAG,GAAG,MAAM,CAAC,UAAP,CAAkB,CAAlB,CAAZ;AACA,cAAI,IAAI,GAAG,OAAO,CAAC,QAAR,CAAiB,GAAG,GAAG,EAAvB,CAAX;AACA,cAAI,IAAI,KAAK,SAAb,EAAwB,IAAI,GAAG,IAAI,IAAJ,CAAS,OAAT,EAAkB,MAAlB,CAAP;AACxB,UAAA,OAAO,GAAG,IAAV;AACD;;AACD,QAAA,OAAO,CAAC,MAAR,GAAiB,IAAI,CAAC,IAAD,CAAJ,CAAW,IAAX,IAAmB,IAApC;AACD;;AACD,aAAO,IAAP;AACD;;;;;;AA1BH,OAAA,CAAA,IAAA,GAAA,IAAA;;;;;;;;;ACgBA,SAAgB,MAAhB,CAAuB,IAAvB,EAAqC,IAArC,EAAqD;AACnD,MAAM,GAAG,GAAG,IAAI,CAAC,IAAD,CAAhB;AACA,MAAI,CAAC,GAAL,EAAU,OAAO,EAAP;AACV,MAAM,EAAE,GAAG,qBAAX;AACA,MAAI,GAAG,GAAG,IAAI,CAAC,IAAD,CAAJ,CAAW,IAArB;AACA,MAAI,CAAC,GAAL,EAAU,OAAO,EAAP;AACV,MAAM,KAAK,GAAG,EAAE,CAAC,IAAH,CAAQ,GAAR,CAAd;;AACA,MAAI,KAAJ,EAAW;AACT,QAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,EAAD,CAAd;;AACA,QAAI,CAAC,CAAD,IAAM,CAAC,CAAC,CAAC,IAAb,EAAmB;AACjB,MAAA,GAAG,GAAG,KAAK,CAAC,CAAD,CAAX;AACD,KAFD,MAEO;AACL,MAAA,GAAG,aAAM,KAAK,CAAC,CAAD,CAAX,eAAmB,CAAC,CAAC,IAArB,MAAH;AACD;AACF;;AACD,SAAO,GAAG,CACP,OADI,CACI,gBADJ,EACsB,IADtB,EAEJ,OAFI,CAEI,cAFJ,EAEoB,IAFpB,EAGJ,OAHI,CAGI,kBAHJ,EAGwB,EAHxB,CAAP;AAID;;AAnBD,OAAA,CAAA,MAAA,GAAA,MAAA;;AAqBA,SAAgB,OAAhB,CAAwB,IAAxB,EAAsC,IAAtC,EAAwD,IAAxD,EAAkE;AAChE,MAAM,GAAG,GAAG,IAAI,CAAC,IAAD,CAAhB;AACA,SAAO,GAAG,KAAK,CAAC,GAAG,CAAC,IAAL,IAAa,GAAG,CAAC,IAAJ,CAAS,QAAT,CAAkB,IAAI,CAAC,MAAL,CAAY,CAAZ,CAAlB,CAAlB,CAAV;AACD;;AAHD,OAAA,CAAA,OAAA,GAAA,OAAA;;AAKA,SAAgB,KAAhB,CAAsB,KAAtB,EAAqC;AACnC,MAAM,OAAO,GAAG,EAAhB;AAEA,MAAM,SAAS,GAAG,IAAI,GAAJ,EAAlB;AAHmC;AAAA;AAAA;;AAAA;AAInC,yBAAgB,KAAhB,8HAAuB;AAAA,UAAZ,CAAY;AAErB,UAAM,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,EAAY,OAAZ,GAAsB,IAAtB,CAA2B,EAA3B,CAAV;;AACA,UAAI,CAAC,KAAK,CAAN,IAAW,KAAK,CAAC,QAAN,CAAe,CAAf,CAAf,EAAkC;AAChC,YAAM,GAAG,aAAM,CAAC,CAAD,EAAI,CAAJ,EAAO,IAAP,GAAc,IAAd,CAAmB,GAAnB,CAAN,CAAT;;AACA,YAAI,CAAC,SAAS,CAAC,GAAV,CAAc,GAAd,CAAL,EAAyB;AACvB,UAAA,SAAS,CAAC,GAAV,CAAc,GAAd;AACA,UAAA,OAAO,CAAC,IAAR,YAAiB,CAAjB,aAAyB,CAAzB;AACD;AACF,OAND,MAMO;AACL,QAAA,OAAO,CAAC,IAAR,CAAa,CAAb;AACD;AACF;AAhBkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBnC,SAAO,OAAP;AACD;;AAlBD,OAAA,CAAA,KAAA,GAAA,KAAA;;;;;;;;;;;;;;;;;;;;;;AC3CA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;IAwBa;;;AAMX,iBAAY,WAAZ,EAA+B,IAA/B,EAA+C;AAAA;;AAC7C,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,WAAL,GAAmB,WAAnB;AAEA,SAAK,KAAL,GAAa,EAAb;;AACA,SAAK,IAAM,IAAX,IAAmB,IAAnB,EAAyB;AACvB,UAAM,OAAO,GAAG,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAhB;AACA,WAAK,KAAL,CAAW,OAAX,IAAsB,KAAK,KAAL,CAAW,OAAX,KAAuB,EAA7C;AACA,WAAK,KAAL,CAAW,OAAX,EAAoB,IAApB,CAAyB,IAAzB;AACD;AACF;;;;6BAEQ,MAAc,MAAY,KAAY;AAC7C,UAAM,CAAC,GAAG,KAAK,CAAC,SAAN,CAAgB,IAAhB,CAAV;AACA,UAAM,KAAK,GAAG,KAAK,KAAL,CAAW,CAAX,CAAd;AAEA,UAAM,MAAM,GAA4D;AAAE,QAAA,KAAK,EAAE;AAAT,OAAxE;AACA,UAAI,CAAC,KAAL,EAAY,OAAO,MAAP;AALiC;AAAA;AAAA;;AAAA;AAO7C,6BAAgB,KAAhB,8HAAuB;AAAA,cAAZ,CAAY;AACrB,cAAI,GAAG,IAAI,CAAC,CAAC,MAAF,GAAW,GAAtB,EAA2B;;AAC3B,cAAI,MAAA,CAAA,OAAA,CAAQ,CAAR,EAAW,KAAK,IAAhB,EAAsB,IAAtB,CAAJ,EAAiC;AAC/B,YAAA,MAAM,CAAC,KAAP,CAAa,IAAb,CAAkB,CAAlB;AACA,gBAAM,CAAC,GAAG,KAAK,IAAL,CAAU,CAAV,CAAV;;AACA,oCAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,0BAA2D;AAAtD,kBAAM,CAAC,WAAP;AACH,kBAAI,CAAC,CAAC,CAAD,CAAL,EAAU,MAAM,CAAC,CAAD,CAAN,GAAY,CAAC,MAAM,CAAC,CAAD,CAAN,IAAa,CAAd,IAAmB,CAAC,CAAC,CAAD,CAAhC;AACX;AACF;AACF;AAhB4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkB7C,aAAO,MAAP;AACD;;;0BAEK,MAAoD;AAAA,UAAtC,IAAsC,uEAAzB,KAAyB;AAAA,UAAlB,IAAkB,uEAAL,KAAK;AACxD,UAAM,GAAG,GAAG,KAAK,IAAL,CAAU,IAAV,CAAZ;AACA,UAAM,CAAC,GAAG,KAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,CAAV;;AACA,UAAI,CAAC,MAAA,CAAA,OAAA,CAAQ,IAAR,EAAc,KAAK,IAAnB,EAAyB,IAAzB,CAAD,IAAmC,CAAC,CAAC,CAAC,KAAF,CAAQ,MAAhD,EAAwD;AACtD,eAAO;AAAE,UAAA,KAAK,EAAE;AAAT,SAAP;AACD;;AAED,UAAM,EAAE,GAAG,GAAG,CAAC,IAAJ,KAAa,SAAb,GAAyB,CAAC,CAA1B,GAA8B,KAAK,WAAL,CAAiB,KAAjB,CAAuB,SAAvB,CAAiC,UAAA,CAAC;AAAA,eAAI,CAAC,IAAI,GAAG,CAAC,IAAb;AAAA,OAAlC,CAAzC;AACA,UAAM,CAAC,GAAG,EAAE,KAAK,CAAC,CAAR,GAAY,GAAZ,GAAkB,SAAS,CAAC,EAAD,CAArC;AAEA,UAAM,CAAC,GAAI,KAAK,WAAL,CAAiB,IAAjB,EAAqC,IAArC,CAAX;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,EAAV;AAEA,UAAM,EAAE,GAAG,GAAG,CAAC,CAAD,CAAH,IAAU,CAArB;AACA,UAAM,EAAE,GAAG,CAAC,CAAC,KAAF,CAAQ,SAAR,CAAkB,UAAC,CAAD;AAAA,eAAe,CAAC,IAAI,EAApB;AAAA,OAAlB,CAAX;AACA,UAAM,EAAE,GAAG,IAAI,CAAC,EAAD,CAAf;AAEA,UAAM,EAAE,GAAG,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAnB;AACA,UAAM,EAAE,GAAG,CAAC,CAAC,QAAF,CAAW,SAAX,CAAqB,UAAC,CAAD;AAAA,eAAe,CAAC,IAAI,EAApB;AAAA,OAArB,CAAX;AACA,UAAM,EAAE,GAAG,IAAI,CAAC,EAAD,CAAf;AAEA,UAAM,CAAC,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,IAAI,CAAC,IAAL,CAAU,CAAC,EAAE,GAAG,EAAN,IAAY,CAAtB,CAA1B,CAAV;;AAEA,UAAM,GAAG,GAAG,SAAN,GAAM,CAAC,CAAD;AAAA,eAAe,IAAI,CAAC,KAAL,CAAa,MAAM,CAAP,GAAY,CAAC,CAAC,KAAf,GAAwB,IAAnC,IAA2C,IAA1D;AAAA,OAAZ;;AACA,UAAM,MAAM,GAKR;AAAE,QAAA,KAAK,EAAE,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY;AAArB,OALJ;AAMA,UAAI,EAAE,GAAG,CAAC,CAAV,EAAa,MAAM,CAAC,IAAP,GAAc,EAAd;AACb,UAAI,EAAE,GAAG,CAAC,CAAV,EAAa,MAAM,CAAC,IAAP,GAAc;AAAE,QAAA,CAAC,EAAE,EAAL;AAAS,QAAA,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,IAAL;AAAf,OAAd;AACb,UAAI,EAAE,GAAG,CAAC,CAAV,EAAa,MAAM,CAAC,OAAP,GAAiB;AAAE,QAAA,CAAC,EAAE,EAAL;AAAS,QAAA,CAAC,EAAE,GAAG,CAAC,EAAD;AAAf,OAAjB;AACb,aAAO,MAAP;AACD;;;4BAEO,OAAmD,MAAY,MAAU;AAAA;;AAC/E,UAAM,CAAC,GAAG,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,EAAV;;AAEA,UAAM,OAAO,GAAG,SAAV,OAAU,CAAC,CAAD;AAAA,eAAe,CAAC,CAAC,KAAF,CAAQ,EAAR,EAAY,OAAZ,GAAsB,IAAtB,CAA2B,EAA3B,CAAf;AAAA,OAAhB;;AAEA,UAAM,KAAK,GAA4B,EAAvC;AACA,UAAM,SAAS,GAA4B,EAA3C;AACA,UAAM,QAAQ,GAA4B,EAA1C;AAEA,UAAM,GAAG,GAA4B,EAArC;AACA,UAAM,MAAM,GAA4B,EAAxC;AACA,UAAM,KAAK,GAA4B,EAAvC;AACA,UAAI,CAAC,GAAG,KAAK,CAAC,MAAd;AAZ+E;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,cAanE,QAbmE;AAAA,cAazD,MAbyD;;AAc7E,cAAM,EAAE,GAA8B,EAAtC;;AACA,eAAK,IAAM,GAAX,IAAgB,QAAhB,EAA0B;AACxB,YAAA,GAAG,CAAC,GAAD,CAAH,GAAS,CAAC,GAAG,CAAC,GAAD,CAAH,IAAU,CAAX,IAAgB,CAAzB;;AACA,gBAAM,GAAC,GAAG,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAV;;AACA,YAAA,EAAE,CAAC,GAAD,CAAF,GAAQ,EAAE,CAAC,GAAD,CAAF,IAAS,EAAjB;;AACA,YAAA,EAAE,CAAC,GAAD,CAAF,CAAM,IAAN,CAAW,GAAX;;AAEA,gBAAI,MAAM,CAAC,GAAP,CAAW,GAAX,CAAJ,EAAmB;AACjB,cAAA,KAAK,CAAC,GAAD,CAAL,GAAW,CAAC,KAAK,CAAC,GAAD,CAAL,IAAY,CAAb,IAAkB,CAA7B;;AAEA,kBAAM,GAAC,GAAG,OAAO,CAAC,GAAD,CAAjB;;AACA,kBAAI,GAAC,KAAK,GAAN,IAAW,QAAQ,CAAC,GAAD,CAAvB,EAA4B;AAC1B,oBAAM,CAAC,GAAG,CAAC,GAAD,EAAI,GAAJ,EAAO,IAAP,GAAc,CAAd,CAAV;;AACA,oBAAI,CAAC,MAAM,CAAC,GAAP,CAAW,GAAX,CAAL,EAAoB;AAClB,kBAAA,MAAM,CAAC,CAAD,CAAN,GAAY,CAAC,MAAM,CAAC,CAAD,CAAN,IAAa,CAAd,IAAmB,CAA/B;AAEA,kBAAA,SAAS,CAAC,CAAD,CAAT,GAAe,CAAC,SAAS,CAAC,GAAD,CAAT,IAAgB,CAAjB,IAAuB,IAAI,CAAL,GAAU,KAAI,CAAC,IAAL,CAAU,CAAV,EAAa,CAAb,CAA/C;AACD,iBAJD,MAIO,IAAI,GAAC,KAAK,CAAV,EAAa;AAClB,kBAAA,MAAM,CAAC,CAAD,CAAN,GAAY,CAAC,MAAM,CAAC,CAAD,CAAN,IAAa,CAAd,IAAmB,CAA/B;AACD;AACF;AACF,aAdD,MAcO;AACL,cAAA,KAAK,CAAC,GAAD,CAAL,GAAW,CAAC,KAAK,CAAC,GAAD,CAAL,IAAY,CAAb,IAAmB,IAAI,CAAL,GAAU,KAAI,CAAC,IAAL,CAAU,GAAV,EAAa,CAAb,CAAvC;AACD;AACF;;AAED,eAAK,IAAM,GAAX,IAAgB,EAAhB,EAAoB;AAClB,gBAAM,KAAK,GAAG,EAAE,CAAC,GAAD,CAAhB;AACA,gBAAI,KAAK,CAAC,MAAN,IAAgB,CAApB,EAAuB;AACvB,gBAAM,CAAC,GAAG,KAAK,CAAC,MAAN,CAAa,UAAA,CAAC;AAAA,qBAAI,MAAM,CAAC,GAAP,CAAW,CAAX,CAAJ;AAAA,aAAd,EAAiC,MAAjC,GAA0C,KAAK,CAAC,MAA1D;AACA,gBAAI,CAAC,CAAL,EAAQ;;AACR,gBAAM,GAAC,GAAG,KAAK,CAAC,MAAN,CAAa,UAAC,GAAD,EAAM,CAAN;AAAA,qBAAY,GAAG,GAAG,KAAI,CAAC,IAAL,CAAU,CAAV,EAAa,CAAb,CAAlB;AAAA,aAAb,EAAiD,CAAjD,IAAsD,KAAK,CAAC,MAAtE;;AACA,YAAA,QAAQ,CAAC,GAAD,CAAR,GAAc,CAAC,QAAQ,CAAC,GAAD,CAAR,IAAe,CAAhB,IAAsB,IAAI,CAAL,GAAU,GAAV,IAAe,IAAI,CAAnB,CAAnC;AACD;;AACD,UAAA,CAAC;AAhD4E;;AAa/E,8BAAiC,KAAjC,mIAAwC;AAAA;AAoCvC;AAjD8E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmD/E,UAAM,CAAC,GAAG,IAAI,CAAC,GAAL,CAAS,KAAK,CAAC,MAAf,CAAV;;AACA,WAAK,IAAM,CAAX,IAAgB,GAAhB,EAAqB;AACnB,QAAA,KAAK,CAAC,CAAD,CAAL,IAAY,CAAC,GAAG,KAAK,IAAL,CAAU,CAAV,EAAa,CAAb,CAAJ,GAAuB,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,KAAK,CAAC,CAAD,CAAL,IAAY,CAAb,IAAkB,GAAG,CAAC,CAAD,CAAlC,EAAuC,CAAvC,CAAnC;;AACA,YAAI,SAAS,CAAC,CAAD,CAAb,EAAkB;AAChB,cAAM,CAAC,GAAG,OAAO,CAAC,CAAD,CAAjB;;AADgB,qBAED,CAAC,KAAK,CAAC,CAAD,CAAL,IAAY,CAAb,KAAmB,KAAK,CAAC,CAAD,CAAL,IAAY,CAA/B,IAAoC,CAAC,CAAD,EAAI,CAAJ,CAApC,GAA6C,CAAC,CAAD,EAAI,CAAJ,CAF5C;AAAA;AAAA,cAET,EAFS;AAAA,cAEN,CAFM;;AAGhB,UAAA,SAAS,CAAC,CAAD,CAAT,IAAgB,CAAC,GAAG,KAAK,IAAL,CAAU,CAAV,EAAa,CAAb,CAAJ,GAAuB,CAAvB,GAA2B,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,KAAK,CAAC,EAAD,CAAL,IAAY,CAAb,KAAmB,GAAG,CAAC,CAAD,CAAH,IAAU,CAA7B,CAAb,EAA8C,CAA9C,CAA3C;AACD;;AAED,YAAM,CAAC,GAAG,KAAK,CAAC,SAAN,CAAgB,CAAhB,CAAV;;AACA,YAAI,QAAQ,CAAC,CAAD,CAAR,IAAe,GAAG,CAAC,CAAD,CAAtB,EAA2B;AACzB,UAAA,QAAQ,CAAC,CAAD,CAAR,IAAe,CAAC,GAAG,KAAK,IAAL,CAAU,CAAV,EAAa,CAAb,CAAJ,GAAuB,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,KAAK,CAAC,CAAD,CAAL,IAAY,CAAb,IAAkB,GAAG,CAAC,CAAD,CAAlC,EAAuC,CAAvC,CAAtC;AACD;AACF;;AAED,UAAM,MAAM,GAAG,SAAT,MAAS,CAAC,GAAD,EAA+B,KAA/B;AAAA,eACb,MAAM,CAAC,OAAP,CAAe,GAAf,EACG,IADH,CACQ,UAAC,CAAD,EAAI,CAAJ;AAAA,iBAAU,CAAC,CAAC,CAAD,CAAD,GAAO,CAAC,CAAC,CAAD,CAAlB;AAAA,SADR,EAEG,KAFH,CAES,CAFT,EAEY,KAFZ,CADa;AAAA,OAAf;;AAKA,aAAO;AACL,QAAA,KAAK,EAAE,MAAM,CAAC,KAAD,EAAQ,GAAR,CAAN,CAAmB,GAAnB,CAAuB,UAAA,CAAC;AAAA,iBAAK;AAClC,YAAA,CAAC,EAAE,CAAC,CAAC,CAAD,CAD8B;AAElC,YAAA,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAD,CAAF,CAAL,IAAe,CAFY;AAGlC,YAAA,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAD,CAAF,CAAH,IAAa;AAHgB,WAAL;AAAA,SAAxB,CADF;AAML,QAAA,SAAS,EAAE,MAAM,CAAC,SAAD,EAAY,EAAZ,CAAN,CAAsB,GAAtB,CAA0B,UAAA,CAAC,EAAG;AACvC,cAAM,CAAC,GAAG,CAAC,CAAC,CAAD,CAAX;AACA,cAAM,CAAC,GAAG,OAAO,CAAC,CAAD,CAAjB;;AAFuC,sBAGxB,CAAC,KAAK,CAAC,CAAD,CAAL,IAAY,CAAb,KAAmB,KAAK,CAAC,CAAD,CAAL,IAAY,CAA/B,IAAoC,CAAC,CAAD,EAAI,CAAJ,CAApC,GAA6C,CAAC,CAAD,EAAI,CAAJ,CAHrB;AAAA;AAAA,cAGhC,CAHgC;AAAA,cAG7B,CAH6B;;AAIvC,iBAAO;AAAE,YAAA,CAAC,EAAD,CAAF;AAAK,YAAA,EAAE,EAAE,KAAK,CAAC,CAAD,CAAL,IAAY,CAArB;AAAwB,YAAA,CAAC,EAAD,CAAxB;AAA2B,YAAA,EAAE,EAAE,KAAK,CAAC,CAAD,CAAL,IAAY,CAA3C;AAA8C,YAAA,CAAC,EAAE,MAAM,CAAC,CAAD,CAAN,IAAa;AAA9D,WAAP;AACD,SALU,CANN;AAYL,QAAA,QAAQ,EAAE,MAAM,CAAC,QAAD,EAAW,EAAX,CAAN,CAAqB,GAArB,CAAyB,UAAA,CAAC,EAAG;AACrC,cAAM,KAAK,GAAG,EAAd;AADqC;AAAA;AAAA;;AAAA;AAGrC,kCAAgB,MAAA,CAAA,KAAA,CAAM,KAAI,CAAC,QAAL,CAAc,CAAC,CAAC,CAAD,CAAf,EAAoB,IAApB,EAA0B,KAAhC,CAAhB,mIAAwD;AAAA,kBAA7C,EAA6C;;AACtD,kBAAM,EAAC,GAAG,EAAC,CAAC,OAAF,CAAU,QAAV,EAAoB,EAApB,CAAV;;AACA,cAAA,KAAK,CAAC,IAAN,CAAW;AAAE,gBAAA,GAAG,EAAE,EAAP;AAAU,gBAAA,KAAK,EAAE,KAAK,CAAC,EAAD,CAAL,IAAY,CAA7B;AAAgC,gBAAA,GAAG,EAAE,GAAG,CAAC,EAAD,CAAH,IAAU;AAA/C,eAAX;AACD;AANoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOrC,iBAAO,KAAP;AACD,SARS;AAZL,OAAP;AAsBD;;;8BAEgB,MAAY;AAE3B,aAAO,IAAI,CAAC,KAAL,CAAW,EAAX,EAAe,IAAf,GAAsB,IAAtB,CAA2B,EAA3B,CAAP;AACD;;;;;;AA7KH,OAAA,CAAA,KAAA,GAAA,KAAA;;AAgLA,SAAS,SAAT,CAAmB,CAAnB,EAA4B;AAC1B,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,GAAP;AACb,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,GAAP;AACb,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,GAAP;AACb,MAAI,CAAC,IAAI,CAAT,EAAY,OAAO,GAAP;AACZ,SAAO,GAAP;AACD;;AAED,SAAS,IAAT,CAAc,CAAd,EAAuB;AACrB,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,CAAP;AACb,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,CAAP;AACb,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,CAAP;AACb,MAAI,CAAC,IAAI,EAAT,EAAa,OAAO,CAAP;AACb,SAAO,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtND,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAGA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAEA,IAAM,KAAK,GAAG,IAAI,OAAA,CAAA,KAAJ,CAAU,IAAV,EAAgB,OAAhB,CAAd;AACA,IAAM,QAAQ,GAAa;AAAC,EAAA,IAAI,EAAE,KAAP;AAAc,EAAA,GAAG,EAAE,CAAnB;AAAsB,EAAA,IAAI,EAAE,KAA5B;AAAmC,EAAA,KAAK,EAAE,GAA1C;AAA+C,EAAA,OAAO,EAAE;AAAxD,CAA3B;;AACA,IAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,GAAD;AAAA,SAAiB,KAAK,CAAC,GAAD,EAAM;AAAC,IAAA,IAAI,EAAE;AAAP,GAAN,CAAL,CAA8B,IAA9B,CAAmC,UAAA,CAAC;AAAA,WAAI,CAAC,CAAC,IAAF,EAAJ;AAAA,GAApC,CAAjB;AAAA,CAAlB;;AAGa,OAAA,CAAA,MAAA,GAiBT;AACF,EAAA,QAAQ,EAAE,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,UAArB,CAAX,KAA6D,QADrE;AAEF,EAAA,KAAK,EAAL,KAFE;AAGF,EAAA,KAAK,EAAE,GAHL;AAIF,EAAA,IAAI,EAAE,SAJJ;AAKF,EAAA,KAAK,EAAE,SALL;AAMF,EAAA,OAAO,EAAE,SANP;AAOF,EAAA,IAAI,EAAE,SAPJ;AAQF,EAAA,KAAK,EAAE,SARL;AASF,EAAA,IAAI,EAAE,CATJ;AAUF,EAAA,MAAM,EAAE;AACN,IAAA,IAAI,EAAE,SAAS,CAAC,gBAAD,CAAT,CAA4B,IAA5B,CAAiC,UAAA,CAAC,EAAG;AAAG,MAAA,OAAA,CAAA,MAAA,CAAO,IAAP,GAAc,CAAd;AAAkB,KAA1D,CADA;AAEN,IAAA,IAAI,EAAE;AAAA,aAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACX,OAAA,CAAA,MAAA,CAAO,IADI;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAEf,uBAAM,OAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAApB;;AAFe;AAGf,gBAAA,OAAA,CAAA,MAAA,CAAO,IAAP,GAAc,MAAA,CAAA,IAAA,CAAK,MAAL,CAAY,OAAA,CAAA,MAAA,CAAO,IAAnB,CAAd;;AAHe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,EAAX;AAAA,KAFA;AAON,IAAA,KAAK,EAAE;AAAA,aAAW,SAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZ,OAAA,CAAA,MAAA,CAAO,KADK;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAGhB,uBAAM,OAAO,CAAC,GAAR,CAAY,CAChB,OAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IADE,EAEhB,SAAS,CAAC,iBAAD,CAAT,CAA6B,IAA7B,CAAkC,UAAA,CAAC,EAAG;AAAG,kBAAA,KAAK,GAAG,CAAR;AAAY,iBAArD,CAFgB,CAAZ,CAAN;;AAHgB;AAOhB,gBAAA,OAAA,CAAA,MAAA,CAAO,KAAP,GAAe,IAAI,OAAA,CAAA,KAAJ,CAAU,KAAV,EAAkB,OAAA,CAAA,MAAA,CAAO,IAAzB,CAAf;;AAPgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,EAAX;AAAA,KAPD;AAgBN,IAAA,OAAO,EAAE,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,IAArB,CAA0B,UAAA,CAAC,EAAG;AAAG,MAAA,OAAA,CAAA,MAAA,CAAO,OAAP,GAAiB,CAAe,IAAI,EAApC;AAAuC,KAAxE,CAhBH;AAiBN,IAAA,QAAQ,EAAE,OAAA,CAAA,KAAA,CAAM,KAAN,CAAY,UAAZ,EAAwB,CAAC,KAAD,EAAQ,QAAR,EAAkB,KAAlB,CAAxB;AAjBJ;AAVN,CAjBS;AAiDX,MAAM,CAAC,MAAP,GAAgB,OAAA,CAAA,MAAhB;;;;;;;;;;;;;;IC9DW;;;AAGX,oBAAiB;AAAA,QAAL,CAAK,uEAAD,CAAC;;AAAA;;AAEf,IAAA,CAAC,GAAG,CAAC,GAAG,EAAJ,GAAU,CAAC,KAAK,EAApB;AACA,IAAA,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAT,CAAL;AACA,IAAA,CAAC,GAAG,CAAC,GAAI,CAAC,KAAK,CAAf;AACA,IAAA,CAAC,GAAG,IAAI,CAAC,IAAL,CAAU,CAAV,EAAa,UAAb,CAAJ;AACA,IAAA,CAAC,GAAG,CAAC,GAAI,CAAC,KAAK,EAAf;AACA,SAAK,IAAL,GAAY,CAAC,KAAK,CAAlB;AACD;;;;yBAGI,KAAc,KAAY;AAC7B,UAAI,GAAJ,EAAS,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,CAAN;AACT,UAAI,GAAJ,EAAS,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,GAAX,CAAN;AAET,UAAI,CAAC,GAAI,KAAK,IAAL,IAAa,aAAa,CAAnC;AACA,MAAA,CAAC,GAAG,IAAI,CAAC,IAAL,CAAU,CAAC,GAAI,CAAC,KAAK,EAArB,EAA0B,CAAC,GAAG,CAA9B,CAAJ;AACA,MAAA,CAAC,GAAG,CAAC,GAAI,CAAC,GAAG,IAAI,CAAC,IAAL,CAAU,CAAC,GAAI,CAAC,KAAK,CAArB,EAAyB,CAAC,GAAG,EAA7B,CAAb;AACA,MAAA,CAAC,GAAG,CAAC,CAAC,GAAI,CAAC,KAAK,EAAZ,MAAqB,CAAzB;AACA,UAAM,CAAC,GAAG,CAAC,GAAG,IAAA,CAAA,GAAA,CAAA,CAAA,EAAK,EAAL,CAAd;AAEA,UAAI,GAAG,KAAK,SAAZ,EAAuB,OAAO,CAAP;AACvB,UAAI,CAAC,GAAL,EAAU,OAAO,IAAI,CAAC,KAAL,CAAW,CAAC,GAAG,GAAf,CAAP;AACV,aAAO,IAAI,CAAC,KAAL,CAAW,CAAC,IAAI,GAAG,GAAG,GAAV,CAAZ,IAA8B,GAArC;AACD;;;4BAEU,KAAQ;AACjB,WAAK,IAAI,CAAC,GAAG,GAAG,CAAC,MAAJ,GAAa,CAA1B,EAA6B,CAAC,GAAG,CAAjC,EAAoC,CAAC,EAArC,EAAyC;AACvC,YAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,IAAL,MAAe,CAAC,GAAG,CAAnB,CAAX,CAAV;AADuC,mBAEpB,CAAC,GAAG,CAAC,CAAD,CAAJ,EAAS,GAAG,CAAC,CAAD,CAAZ,CAFoB;AAEtC,QAAA,GAAG,CAAC,CAAD,CAFmC;AAE9B,QAAA,GAAG,CAAC,CAAD,CAF2B;AAGxC;;AACD,aAAO,GAAP;AACD;;;2BAES,KAAwB;AAAA,UAAd,MAAc,uEAAL,KAAK;AAChC,UAAI,GAAG,CAAC,MAAJ,KAAe,CAAnB,EAAsB,MAAM,IAAI,UAAJ,CAAe,8BAAf,CAAN;AACtB,UAAM,KAAK,GAAG,KAAK,IAAL,CAAU,GAAG,CAAC,MAAd,CAAd;AACA,UAAM,GAAG,GAAG,GAAG,CAAC,KAAD,CAAf;;AACA,UAAI,MAAJ,EAAY;AACV,QAAA,GAAG,CAAC,KAAD,CAAH,GAAa,GAAG,CAAC,GAAG,CAAC,MAAJ,GAAa,CAAd,CAAhB;AACA,QAAA,GAAG,CAAC,GAAJ;AACD;;AACD,UAAI,GAAG,KAAK,SAAR,IAAqB,CAAC,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,GAArC,EAA0C,KAA1C,CAA1B,EAA4E;AAC1E,cAAM,IAAI,UAAJ,gCAAN;AACD;;AACD,aAAO,GAAP;AACD;;;;;;AAjDH,OAAA,CAAA,MAAA,GAAA,MAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAGA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAGA,IAAM,QAAQ,GAAG,CACf,QADe,EACL,QADK,EACK,QADL,EACe,QADf,EAEf,QAFe,EAEL,QAFK,EAEK,QAFL,EAEe,QAFf,EAGf,QAHe,EAGL,QAHK,EAGK,QAHL,EAGe,QAHf,EAIf,QAJe,EAIL,QAJK,EAIK,QAJL,EAIe,QAJf,CAAjB;AAQA,IAAM,QAAQ,GAAG,CACf,QADe,EACL,QADK,EACK,QADL,EACe,QADf,EAEf,QAFe,EAEL,QAFK,EAEK,QAFL,EAEe,QAFf,EAGf,QAHe,EAGL,QAHK,EAGK,QAHL,EAGe,QAHf,EAIf,QAJe,EAIL,QAJK,EAIK,QAJL,EAIe,QAJf,CAAjB;AAQA,IAAM,QAAQ,GAAG,CACf,QADe,EACL,QADK,EACK,QADL,EACe,QADf,EACyB,QADzB,EAEf,QAFe,EAEL,QAFK,EAEK,QAFL,EAEe,QAFf,EAEyB,QAFzB,EAGf,QAHe,EAGL,QAHK,EAGK,QAHL,EAGe,QAHf,EAGyB,QAHzB,EAIf,QAJe,EAIL,QAJK,EAIK,QAJL,EAIe,QAJf,EAIyB,QAJzB,EAKf,QALe,EAKL,QALK,EAKK,QALL,EAKe,QALf,EAKyB,QALzB,CAAjB;AAQa,OAAA,CAAA,QAAA,GAAW,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,KAAlB,CAAX;;IAsBA;;;AA+BX,gBACE,IADF,EAEE,IAFF,EAGE,KAHF,EAIE,MAJF,EAKuD;AAAA,QAArD,QAAqD,uEAA5B;AAAE,MAAA,IAAI,EAAE,KAAR;AAAe,MAAA,IAAI,EAAE;AAArB,KAA4B;;AAAA;;AAErD,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,KAAL,GAAa,KAAb;AAEA,SAAK,IAAL,GAAY,QAAQ,CAAC,IAAT,KAAkB,KAAlB,GAA0B,QAA1B,GAAqC,QAAQ,CAAC,IAAT,KAAkB,KAAlB,GAA0B,QAA1B,GAAqC,QAAtF;AACA,SAAK,IAAL,GAAY,IAAI,CAAC,IAAL,CAAU,KAAK,IAAL,CAAU,MAApB,CAAZ;AACA,IAAA,QAAQ,CAAC,GAAT,GAAgB,QAAQ,CAAC,GAAT,IAAgB,KAAK,IAAL,GAAY,CAA5C;AACA,SAAK,QAAL,GAAgB,QAAhB;AAEA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,IAAL,GAAY,KAAK,MAAL,CAAY,IAAxB;AACA,SAAK,KAAL,GAAa,EAAb;AAbqD;AAAA;AAAA;;AAAA;AAcrD,2BAAkB,KAAK,IAAvB,8HAA6B;AAAA,YAAlB,GAAkB;AAC3B,YAAM,CAAC,GAAG,KAAK,MAAL,CAAY,MAAZ,CAAmB,GAAG,CAAC,KAAJ,CAAU,EAAV,CAAnB,CAAV;AACA,aAAK,KAAL,CAAW,IAAX,CAAgB,CAAC,KAAK,GAAN,GAAY,IAAZ,GAAmB,CAAnC;AACD;AAjBoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBrD,SAAK,MAAL,CAAY,OAAZ,CAAoB,KAAK,KAAzB;AACA,SAAK,QAAL,GAAgB,KAAK,KAAL,EAAhB;AAEA,SAAK,EAAL,GAAU,IAAI,CAAC,QAAL,CAAc,KAAK,QAAnB,EAA6B,KAAK,IAAlC,CAAV;AACA,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,QAAL,GAAgB,IAAI,GAAJ,EAAhB;AACA,SAAK,KAAL,GAAa;AAAE,MAAA,OAAO,EAAE,CAAX;AAAc,MAAA,QAAQ,EAAE;AAAxB,KAAb;AAEA,SAAK,KAAL,GAAa,CAAC,IAAI,IAAJ,EAAd;AACA,SAAK,OAAL,GAAe,IAAf;AACD;;;;yBAEI,MAAY;AACf,UAAI,CAAC,KAAK,MAAL,CAAY,IAAZ,CAAD,IAAsB,IAAI,CAAC,MAAL,IAAe,KAAK,QAAL,CAAc,GAAvD,EAA4D;AAC1D,YAAI,KAAK,QAAL,CAAc,IAAd,CAAJ,EAAyB;AACvB,eAAK,MAAL,CAAY,IAAZ,IAAoB,CAAC,IAAI,IAAJ,EAArB;AACA,cAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAd;AACA,cAAI,KAAK,OAAT,EAAkB,KAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB;AAElB,cAAM,MAAM,GAAG,KAAK,OAAL,GAAe,UAAf,GAA4B,SAA3C;AACA,eAAK,KAAL,CAAW,MAAX,KAAsB,KAAtB;AACA,iBAAO,KAAP;AACD,SARD,MAQO;AACL,eAAK,MAAL,CAAY,IAAZ,IAAoB,CAAC,IAAI,IAAJ,EAArB;AACA,cAAI,KAAK,OAAT,EAAkB,KAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB;AACnB;AACF;;AACD,aAAO,CAAP;AACD;;;6BAEK;AACJ,aAAO;AACL,QAAA,IAAI,EAAE,KAAK,EADN;AAEL,QAAA,KAAK,EAAE,KAAK,KAFP;AAGL,QAAA,OAAO,EAAE,KAAK,OAHT;AAIL,QAAA,KAAK,EAAE,KAAK,MAJP;AAKL,QAAA,IAAI,EAAE;AACJ,UAAA,CAAC,EAAE,KAAK,MAAL,CAAY,CADX;AAEJ,UAAA,CAAC,EAAE,KAAK,MAAL,CAAY,CAFX;AAGJ,UAAA,CAAC,EAAE,KAAK,MAAL,CAAY,CAHX;AAIJ,UAAA,CAAC,EAAE,KAAK,MAAL,CAAY,CAJX;AAKJ,UAAA,CAAC,EAAE,KAAK,MAAL,CAAY;AALX;AALD,OAAP;AAaD;;;+BAwEO;AAAA;;AACN,UAAI,KAAK,GAAG,CAAZ;AACA,UAAI,OAAO,GAAG,CAAd;AACA,UAAI,KAAK,GAAG,CAAZ;AACA,UAAM,QAAQ,GAAmC,EAAjD;AACA,UAAM,QAAQ,GAAG,IAAI,GAAJ,EAAjB;AAEA,UAAM,QAAQ,GAAoC,EAAlD;;AACA,WAAK,IAAM,IAAX,IAAmB,KAAK,MAAxB,EAAgC;AAC9B,QAAA,KAAK;;AACL,YAAI,KAAK,MAAL,CAAY,IAAZ,IAAoB,CAAxB,EAA2B;AACzB,UAAA,OAAO;AACP;AACD;;AACD,QAAA,KAAK;AANyB;AAAA;AAAA;;AAAA;AAQ9B,gCAAqB,OAAA,CAAA,QAArB,mIAA+B;AAAA,gBAApB,MAAoB;AAC7B,gBAAI,QAAQ,SAAZ;;AACA,gBAAI,CAAC,IAAD,EAAO,IAAP,EAAa,QAAb,CAAsB,MAAtB,KAAiC,IAAI,CAAC,QAAL,CAAc,GAAd,CAArC,EAAyD;AACvD,cAAA,QAAQ,aAAM,IAAN,SAAa,MAAM,CAAC,MAAP,CAAc,CAAd,CAAb,CAAR;AACD,aAFD,MAEO,IAAI,MAAM,KAAK,GAAX,KAAmB,IAAI,CAAC,QAAL,CAAc,GAAd,KAAsB,IAAI,CAAC,QAAL,CAAc,GAAd,CAAzC,CAAJ,EAAkE;AACvE,cAAA,QAAQ,aAAM,IAAN,OAAR;AACD,aAFM,MAEA;AACL,cAAA,QAAQ,aAAM,IAAN,SAAa,MAAb,CAAR;AACD;;AACD,gBAAI,KAAK,QAAL,CAAc,QAAd,KAA2B,CAAC,KAAK,MAAL,CAAY,QAAZ,CAAhC,EAAuD,QAAQ,CAAC,QAAD,CAAR,GAAqB,IAArB;AACxD;AAlB6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoB9B,YAAM,OAAO,GAAG,OAAA,CAAA,KAAA,CAAM,SAAN,CAAgB,IAAhB,CAAhB;AACA,QAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,QAAQ,CAAC,OAAD,CAAR,IAAqB,EAAzC;AACA,QAAA,QAAQ,CAAC,OAAD,CAAR,CAAkB,IAAlB,CAAuB,IAAvB;AAtB8B;AAAA;AAAA;;AAAA;AAwB9B,gCAAkB,IAAI,CAAC,IAAD,EAAO,KAAK,QAAL,CAAc,GAArB,CAAtB,mIAAiD;AAAA,gBAAtC,GAAsC;AAC/C,gBAAI,KAAK,QAAL,CAAc,GAAd,KAAsB,CAAC,KAAK,MAAL,CAAY,GAAZ,CAA3B,EAA6C,QAAQ,CAAC,GAAT,CAAa,GAAb;AAC9C;AA1B6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2B/B;;AAED,UAAI,OAAO,GAAa,EAAxB;;AArCM,iCAsCK,QAtCL;AAuCJ,QAAA,OAAO,GAAG,OAAO,CAAC,MAAR,CACR,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,QAArB,EAA8B,MAA9B,CAAqC,UAAA,CAAC;AAAA,iBAAI,CAAC,QAAQ,CAAC,QAAD,CAAR,CAAkB,QAAlB,CAA2B,CAA3B,CAAL;AAAA,SAAtC,CADQ,CAAV;AAvCI;;AAsCN,WAAK,IAAM,QAAX,IAAsB,QAAtB,EAAgC;AAAA,cAArB,QAAqB;AAI/B;;AAED,UAAM,KAAK,GAAG,IAAI,GAAJ,8BAAY,MAAM,CAAC,IAAP,CAAY,QAAZ,CAAZ,sBAAsC,QAAtC,sBAAmD,OAAnD,GAAd;AACA,UAAM,KAAK,GACT,KAAK,KAAL,CAAW,OAAX,GACA,KAAK,KAAL,CAAW,QADX,GAEA,KAAK,CAAC,IAAN,CAAW,KAAX,EAAkB,MAAlB,CAAyB,UAAC,GAAD,EAAM,CAAN;AAAA,eAAY,IAAI,CAAC,KAAL,CAAW,CAAX,IAAgB,GAA5B;AAAA,OAAzB,EAA0D,CAA1D,CAHF;AAKA,aAAO;AACL,QAAA,OAAO,EAAP,OADK;AAEL,QAAA,KAAK,EAAL,KAFK;AAGL,QAAA,KAAK,EAAL,KAHK;AAIL,QAAA,KAAK,EAAL,KAJK;AAKL,QAAA,QAAQ,EAAR,QALK;AAML,QAAA,QAAQ,EAAE,QAAQ,CAAC,IANd;AAOL,QAAA,QAAQ,EAAE,OAAO,CAAC,MAPb;AAQL,QAAA,OAAO,EAAE;AARJ,OAAP;AAUD;;;4BAEI;AAAA;;AACH,UAAM,QAAQ,GAAG,KAAK,QAAL,EAAjB;;AACA,UAAM,EAAE,GAAG,SAAL,EAAK,CAAC,CAAD;AAAA,eAAe,MAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,CAAjB,EAAoB,MAAI,CAAC,QAAL,CAAc,IAAlC,EAAwC,MAAI,CAAC,QAAL,CAAc,IAAtD,EAA4D,KAA3E;AAAA,OAAX;;AAEA,UAAM,EAAE,GAAG,SAAL,EAAK,CAAC,CAAD,EAAY,CAAZ,EAAyB;AAClC,YAAM,EAAE,GAAG,QAAQ,CAAC,OAAT,CAAiB,GAAjB,CAAqB,CAArB,CAAX;AACA,YAAM,EAAE,GAAG,QAAQ,CAAC,OAAT,CAAiB,GAAjB,CAAqB,CAArB,CAAX;AACA,YAAI,EAAE,IAAI,CAAC,EAAX,EAAe,OAAO,CAAC,CAAR;AACf,YAAI,EAAE,IAAI,CAAC,EAAX,EAAe,OAAO,CAAP;AAEf,YAAM,EAAE,GAAG,EAAE,CAAC,CAAD,CAAb;AACA,YAAM,EAAE,GAAG,EAAE,CAAC,CAAD,CAAb;AACA,YAAI,EAAE,GAAG,EAAT,EAAa,OAAO,CAAC,CAAR;AACb,YAAI,EAAE,GAAG,EAAT,EAAa,OAAO,CAAP;AAEb,YAAI,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAAjB,EAAyB,OAAO,CAAP;AACzB,YAAI,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAAjB,EAAyB,OAAO,CAAC,CAAR;AAEzB,eAAO,OAAA,CAAA,KAAA,CAAM,SAAN,CAAgB,CAAhB,EAAmB,aAAnB,CAAiC,OAAA,CAAA,KAAA,CAAM,SAAN,CAAgB,CAAhB,CAAjC,CAAP;AACD,OAfD;;AAiBA,UAAM,OAAO,GAAG,SAAV,OAAU,CAAC,CAAD;AAAA,eAAgB;AAC9B,UAAA,IAAI,EAAE,CADwB;AAE9B,UAAA,KAAK,EAAE,EAAE,CAAC,CAAD,CAFqB;AAG9B,UAAA,IAAI,EAAE,MAAA,CAAA,MAAA,CAAO,CAAP,EAAU,MAAI,CAAC,IAAf;AAHwB,SAAhB;AAAA,OAAhB;;AAMA,aAAO;AACL,QAAA,MAAM,EAAE,KAAK,CAAC,IAAN,CAAW,MAAM,CAAC,OAAP,CAAe,KAAK,MAApB,CAAX,EACL,IADK,CACA,UAAC,CAAD,EAAI,CAAJ;AAAA,iBAAU,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAV,IAAiB,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAD,CAAV,CAA3B;AAAA,SADA,EAEL,GAFK,CAED,UAAA,CAAC,EAAG;AACP,cAAM,CAAC,GAAG,CAAC,CAAC,CAAD,CAAX;AACA,cAAM,CAAC,GAMH,OAAO,CAAC,CAAD,CANX;AAOA,cAAI,CAAC,CAAC,CAAD,CAAD,GAAO,CAAX,EAAc,CAAC,CAAC,OAAF,GAAY,IAAZ;AACd,cAAI,MAAI,CAAC,QAAL,CAAc,GAAd,CAAkB,CAAlB,CAAJ,EAA0B,CAAC,CAAC,QAAF,GAAa,IAAb;AAC1B,iBAAO,CAAP;AACD,SAdK,CADH;AAgBL,QAAA,SAAS,EAAE,MAAM,CAAC,IAAP,CAAY,KAAK,QAAjB,EACR,MADQ,CACD,UAAA,CAAC;AAAA,iBAAI,CAAC,MAAI,CAAC,MAAL,CAAY,CAAZ,CAAL;AAAA,SADA,EAER,IAFQ,CAEH,EAFG,EAGR,GAHQ,CAGJ,UAAA,CAAC,EAAG;AACP,cAAM,CAAC,GAMH,OAAO,CAAC,CAAD,CANX;AAOA,cAAI,QAAQ,CAAC,OAAT,CAAiB,GAAjB,CAAqB,CAArB,CAAJ,EAA6B,CAAC,CAAC,OAAF,GAAY,IAAZ;AAC7B,cAAI,QAAQ,CAAC,QAAT,CAAkB,CAAlB,CAAJ,EAA0B,CAAC,CAAC,IAAF,GAAS,QAAQ,CAAC,QAAT,CAAkB,CAAlB,CAAT;AAC1B,iBAAO,CAAP;AACD,SAdQ,CAhBN;AA+BL,QAAA,QAAQ,EAAR,QA/BK;AAgCL,QAAA,MAAM,EAAE,KAAK;AAhCR,OAAP;AAkCD;;;4BAEI;AAAA;;AACH,UAAM,KAAK,GAAgD,EAA3D;AACA,UAAM,KAAK,GAAmE,EAA9E;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,IAAzB,EAA+B,CAAC,EAAhC,EAAoC;AAClC,aAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,IAAzB,EAA+B,CAAC,EAAhC,EAAoC;AAClC,cAAI,CAAC,GAAG,KAAK,KAAL,CAAW,KAAK,IAAL,GAAY,CAAZ,GAAgB,CAA3B,CAAR;AACA,cAAM,GAAG,GAAG,CAAC,CAAC,UAAF,CAAa,CAAb,CAAZ;AACA,cAAI,IAAI,GAAG,KAAK,IAAL,CAAU,QAAV,CAAmB,GAAG,GAAG,EAAzB,CAAX;;AACA,cAAI,CAAC,KAAK,IAAN,IAAc,IAAI,KAAK,SAA3B,EAAsC;AACpC,YAAA,CAAC,GAAG,IAAJ;AACA,YAAA,IAAI,GAAG,IAAI,CAAC,QAAL,CAAc,EAAd,CAAP;AACD;;AACD,cAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,YAAA,KAAK,CAAC,IAAN,CAAW,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,IAAV,EAAgB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAAhB,CAAX;AACD;AACF;AACF;;AACD,aAAO,KAAK,CAAC,MAAN,KAAiB,CAAxB,EAA2B;AAAA,yBACE,KAAK,CAAC,GAAN,EADF;AAAA;AAAA,YAClB,EADkB;AAAA,YACf,EADe;AAAA,YACZ,CADY;AAAA,YACT,KADS;AAAA,YACH,CADG;;AAAA;AAAA;AAAA,cAGb,EAHa;AAAA,cAGT,EAHS;;AAAA,cAIhB,EAJgB,GAIL,EAAC,GAAG,EAJC;AAAA,cAIZ,EAJY,GAIG,EAAC,GAAG,EAJP;AAKvB,cAAI,CAAC,CAAC,IAAF,CAAO,UAAA,CAAC;AAAA,mBAAI,CAAC,CAAC,CAAD,CAAD,KAAS,EAAT,IAAe,CAAC,CAAC,CAAD,CAAD,KAAS,EAA5B;AAAA,WAAR,MAA4C,SAAhD,EAA2D;;AAC3D,cAAI,KAAK,EAAL,IAAW,EAAE,GAAG,MAAI,CAAC,IAArB,IAA6B,KAAK,EAAlC,IAAwC,EAAE,GAAG,MAAI,CAAC,IAAtD,EAA4D;AAC1D,gBAAM,IAAI,GAAG,CAAC,CAAC,KAAF,EAAb;AACA,YAAA,IAAI,CAAC,IAAL,CAAU,CAAC,EAAD,EAAK,EAAL,CAAV;AAEA,gBAAI,EAAC,GAAG,MAAI,CAAC,KAAL,CAAW,MAAI,CAAC,IAAL,GAAY,EAAZ,GAAiB,EAA5B,CAAR;;AACA,gBAAI,KAAK,GAAG,KAAI,CAAC,QAAL,CAAc,EAAC,CAAC,UAAF,CAAa,CAAb,IAAkB,EAAhC,CAAZ;;AACA,gBAAI,EAAC,KAAK,IAAN,IAAc,KAAK,KAAK,SAA5B,EAAuC;AACrC,cAAA,EAAC,GAAG,IAAJ;AACA,cAAA,KAAK,GAAG,KAAK,CAAC,QAAN,CAAe,EAAf,CAAR;AACD;;AACD,gBAAI,KAAK,KAAK,SAAd,EAAyB;AACvB,kBAAM,EAAE,GAAG,CAAC,GAAG,EAAf;AACA,kBAAM,MAAM,GAAG,OAAO,KAAK,CAAC,MAAb,KAAwB,SAAxB,GACb,KAAK,CAAC,MADO,GACE,KAAK,CAAC,MAAN,CAAa,QAAb,CAAsB,MAAI,CAAC,QAAL,CAAc,IAAd,CAAmB,MAAnB,CAA0B,CAA1B,CAAtB,CADjB;AAEA,kBAAI,MAAM,IAAI,EAAE,CAAC,MAAH,IAAa,MAAI,CAAC,QAAL,CAAc,GAAzC,EAA8C,KAAK,CAAC,EAAD,CAAL,GAAY,IAAZ;AAC9C,cAAA,KAAK,CAAC,IAAN,CAAW,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,KAAb,EAAoB,IAApB,CAAX;AACD;AACF;AAvBsB;;AAGzB,kCAAuB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAC,CAAL,CAAT,EAAkB,CAAC,CAAD,EAAI,CAAC,CAAL,CAAlB,EAA2B,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,CAA3B,EAAqC,CAAC,CAAC,CAAF,EAAK,CAAL,CAArC,EAA8C,CAAC,CAAC,CAAF,EAAK,CAAL,CAA9C,EAAuD,CAAC,CAAD,EAAI,CAAJ,CAAvD,EAA+D,CAAC,CAAD,EAAI,CAAJ,CAA/D,CAAvB,6BAA+F;AAAA;;AAAA,mCAElC;AAmB5D;AACF;;AACD,aAAO,KAAP;AACD;;;wBAhMS;AACR,UAAI,KAAK,OAAT,EAAkB,OAAO,KAAK,OAAZ;AAElB,UAAM,QAAQ,GAAoC,EAAlD;AACA,UAAM,MAAM,GAAgC,EAA5C;;AACA,WAAK,IAAM,IAAX,IAAmB,KAAK,QAAxB,EAAkC;AAChC,YAAM,OAAO,GAAG,OAAA,CAAA,KAAA,CAAM,SAAN,CAAgB,IAAhB,CAAhB;AACA,QAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,QAAQ,CAAC,OAAD,CAAR,IAAqB,EAAzC;AACA,QAAA,QAAQ,CAAC,OAAD,CAAR,CAAkB,IAAlB,CAAuB,IAAvB;AAEA,YAAM,CAAC,GAAG,KAAK,KAAL,CAAW,KAAX,CAAiB,IAAjB,EAAuB,KAAK,QAAL,CAAc,IAArC,EAA2C,KAAK,QAAL,CAAc,IAAzD,EAA+D,KAAzE;AACA,QAAA,MAAM,CAAC,CAAD,CAAN,GAAY,CAAC,MAAM,CAAC,CAAD,CAAN,IAAa,CAAd,IAAmB,IAAI,CAAC,KAAL,CAAW,IAAX,CAA/B;AACD;;AAED,UAAM,CAAC,GAAG,MAAM,CAAC,CAAP,IAAY,CAAtB;AACA,UAAM,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAP,IAAY,CAAhB,CAAX;AACA,UAAM,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAP,IAAY,CAAhB,CAAX;AACA,UAAM,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAP,IAAY,CAAhB,CAAX;AACA,UAAM,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,GAAD,CAAN,IAAe,CAAnB,CAAX;AAEA,aAAQ,KAAK,OAAL,GAAe;AAAE,QAAA,CAAC,EAAD,CAAF;AAAK,QAAA,CAAC,EAAD,CAAL;AAAQ,QAAA,CAAC,EAAD,CAAR;AAAW,QAAA,CAAC,EAAD,CAAX;AAAc,QAAA,CAAC,EAAD,CAAd;AAAiB,QAAA,QAAQ,EAAR;AAAjB,OAAvB;AACD;;;6BApEe,GAA4B,MAAY;AACtD,uBAAU,CAAC,CAAC,IAAF,CAAO,MAAP,CAAc,CAAd,CAAV,SAA6B,CAAC,CAAC,GAA/B,SAAqC,CAAC,CAAC,IAAF,CAAO,MAAP,CAAc,CAAd,CAArC,SAAwD,IAAxD;AACD;;;6BAEe,IAAU;AACxB,UAAM,CAAC,GAAG,EAAE,CAAC,MAAH,CAAU,CAAV,CAAV;AACA,UAAM,IAAI,GAAG,CAAC,KAAK,GAAN,GAAY,KAAZ,GAAoB,CAAC,KAAK,GAAN,GAAY,KAAZ,GAAoB,CAAC,KAAK,GAAN,GAAY,KAAZ,GAAoB,SAAzE;AACA,UAAM,GAAG,GAAG,MAAM,CAAC,EAAE,CAAC,MAAH,CAAU,CAAV,CAAD,CAAlB;AACA,UAAM,CAAC,GAAG,EAAE,CAAC,MAAH,CAAU,CAAV,CAAV;AACA,UAAM,IAAI,GAAG,CAAC,KAAK,GAAN,GAAY,KAAZ,GAAoB,CAAC,KAAK,GAAN,GAAY,QAAZ,GAAuB,CAAC,KAAK,GAAN,GAAY,KAAZ,GAAoB,SAA5E;AAEA,UAAM,GAAG,GAAG,EAAE,CAAC,KAAH,CAAS,CAAT,CAAZ;AACA,UAAI,IAAI,GAAG,GAAG,CAAC,MAAJ,GAAa,MAAM,CAAC,GAAD,CAAnB,GAA2B,GAAtC;AACA,UAAI,MAAM,CAAC,IAAD,CAAN,KAAiB,GAArB,EAA0B,IAAI,GAAG,GAAP;AAE1B,aAAO,CAAC;AAAE,QAAA,IAAI,EAAJ,IAAF;AAAQ,QAAA,GAAG,EAAH,GAAR;AAAa,QAAA,IAAI,EAAJ;AAAb,OAAD,EAAsB,IAAtB,CAAP;AACD;;;6BAEe,MAAgB,MAAY,MAAkB,OAAY;AAAA,2BAC/C,IAAI,CAAC,QAAL,CAAc,IAAI,CAAC,IAAnB,CAD+C;AAAA;AAAA,UACjE,QADiE;AAAA,UACvD,IADuD;;AAExE,UAAM,MAAM,GAAG,IAAI,QAAA,CAAA,MAAJ,EAAf;AACA,MAAA,MAAM,CAAC,IAAP,GAAc,IAAd;AACA,UAAM,IAAI,GAAG,IAAI,IAAJ,CAAS,IAAT,EAAe,IAAf,EAAqB,KAArB,EAA4B,MAA5B,EAAoC,QAApC,CAAb;AAGA,MAAA,IAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAlB;AAEA,MAAA,IAAI,CAAC,OAAL,GAAe,IAAI,CAAC,OAApB;AAEA,MAAA,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,KAAnB;AAEA,UAAM,KAAK,GAAG;AAAE,QAAA,OAAO,EAAE,CAAX;AAAc,QAAA,QAAQ,EAAE;AAAxB,OAAd;;AACA,WAAK,IAAM,CAAX,IAAgB,IAAI,CAAC,MAArB,EAA6B;AAC3B,YAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,CAAX,CAAV;;AACA,YAAI,CAAC,IAAI,CAAC,OAAN,IAAiB,IAAI,CAAC,MAAL,CAAY,CAAZ,KAAkB,IAAI,CAAC,OAA5C,EAAqD;AACnD,UAAA,KAAK,CAAC,OAAN,IAAiB,CAAjB;AACD,SAFD,MAEO;AACL,UAAA,KAAK,CAAC,QAAN,IAAkB,CAAlB;AACD;AACF;;AAGD,MAAA,IAAI,CAAC,KAAL,GAAa,KAAb;AAEA,aAAO,IAAP;AACD;;;0BAoMY,MAAY;AACvB,UAAI,IAAI,CAAC,MAAL,GAAc,CAAlB,EAAqB,OAAO,CAAP;AACrB,UAAI,IAAI,CAAC,MAAL,IAAe,CAAnB,EAAsB,OAAO,CAAP;AACtB,UAAI,IAAI,CAAC,MAAL,KAAgB,CAApB,EAAuB,OAAO,CAAP;AACvB,UAAI,IAAI,CAAC,MAAL,KAAgB,CAApB,EAAuB,OAAO,CAAP;AACvB,UAAI,IAAI,CAAC,MAAL,KAAgB,CAApB,EAAuB,OAAO,CAAP;AACK,aAAO,EAAP;AAC7B;;;;;;AA5VH,OAAA,CAAA,IAAA,GAAA,IAAA;;AA+VA,SAAS,IAAT,CAAc,IAAd,EAA4B,GAA5B,EAAuC;AACrC,MAAM,KAAK,GAAG,IAAI,GAAJ,EAAd;;AAEA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,MAAzB,EAAiC,CAAC,EAAlC,EAAsC;AACpC,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,IAAI,IAAI,CAAC,MAAL,GAAc,CAAnC,EAAsC,CAAC,EAAvC,EAA2C;AACzC,UAAM,CAAC,GAAG,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAV;AACA,UAAI,CAAC,CAAC,MAAF,IAAY,GAAhB,EAAqB,KAAK,CAAC,GAAN,CAAU,CAAV;AACtB;AACF;;AAED,SAAO,KAAP;AACD;;;;;;;;;;;;;;IC1ZY;;;AAWX,iBACE,OADF,EAEE,QAFF,EAKsC;AAAA,QAFpC,OAEoC,uEAF1B,CAE0B;AAAA,QADpC,QACoC,uEADJ,IACI;AAAA,QAApC,QAAoC,uEAAJ,IAAI;;AAAA;;AAEpC,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,OAAL,GAAe,OAAf;AAEA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,QAAL,GAAgB,IAAhB;AACA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,QAAL,GAAgB,QAAhB;AAEA,QAAM,SAAS,GAAG,KAAK,QAAL,GAAgB,KAAK,OAAvC;;AACA,QAAI,SAAS,GAAG,CAAhB,EAAmB;AACjB,WAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,SAA3B;AACD,KAFD,MAEO;AACL,WAAK,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,SAA9B;AACD;;AAED,SAAK,MAAL,CAAY,SAAZ;AACD;;;;6BAEK;AACJ,aAAO;AAAE,QAAA,QAAQ,EAAE,KAAK,QAAjB;AAA2B,QAAA,OAAO,EAAE,KAAK;AAAzC,OAAP;AACD;;;4BAEI;AAAA;;AACH,UAAI,KAAK,QAAT,EAAmB;AACnB,WAAK,KAAL,GAAa,IAAI,IAAJ,GAAW,OAAX,EAAb;AACA,WAAK,IAAL,GAAY,KAAK,KAAjB;AACA,WAAK,QAAL,GAAgB,WAAW,CAAC;AAAA,eAAM,KAAI,CAAC,MAAL,EAAN;AAAA,OAAD,EAAsB,GAAtB,CAA3B;AACD;;;2BAEG;AACF,UAAI,KAAK,QAAT,EAAmB;AACjB,QAAA,aAAa,CAAC,KAAK,QAAN,CAAb;AACA,aAAK,QAAL,GAAgB,IAAhB;AACD;AACF;;;4BAEI;AACH,UAAI,KAAK,QAAT,EAAmB;AACjB,aAAK,IAAL;AACA,aAAK,KAAL,GAAa,IAAI,IAAJ,GAAW,OAAX,EAAb;AACA,aAAK,OAAL,IAAgB,KAAK,KAAL,GAAa,KAAK,IAAlC;AACA,aAAK,IAAL,GAAY,KAAK,KAAjB;AACD,OALD,MAKO;AACL,aAAK,KAAL;AACD;AACF;;;8BAEM;AACL,aAAO,KAAK,OAAL,IAAgB,KAAK,QAA5B;AACD;;;6BAEK;AACJ,UAAM,GAAG,GAAG,IAAI,IAAJ,GAAW,OAAX,EAAZ;AACA,WAAK,OAAL,IAAgB,GAAG,GAAG,KAAK,IAA3B;AACA,WAAK,IAAL,GAAY,GAAZ;AAEA,UAAI,QAAJ;;AACA,UAAI,KAAK,OAAL,EAAJ,EAAoB;AAClB,aAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,SAA3B;AACA,QAAA,QAAQ,GAAG,KAAK,OAAL,GAAe,KAAK,QAA/B;;AACA,YAAI,KAAK,QAAT,EAAmB;AACjB,eAAK,QAAL;AACA,eAAK,QAAL,GAAgB,IAAhB;AACD;AACF,OAPD,MAOO;AACL,QAAA,QAAQ,GAAG,KAAK,QAAL,GAAgB,KAAK,OAAhC;AACD;;AAED,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,WAA5B;AACA,WAAK,MAAL,CAAY,QAAZ;;AACA,UAAI,MAAM,KAAK,KAAK,OAAL,CAAa,WAAxB,IAAuC,KAAK,QAAhD,EAA0D;AACxD,aAAK,QAAL;AACD;AACF;;;2BAEc,UAAgB;AAC7B,UAAM,OAAO,GAAG,IAAI,CAAC,KAAL,CAAY,QAAQ,IAAI,OAAO,EAAP,GAAY,EAAhB,CAAT,IAAiC,OAAO,EAAxC,CAAX,CAAhB;AACA,UAAM,OAAO,GAAG,UAAG,IAAI,CAAC,KAAL,CAAY,QAAQ,IAAI,OAAO,EAAX,CAAT,GAA2B,IAAtC,CAAH,EAAiD,QAAjD,CAA0D,CAA1D,EAA6D,GAA7D,CAAhB;AACA,WAAK,OAAL,CAAa,WAAb,aAA8B,OAA9B,cAAyC,OAAzC;AACD;;;;;;AAjGH,OAAA,CAAA,KAAA,GAAA,KAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;IAEa;;;AAKX,qBAAY,KAAZ,EAA4B;AAAA;;AAC1B,SAAK,KAAL,GAAa,KAAb;AACD;;;;6BAEK;AAAA;;AACJ,WAAK,SAAL,GAAiB,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAjB;AAEA,UAAM,OAAO,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,SAA9B,CAAhB;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,OAAtB;AAEA,UAAM,IAAI,GAAG,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,eAAW,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,gCAAA;AAAA;AAAA;AAAA;AAAA;AAC1C,kBAAA,IAAA,CAAA,EAAA,CAAG,IAAH,CAAQ,WAAR,CAAoB,KAAK,MAAL,EAApB;AAD0C,gCAE1C,IAAA,CAAA,EAAA,CAAG,IAFuC;AAAA;AAEtB,yBAAM,KAAK,KAAL,CAAW,MAAX,CAAkB;AAAC,oBAAA,MAAM,EAAE;AAAT,mBAAlB,CAAN;;AAFsB;AAAA;;AAAA,8BAElC,WAFkC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,EAAX;AAAA,OAApB,CAAb;AAKA,WAAK,SAAL,CAAe,WAAf,CAA2B,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,KAAK,KAAL,CAAW,YAAjC,EAA+C,KAAK,KAAL,CAAW,KAAX,CAAkB,SAAlB,CAA4B,IAA5B,CAA/C,CAA3B;AAEA,UAAM,IAAI,GAAG,KAAK,KAAL,CAAW,IAAxB;AACA,UAAM,KAAK,GAAG,IAAI,CAAC,KAAL,EAAd;AACA,UAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,GAAqB,IAAI,CAAC,KAAL,CAAW,QAA9C;AACA,UAAM,IAAI,GAAG,KAAK,CAAC,MAAN,CAAa,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAAhB,CAAsB,WAAtB,EAAb,CAAb;AACA,UAAM,OAAO,aAAM,KAAN,cAAe,IAAf,eAAwB,IAAI,CAAC,KAAL,CAAW,KAAK,GAAG,IAAR,GAAe,GAA1B,EAA+B,OAA/B,CAAuC,CAAvC,CAAxB,OAAb;AACA,UAAM,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC,EAAN,EAAU,OAAV,EAAmB,OAAnB,CAA/B;AACA,UAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,MAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,qBAAlB;AACA,WAAK,aAAL,CAAmB,KAAnB,EAA0B,GAA1B,EAA+B,IAA/B;AACA,WAAK,eAAL,CAAqB,KAArB,EAA4B,GAA5B;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,OAApB;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,GAApB;AAEA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,QAAtB;AACA,MAAA,GAAG,CAAC,KAAJ,CAAU,OAAV,GAAoB,OAApB;;AA3BI,iCA6BK,CA7BL;AA8BF,YAAM,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,CAAf,CAAd;AACA,YAAI,KAAK,GAAG,CAAZ;;AACA,2CAAqB,MAAM,CAAC,OAAP,CAAe,KAAK,CAAC,KAArB,CAArB,qCAAkD;AAAA;AAAA,cAAtC,CAAsC;AAAA,cAAnC,CAAmC;;AAChD,cAAI,CAAC,GAAG,CAAR,EAAW,KAAK,IAAI,MAAA,CAAA,IAAA,CAAK,KAAL,CAAW,CAAX,CAAT;AACZ;;AACD,YAAI,CAAC,KAAL,EAAY;AAEZ,YAAM,OAAO,aAAM,KAAN,cAAe,KAAK,CAAC,IAAN,CAAW,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA3B,CAAf,eAAqD,IAAI,CAAC,KAAL,CAAW,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA3B,CAAR,GAA4C,GAAvD,EAA4D,OAA5D,CAAoE,CAApE,CAArD,OAAb;AACA,YAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,qBAAlB;AACA,QAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,MAAlB;AACA,YAAM,MAAM,GAAG,eAAe,CAAC,KAAK,CAAC,IAAP,EAAa,OAAb,EAAsB,OAAtB,EAA+B,YAAK;AAChE,cAAI,GAAG,CAAC,SAAJ,CAAc,QAAd,CAAuB,MAAvB,CAAJ,EAAoC;AAClC,YAAA,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,MAArB;;AACA,gBAAM,KAAI,GAAG,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,KAAd,EAAqB,QAAA,CAAA,MAAA,CAAO,IAA5B,EAAkC,QAAA,CAAA,MAAA,CAAO,IAAzC,EAA+C,QAAA,CAAA,MAAA,CAAO,KAAtD,CAAb;;AACA,gBAAM,CAAC,GAAG,KAAI,CAAC,KAAL,EAAV;;AACA,YAAA,KAAI,CAAC,aAAL,CAAmB,CAAnB,EAAsB,GAAtB;;AACA,YAAA,KAAI,CAAC,eAAL,CAAqB,CAArB,EAAwB,GAAxB;AACD;AACF,SAR6B,CAA9B;AASA,QAAA,OAAO,CAAC,WAAR,CAAoB,MAApB;AACA,QAAA,OAAO,CAAC,WAAR,CAAoB,GAApB;AAnDE;;AA6BJ,WAAK,IAAI,CAAC,GAAG,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,MAAf,GAAwB,CAArC,EAAwC,CAAC,IAAI,CAA7C,EAAgD,CAAC,EAAjD,EAAqD;AAAA,yBAA5C,CAA4C;;AAAA,iCAMvC;AAiBb;;AAED,WAAK,SAAL,CAAe,WAAf,CAA2B,OAA3B;AAEA,aAAO,KAAK,SAAZ;AACD;;;6BAEK;AACJ,aAAO,KAAK,SAAZ;AACD;;;kCAEa,OAAkC,KAAkC;AAAA,UAAhB,QAAgB,uEAAL,KAAK;AAChF,UAAM,CAAC,GAAG,KAAK,CAAC,QAAhB;AACA,UAAM,OAAO,cAAO,CAAC,CAAC,KAAT,eAAmB,MAAM,CAAC,IAAP,CAAY,CAAC,CAAC,QAAd,EAAwB,MAA3C,cAAqD,CAAC,CAAC,QAAvD,cAAmE,CAAC,CAAC,QAArE,eAAkF,CAAC,CAAC,OAApF,cAA+F,CAAC,CAAC,KAAjG,MAAb;AAEA,UAAM,MAAM,GAAG,eAAe,CAAC,QAAD,EAAW,OAAX,EAAoB,OAApB,CAA9B;AAEA,UAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,qBAApB;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,SAApB;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,QAApB;AATgF;AAAA;AAAA;;AAAA;AAWhF,6BAAqD,KAAK,CAAC,MAA3D,8HAAmE;AAAA;AAAA,cAAvD,IAAuD,eAAvD,IAAuD;AAAA,cAAjD,KAAiD,eAAjD,KAAiD;AAAA,cAA1C,QAA0C,eAA1C,QAA0C;AAAA,cAAhC,IAAgC,eAAhC,IAAgC;AAAA,cAA1B,OAA0B,eAA1B,OAA0B;AACjE,cAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;AACA,cAAI,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA5B,EAAmC,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;AACnC,cAAI,OAAJ,EAAa,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,OAAjB;AACb,cAAI,QAAJ,EAAc,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,UAAjB;AAEd,cAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,cAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;AACA,UAAA,CAAC,CAAC,WAAF,GAAgB,IAAhB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,CAAf;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,cAAI,IAAJ,EAAU,EAAE,CAAC,WAAH,GAAiB,IAAjB;AACV,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AACD;AA5B+E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8BhF,UAAI,QAAJ,EAAc;AACZ,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,QAAA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,OAAtB;AACD;;AAED,MAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,KAAhB;AACD;;;oCAEe,OAAkC,KAAkC;AAAA,UAAhB,QAAgB,uEAAL,KAAK;AAClF,UAAM,GAAG,GAAG,KAAK,CAAC,MAAlB;AACA,UAAM,OAAO,aAAM,GAAG,CAAC,CAAV,cAAe,GAAG,CAAC,CAAnB,cAAwB,GAAG,CAAC,CAA5B,cAAiC,GAAG,CAAC,CAArC,eAA2C,GAAG,CAAC,CAA/C,MAAb;AAEA,UAAM,MAAM,GAAG,eAAe,CAAC,UAAD,EAAa,OAAb,EAAsB,OAAtB,CAA9B;AACA,UAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,qBAApB;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,SAApB;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,UAApB;AARkF;AAAA;AAAA;;AAAA;AAUlF,8BAAiD,KAAK,CAAC,SAAvD,mIAAkE;AAAA;AAAA,cAAtD,IAAsD,gBAAtD,IAAsD;AAAA,cAAhD,KAAgD,gBAAhD,KAAgD;AAAA,cAAzC,IAAyC,gBAAzC,IAAyC;AAAA,cAAnC,OAAmC,gBAAnC,OAAmC;AAAA,cAA1B,IAA0B,gBAA1B,IAA0B;AAChE,cAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;AACA,cAAI,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA5B,EAAmC,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;AAEnC,cAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,cAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;;AACA,cAAI,IAAJ,EAAU;AACR,gBAAM,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAjB;AACA,YAAA,QAAQ,CAAC,WAAT,GAAuB,IAAvB;AACA,gBAAM,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAnB;AACA,YAAA,UAAU,CAAC,SAAX,CAAqB,GAArB,CAAyB,WAAzB;AACA,YAAA,UAAU,CAAC,WAAX,GAAyB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAhB,CAAzB;AACA,YAAA,CAAC,CAAC,WAAF,CAAc,QAAd;AACA,YAAA,CAAC,CAAC,WAAF,CAAc,UAAd;AACD,WARD,MAQO;AACL,gBAAI,OAAJ,EAAa,CAAC,CAAC,SAAF,CAAY,GAAZ,CAAgB,WAAhB;AACb,YAAA,CAAC,CAAC,WAAF,GAAgB,IAAhB;AACD;;AACD,UAAA,EAAE,CAAC,WAAH,CAAe,CAAf;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,UAAA,EAAE,CAAC,WAAH,GAAiB,IAAjB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AACD;AApCiF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAsClF,UAAI,QAAJ,EAAc;AACZ,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,QAAA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,OAAtB;AACD;;AAED,MAAA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,KAAhB;AACD;;;;;;AA5JH,OAAA,CAAA,SAAA,GAAA,SAAA;;AA+JA,SAAS,eAAT,CAAyB,KAAzB,EAAwC,OAAxC,EAAyD,OAAzD,EAA0E,EAA1E,EAAyF;AACvF,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,EAAA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;AACA,EAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,aAArB;AAEA,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AAEA,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAlB;AACA,EAAA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,mBAAxB;AACA,EAAA,SAAS,CAAC,WAAV,GAAwB,KAAxB;AAEA,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAApB;AACA,EAAA,WAAW,CAAC,SAAZ,CAAsB,GAAtB,CAA0B,qBAA1B;AACA,EAAA,WAAW,CAAC,WAAZ,GAA0B,OAA1B;AAEA,EAAA,GAAG,CAAC,WAAJ,CAAgB,SAAhB;AACA,EAAA,GAAG,CAAC,WAAJ,CAAgB,WAAhB;AACA,EAAA,MAAM,CAAC,WAAP,CAAmB,GAAnB;AAEA,EAAA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,YAAK;AACpC,IAAA,MAAM,CAAC,SAAP,CAAiB,MAAjB,CAAwB,QAAxB;AACA,QAAM,OAAO,GAAG,MAAM,CAAC,kBAAvB;;AACA,QAAI,OAAO,CAAC,KAAR,CAAc,OAAd,KAA0B,OAA9B,EAAuC;AACrC,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;AACD,KAFD,MAEO;AACL,UAAI,EAAJ,EAAQ,EAAE;AACV,MAAA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,OAAxB;AACD;AACF,GATD;AAWA,SAAO,MAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnMD,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,IAAM,QAAQ,GAAG,MAAM,IAAvB;;IASa;;;AAgBX,qBAAY,IAAZ,EAA4B;AAAA;;AAC1B,SAAK,IAAL,GAAY,IAAI,GAAG,IAAI,CAAC,IAAR,GAAe,EAA/B;AACA,SAAK,IAAL,GAAY,IAAI,GAAG,IAAI,CAAC,IAAR,GAAe,KAA/B;AACA,SAAK,IAAL,GAAY,IAAI,GAAG,IAAI,CAAC,IAAR,GAAe,SAA/B;;AAH0B,eAID,IAAI,GAC3B,KAAK,WAAL,CAAiB,IAAI,CAAC,KAAL,CAAW,QAA5B,EAAsC,IAAI,CAAC,KAAL,CAAW,OAAjD,CAD2B,GAE3B,KAAK,WAAL,EANwB;AAAA,QAInB,OAJmB,QAInB,OAJmB;AAAA,QAIV,KAJU,QAIV,KAJU;;AAO1B,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,YAAL,GAAoB,OAApB;AACD;;;;6BAEK;AACJ,aAAO;AACL,QAAA,IAAI,EAAE,KAAK,IADN;AAEL,QAAA,IAAI,EAAE,KAAK,IAFN;AAGL,QAAA,KAAK,EAAE,KAAK,KAAL,CAAW,MAAX,EAHF;AAIL,QAAA,IAAI,EAAE,KAAK,IAAL,KAAc,YAAY,KAAK,IAAjB,GAAwB,KAAK,IAAL,CAAU,MAAV,EAAxB,GAA6C,KAAK,IAAhE;AAJD,OAAP;AAMD;;;6BAEuE;AAAA,UAA3D,IAA2D,uEAAF,EAAE;;;;;;;;;;;;;AACtE,uBAAM,OAAO,CAAC,GAAR,CAAY,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAf,EAAqB,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAd,EAArB,EAA2C,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,KAAd,EAA3C,EAAkE,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,OAAhF,CAAZ,CAAN;;;oBAEK,KAAK;;;;;AACR,qBAAK,MAAL,GAAc,IAAI,GAAJ,EAAd;;;;;;AACA,iCAAgB,QAAA,CAAA,MAAA,CAAO,OAAvB;AAAW,kBAAA,CAAX;AAAgC,uBAAK,MAAL,CAAY,GAAZ,CAAgB,CAAC,CAAC,IAAlB;AAAhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBAGE,CAAC,KAAK,IAAN,IAAc,CAAC,IAAI,CAAC;;;;;qBAClB,KAAK;;;;;AACP,qBAAK,KAAL,CAAW,IAAX;;AACA,oBAAI,EAAE,YAAY,KAAK,IAAnB,CAAJ,EAA8B;AAC5B,uBAAK,IAAL,GAAY,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,KAAK,IAAnB,EAAyB,QAAA,CAAA,MAAA,CAAO,IAAhC,EAAsC,QAAA,CAAA,MAAA,CAAO,IAA7C,EAAmD,QAAA,CAAA,MAAA,CAAO,KAA1D,CAAZ;AACD;;AACD,qBAAK,MAAL,CAAY,GAAZ,CAAgB,KAAK,IAAL,CAAU,EAA1B;;qBACI,MAAM,CAAC,MAAP,CAAc,KAAK,IAAL,CAAU,MAAxB,EAAgC,MAAhC,CAAuC,UAAA,CAAC;AAAA,yBAAI,CAAC,GAAG,CAAR;AAAA,iBAAxC,EAAmD;;;;;AACrD,qBAAK,WAAL;AACA,gBAAA,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,IAAf,CAAoB,KAAK,IAAL,CAAU,MAAV,EAApB;;AACA,uBAAM,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,GAAb,CAAiB,SAAjB,EAA4B,QAAA,CAAA,MAAA,CAAO,OAAnC,CAAN;;;AAKE,gBAAA,SAAS,IAAI,QAAA,CAAA,MAAJ;;;sBACR,CAAC,IAAD,IAAS,CAAC,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,QAAjB,EAA2B;;;;;AAC1C,gBAAA,MAAM,CAAC,IAAP,GAAc,QAAA,CAAA,MAAA,CAAO,IAArB;AACM,gBAAA,KAAK,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,QAArB,EAA+B,MAAM,CAAC,IAAtC;;sBACP,KAAK,MAAL,CAAY,GAAZ,CAAgB,EAAhB,KAAuB,CAAC,IAAI,CAAC;;;;;AAC/B,gBAAA,QAAA,CAAA,MAAA,CAAO,IAAP;;;;AAGF,gBAAA,IAAI,GAAG,IAAI,MAAA,CAAA,IAAJ,CAAS,QAAA,CAAA,MAAA,CAAO,IAAhB,EAAsB,QAAA,CAAA,MAAA,CAAO,IAA7B,EAAmC,QAAA,CAAA,MAAA,CAAO,KAA1C,EAAiD,MAAjD,EAAyD,QAAA,CAAA,MAAA,CAAO,QAAhE,CAAP;;;;;AAEF,qBAAK,IAAL,GAAY,IAAZ;oCAEyB,KAAK,WAAL,IAAlB,4BAAA,SAAS,0BAAA;AAChB,qBAAK,KAAL,GAAa,KAAb;AACA,qBAAK,YAAL,GAAoB,OAApB;AAEA,qBAAK,IAAL,GAAY,EAAZ;AACA,qBAAK,IAAL,GAAY,KAAZ;;;;;AACK,oBAAI,EAAE,YAAY,KAAK,IAAnB,CAAJ,EAA8B;AACnC,uBAAK,IAAL,GAAY,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,KAAK,IAAnB,EAAyB,QAAA,CAAA,MAAA,CAAO,IAAhC,EAAsC,QAAA,CAAA,MAAA,CAAO,IAA7C,EAAmD,QAAA,CAAA,MAAA,CAAO,KAA1D,CAAZ;AACD;;;AAED,qBAAK,SAAL,GAAiB,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAjB;AAEM,gBAAA,OAAO,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,yBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,MAAd,CAAN;AAAA,iBAApB;AACb,gBAAA,IAAI,CAAC,gBAAL,CAAsB,YAAtB,EAAoC;AAAA,yBAAM,KAAI,CAAC,OAAL,EAAN;AAAA,iBAApC;AAEA,qBAAK,KAAL,GAAa,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,OAA9B,CAAb;AACA,qBAAK,KAAL,CAAW,gBAAX,CAA4B,SAA5B,EAAuC,YAAK;AAC1C,sBAAM,IAAI,GAAG,IAAI,OAAA,CAAA,SAAJ,CAAc,KAAd,CAAb;AACA,kBAAA,IAAA,CAAA,EAAA,CAAG,IAAH,CAAQ,WAAR,CAAoB,KAAI,CAAC,MAAL,CAAY,OAAZ,CAApB;AACA,kBAAA,IAAA,CAAA,EAAA,CAAG,IAAH,CAAQ,WAAR,CAAoB,IAAI,CAAC,MAAL,EAApB;AACD,iBAJD;AAKA,qBAAK,KAAL,CAAW,gBAAX,CAA4B,YAA5B,EAA0C;AAAA,yBAAM,KAAI,CAAC,WAAL,EAAN;AAAA,iBAA1C;AACA,qBAAK,KAAL,CAAW,gBAAX,CAA4B,eAA5B,EAA6C;AAAA,yBAAM,KAAI,CAAC,aAAL,EAAN;AAAA,iBAA7C;AACA,qBAAK,YAAL;AAEA,qBAAK,SAAL,CAAe,WAAf,CAA2B,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,KAAK,YAA3B,EAAyC,KAAK,KAA9C,CAA3B;AAEA,qBAAK,IAAL,GAAY,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAZ;AACA,qBAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,IAAhC;AAEA,qBAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,WAAL,EAA3B;AAEA,qBAAK,IAAL,GAAY,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAZ;AACA,qBAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,MAAxB;;AACA,oBAAI,EAAG,kBAAkB,MAAnB,IACH,SAAS,CAAC,cAAV,GAA2B,CADxB,IAEH,SAAS,CAAC,gBAAV,GAA6B,CAF5B,CAAJ,EAEqC;AACnC,uBAAK,IAAL,CAAU,eAAV,GAA4B,MAA5B;AACD;;AACD,qBAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,IAAhC;AACA,qBAAK,IAAL,GAAY,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAZ;AACA,qBAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,YAAxB;AACA,qBAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,IAAhC;AAEA,oBAAI,IAAI,CAAC,MAAL,KAAgB,QAApB,EAA8B,KAAK,KAAL,CAAW,KAAX;AACxB,gBAAA,kBAAW,KAAK,IAAL,CAAU;;AAC3B,oBAAI,QAAQ,CAAC,QAAT,CAAkB,IAAlB,KAA2B,IAA/B,EAAqC;AACnC,kBAAA,MAAM,CAAC,OAAP,CAAe,YAAf,CAA4B,IAA5B,EAAkC,EAAlC,EAAsC,IAAtC;AACD;;iDAEM,KAAK;;;;;;;;;AACb;;;kCAEU;AAAA;;AACT,UAAM,IAAI,GAAG,KAAK,IAAlB;AACA,UAAM,OAAO,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,KAA9B,CAAhB;AACA,UAAM,KAAK,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,OAAvB,EAAgC,OAAhC,CAAd;AACA,UAAI,IAAI,CAAC,IAAL,GAAY,CAAhB,EAAmB,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,KAApB;AAEnB,WAAK,GAAL,GAAW,IAAI,GAAJ,EAAX;AACA,UAAM,MAAM,GAAG,IAAI,QAAA,CAAA,MAAJ,CAAW,IAAI,CAAC,IAAhB,CAAf;;AACA,WAAK,IAAI,GAAG,GAAG,CAAf,EAAkB,GAAG,GAAG,IAAI,CAAC,IAA7B,EAAmC,GAAG,EAAtC,EAA0C;AACxC,YAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;;AACA,aAAK,IAAI,GAAG,GAAG,CAAf,EAAkB,GAAG,GAAG,IAAI,CAAC,IAA7B,EAAmC,GAAG,EAAtC,EAA0C;AACxC,cAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;AACA,UAAA,EAAE,CAAC,WAAH,GAAiB,IAAI,CAAC,KAAL,CAAW,GAAG,GAAG,IAAI,CAAC,IAAX,GAAkB,GAA7B,CAAjB;AACA,cAAI,EAAE,CAAC,WAAH,KAAmB,IAAvB,EAA6B,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,IAAjB;AAC7B,cAAI,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,QAAhB,CAAyB,EAAE,CAAC,WAA5B,CAAJ,EAA8C,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,WAAjB;AAC9C,UAAA,EAAE,CAAC,SAAH,CAAa,GAAb,iBAA0B,KAAK,MAAM,CAAC,IAAP,CAAY,CAAZ,EAAe,CAAf,CAA/B;AACA,UAAA,EAAE,CAAC,YAAH,CAAgB,QAAhB,EAA0B,MAAM,CAAC,GAAD,CAAhC;AACA,UAAA,EAAE,CAAC,YAAH,CAAgB,QAAhB,EAA0B,MAAM,CAAC,GAAD,CAAhC;AAEA,cAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,QAAlB;AACA,UAAA,GAAG,CAAC,YAAJ,CAAiB,QAAjB,EAA2B,MAAM,CAAC,GAAD,CAAjC;AACA,UAAA,GAAG,CAAC,YAAJ,CAAiB,QAAjB,EAA2B,MAAM,CAAC,GAAD,CAAjC;AAEA,UAAA,EAAE,CAAC,WAAH,CAAe,GAAf;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AACA,eAAK,GAAL,CAAS,GAAT,CAAa,EAAb;AACD;;AACD,QAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AACD;;AAED,UAAI,OAAJ;;AACA,UAAM,QAAQ,GAAG,SAAX,QAAW,GAAK;AACpB,YAAI,CAAC,OAAL,EAAc;AADM;AAAA;AAAA;;AAAA;AAEpB,gCAAiB,OAAjB,mIAA0B;AAAA,gBAAf,GAAe;;AACxB,YAAA,GAAE,CAAC,SAAH,CAAa,MAAb,CAAoB,UAApB;AACD;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKrB,OALD;;AAOA,UAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,CAAD,EAAkB;AACtC,YAAM,KAAK,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,CAAd;AACA,YAAM,IAAI,GAAG,QAAQ,CAAC,gBAAT,CAA0B,KAAK,CAAC,OAAhC,EAAyC,KAAK,CAAC,OAA/C,CAAb;;AACA,YAAI,IAAI,IAAI,IAAI,CAAC,OAAL,CAAa,SAAb,CAAZ,EAAqC;AACnC,cAAM,IAAE,GAAG,IAAI,CAAC,UAAhB;;AACA,UAAA,IAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,UAAjB;;AACA,cAAI,CAAC,OAAO,CAAC,GAAR,CAAY,IAAZ,CAAL,EAAsB;AACpB,YAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,YAAA,MAAI,CAAC,IAAL,CAAU,WAAV,IAAyB,IAAE,CAAC,WAA5B;AACD;AACF;AACF,OAXD;;AAaA,MAAA,KAAK,CAAC,gBAAN,CAAuB,YAAvB,EAAqC,UAAA,CAAC,EAAG;AACvC,QAAA,MAAI,CAAC,KAAL;;AACA,QAAA,QAAQ;AACR,QAAA,OAAO,GAAG,IAAI,GAAJ,EAAV;AAEA,QAAA,aAAa,CAAC,CAAD,CAAb;AACD,OAND;AAOA,MAAA,KAAK,CAAC,gBAAN,CAAuB,UAAvB,EAAmC,YAAK;AACtC,QAAA,QAAQ;;AACR,QAAA,MAAI,CAAC,IAAL;AACD,OAHD;AAIA,MAAA,KAAK,CAAC,gBAAN,CAAuB,WAAvB,EAAoC,aAApC;AAEA,MAAA,OAAO,CAAC,WAAR,CAAoB,KAApB;AACA,aAAO,OAAP;AACD;;;kCAEU;AACT,MAAA,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,KAAK,IAAnB;AACD;;;2BAEM,MAAY;AACjB,UAAI,IAAI,KAAK,OAAT,IAAoB,IAAI,KAAK,QAAjC,EAA2C,KAAK,KAAL,CAAW,KAAX;AAC3C,aAAO,KAAK,SAAZ;AACD;;;4BAEa,MAA+C;;;;;;;;AAC3D,gBAAA,IAAA,CAAA,EAAA,CAAG,OAAH;;AACA,uBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,EAAuB,OAAvB,CAAN;;;;AACA,uBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,EAAuB,IAAvB,CAAN;;;;;;;;;AACD;;;2BAEG;AAAA;;AACF,UAAM,IAAI,GAAG,KAAK,IAAlB;AACA,UAAI,CAAC,GAAG,CAAC,KAAK,IAAL,CAAU,WAAV,IAAyB,EAA1B,EAA8B,WAA9B,EAAR;;AACA,UAAI,CAAC,CAAC,MAAF,GAAW,CAAX,IAAgB,MAAA,CAAA,QAAA,CAAS,QAAT,CAAkB,CAAlB,CAApB,EAA0C;AACxC,QAAA,CAAC,aAAM,KAAK,IAAX,SAAkB,CAAlB,CAAD;AACA,aAAK,IAAL,CAAU,WAAV,GAAwB,CAAxB;AACD;;AACD,UAAM,KAAK,GAAG,IAAI,CAAC,IAAL,CAAU,CAAV,CAAd;AACA,WAAK,IAAL,GAAY,CAAZ;AACA,MAAA,IAAA,CAAA,EAAA,CAAG,OAAH;AAEA,UAAM,IAAI,GAAG,IAAI,CAAC,QAAL,CAAc,OAAd,KAA0B,MAAvC;AACA,WAAK,IAAL,GAAY,IAAZ;;AACA,UAAI,CAAC,IAAD,IAAS,KAAb,EAAoB;AAClB,aAAK,YAAL;AACA,aAAK,IAAL,CAAU,WAAV,GAAwB,MAAA,CAAA,MAAA,CAAO,CAAP,EAAU,QAAA,CAAA,MAAA,CAAO,IAAjB,CAAxB;AACD,OAHD,MAGO;AACL,YAAM,QAAQ,GAAG,KAAK,IAAL,CAAU,WAAV,IAAyB,SAA1C;AACA,YAAI,CAAC,IAAD,IAAS,IAAI,CAAC,MAAL,CAAY,CAAZ,IAAiB,CAA9B,EAAiC,KAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,OAAxB;AACjC,aAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,MAAxB;;AACA,YAAM,QAAQ,GAAG,SAAX,QAAW,GAAK;AACpB,UAAA,MAAI,CAAC,KAAL,CAAW,QAAX;;AACA,UAAA,MAAI,CAAC,IAAL,CAAU,mBAAV,CAA8B,cAA9B,EAA8C,QAA9C;AACD,SAHD;;AAIA,aAAK,IAAL,CAAU,gBAAV,CAA2B,cAA3B,EAA2C,QAA3C;AACD;AACF;;;mCAEW;AACV,UAAM,IAAI,GAAG,KAAK,IAAlB;;AACA,UAAI,IAAI,CAAC,QAAL,CAAc,OAAd,KAA0B,MAA9B,EAAsC;AACpC,aAAK,KAAL,CAAW,WAAX,GAAyB,GAAzB;AACA;AACD;;AAED,UAAI,IAAI,CAAC,QAAL,CAAc,OAAd,KAA0B,MAA9B,EAAsC;AACpC,YAAM,KAAK,GAAG,IAAI,CAAC,KAAL,EAAd;AACA,YAAM,CAAC,GAAG,KAAK,CAAC,QAAhB;AACA,YAAM,OAAO,cAAO,CAAC,CAAC,KAAT,eAAmB,MAAM,CAAC,IAAP,CAAY,CAAC,CAAC,QAAd,EAAwB,MAA3C,cAAqD,CAAC,CAAC,QAAvD,cAAmE,CAAC,CAAC,QAArE,CAAb;AACA,YAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,GAAqB,IAAI,CAAC,KAAL,CAAW,QAA9C;AACA,YAAM,IAAI,GAAG,KAAK,CAAC,MAAN,CAAa,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAAhB,CAAsB,WAAtB,EAAb,CAAb;AACA,aAAK,IAAL,CAAU,WAAV,aAA2B,OAA3B,gBAAwC,KAAxC,cAAiD,IAAjD,eAA0D,IAAI,CAAC,KAAL,CAAW,KAAK,GAAG,IAAR,GAAe,GAA1B,EAA+B,OAA/B,CAAuC,CAAvC,CAA1D;AACD;;AAED,UAAM,CAAC,GAAG,IAAI,CAAC,KAAf;AACA,WAAK,KAAL,CAAW,WAAX,GAAyB,CAAC,CAAC,QAAF,aAAgB,CAAC,CAAC,OAAlB,gBAA+B,CAAC,CAAC,QAAjC,cAAiD,CAAC,CAAC,OAAnD,CAAzB;AACD;;;0BAEK,GAAU;AACd,UAAI,CAAC,IAAI,CAAC,KAAK,KAAK,IAAL,CAAU,WAAzB,EAAsC;AACtC,WAAK,IAAL,CAAU,WAAV,GAAwB,EAAxB;AACA,WAAK,IAAL,CAAU,SAAV,CAAoB,MAApB,CAA2B,OAA3B;AACA,WAAK,IAAL,CAAU,SAAV,CAAoB,MAApB,CAA2B,MAA3B;AACA,WAAK,IAAL,CAAU,WAAV,GAAwB,EAAxB;AACA,WAAK,IAAL,GAAY,KAAZ;AACD;;;kCAE2C;AAAA;;AAAA,UAAhC,QAAgC,uEAArB,QAAqB;AAAA,UAAX,OAAW,uEAAD,CAAC;AAC1C,UAAM,OAAO,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,OAA9B,CAAhB;AACA,MAAA,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC;AAAA,eAAM,MAAI,CAAC,KAAL,CAAW,KAAX,EAAN;AAAA,OAAlC;AACA,aAAO;AAAC,QAAA,OAAO,EAAP,OAAD;AAAU,QAAA,KAAK,EAAE,IAAI,OAAA,CAAA,KAAJ,CAAU,OAAV,EAAmB,QAAnB,EAA6B,OAA7B,EAAsC,YAAK;AACjE,cAAI,MAAI,CAAC,IAAL,IAAa,CAAC,MAAI,CAAC,IAAL,CAAU,OAA5B,EAAqC;AACnC,YAAA,MAAI,CAAC,IAAL,CAAU,OAAV,GAAoB,CAAC,IAAI,IAAJ,EAArB;AACD;AACF,SAJuB,EAIrB;AAAA,iBAAM,IAAA,CAAA,EAAA,CAAG,OAAH,EAAN;AAAA,SAJqB;AAAjB,OAAP;AAKD;;;kCAEU;AACT,UAAI,CAAC,QAAA,CAAA,MAAA,CAAO,KAAZ,EAAmB;AAEnB,UAAM,IAAI,GAAG,KAAK,IAAlB;AACA,UAAM,MAAM,GAAG,IAAI,GAAJ,EAAf;;AACA,WAAK,IAAM,CAAX,IAAgB,IAAI,CAAC,MAArB,EAA6B;AAC3B,YAAI,IAAI,CAAC,MAAL,CAAY,CAAZ,IAAiB,CAArB,EAAwB,MAAM,CAAC,GAAP,CAAW,CAAX;AACzB;;AACD,UAAI,CAAC,MAAM,CAAC,IAAZ,EAAkB;AAElB,UAAI,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,MAAb,IAAuB,QAAA,CAAA,MAAA,CAAO,KAAlC,EAAyC,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,KAAb;AACzC,MAAA,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,IAAb,CAAkB,CAAC,IAAI,CAAC,QAAN,EAAgB,MAAhB,CAAlB;AACD;;;kCAEU;AACT,UAAM,IAAI,GAAG,KAAK,IAAlB;AACA,UAAM,IAAI,GAAG,IAAI,CAAC,IAAlB;AACA,UAAM,OAAO,GAAG,EAAhB;;AACA,WAAK,IAAI,GAAG,GAAG,CAAf,EAAkB,GAAG,GAAG,IAAxB,EAA8B,GAAG,EAAjC,EAAqC;AACnC,YAAM,CAAC,GAAG,EAAV;;AACA,aAAK,IAAI,GAAG,GAAG,CAAf,EAAkB,GAAG,GAAG,IAAxB,EAA8B,GAAG,EAAjC,EAAqC;AACnC,UAAA,CAAC,CAAC,IAAF,CAAO,CAAP;AACD;;AACD,QAAA,OAAO,CAAC,IAAR,CAAa,CAAb;AACD;;AACD,UAAI,KAAK,GAAG,CAAZ;;AACA,WAAK,IAAM,IAAX,IAAmB,IAAI,CAAC,QAAxB,EAAkC;AAChC,YAAI,IAAI,CAAC,MAAL,CAAY,IAAZ,CAAJ,EAAuB;AACvB,YAAM,KAAK,GAAG,MAAA,CAAA,IAAA,CAAK,KAAL,CAAW,IAAX,CAAd;AACA,QAAA,KAAK,IAAI,KAAT;AAHgC;AAAA;AAAA;;AAAA;AAIhC,gCAAgB,IAAI,CAAC,QAAL,CAAc,IAAd,CAAhB,mIAAqC;AAAA,gBAA1B,CAA0B;AACnC,YAAA,OAAO,CAAC,CAAC,CAAC,CAAD,CAAF,CAAP,CAAc,CAAC,CAAC,CAAD,CAAf,KAAuB,KAAvB;AACD;AAN+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOjC;;AAnBQ;AAAA;AAAA;;AAAA;AAqBT,8BAAiB,KAAK,GAAtB,mIAA2B;AAAA,cAAhB,EAAgB;AACzB,cAAM,CAAC,GAAG,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,OAAH,CAAW,CAAZ,CAAP,CAAP,CAA8B,MAAM,CAAC,EAAE,CAAC,OAAH,CAAW,CAAZ,CAApC,IAAsD,KAAhE;AACA,UAAA,EAAE,CAAC,KAAH,CAAS,eAAT,0BAA2C,CAA3C;AACD;AAxBQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBV;;;oCAEY;AAAA;AAAA;AAAA;;AAAA;AACX,8BAAiB,KAAK,GAAtB,mIAA2B;AAAA,cAAhB,EAAgB;AACzB,UAAA,EAAE,CAAC,KAAH,CAAS,cAAT,CAAwB,kBAAxB;AACD;AAHU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIZ;;;8BAEe,GAAgB;;;;;;;;;AAC9B,oBAAI,KAAK,IAAT,EAAe,KAAK,KAAL;AACf,gBAAA,IAAA,CAAA,EAAA,CAAG,oBAAH,CAAwB,KAAK,IAA7B;AACM,gBAAA,MAAM,CAAC,CAAC;;sBACV,GAAG,KAAK,EAAR,IAAc,GAAG,KAAK;;;;;AACxB,gBAAA,CAAC,CAAC,cAAF;AACA,qBAAK,IAAL;AACA,gBAAA,IAAA,CAAA,EAAA,CAAG,oBAAH,CAAwB,KAAK,IAA7B;;;;;sBACS,GAAG,KAAK;;;;;;AACjB,uBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,CAAN;;;;;;;AACK,oBAAI,CAAC,GAAG,GAAG,EAAN,IAAY,GAAG,GAAG,EAAnB,KAA0B,GAAG,KAAK,CAAtC,EAAyC;AAC9C,kBAAA,CAAC,CAAC,cAAF;AACD;;;;;;;;;AACF;;;;;;AA/UH,OAAA,CAAA,SAAA,GAAA,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;IAEa;;;AAUX,sBAAY,IAAZ,EAAiC;AAAA;;AAJzB,SAAA,IAAA,GAA2B,IAA3B;AACA,SAAA,KAAA,GAA4B,IAA5B;AACA,SAAA,QAAA,GAA+B,IAA/B;AAGN,SAAK,IAAL,GAAY,IAAI,GAAG,IAAI,CAAC,IAAR,GAAe,EAA/B;AACD;;;;6BAEK;AACJ,aAAO;AAAC,QAAA,IAAI,EAAE,KAAK;AAAZ,OAAP;AACD;;;2BAEY,MAAa;;;;;;;;;;;AACxB,uBAAM,OAAO,CAAC,GAAR,CAAY,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAf,EAAqB,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,KAAd,EAArB,CAAZ,CAAN;;;AAEA,oBAAI,IAAJ,EAAU,KAAK,IAAL,GAAY,IAAZ;AAEV,qBAAK,MAAL,GAAc,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,QAA9B,CAAd;AACA,qBAAK,MAAL,GAAc,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,QAA9B,CAAd;AACA,qBAAK,MAAL,CAAY,SAAZ,CAAsB,GAAtB,CAA0B,MAA1B;AACA,qBAAK,MAAL,CAAY,eAAZ,GAA8B,MAA9B;AACA,qBAAK,MAAL,CAAY,WAAZ,GAA0B,KAAK,IAA/B;AACA,qBAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,MAA7B;AAEA,qBAAK,MAAL,CAAY,gBAAZ,CAA6B,OAA7B,EAAsC;AAAA,yBAAM,KAAI,CAAC,KAAL,CAAW,KAAI,CAAC,MAAL,CAAY,WAAZ,IAA2B,EAAtC,CAAN;AAAA,iBAAtC;AACA,qBAAK,MAAL;iDAEO,KAAK;;;;;;;;;AACb;;;kCAEU;AACT,MAAA,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,KAAK,MAAnB;AACD;;;0BAEK,GAAS;AACb,WAAK,MAAL,CAAY,WAAZ,GAA0B,CAA1B;AACA,WAAK,IAAL,GAAY,CAAC,CAAC,WAAF,EAAZ;AACA,WAAK,MAAL;AACA,MAAA,IAAA,CAAA,EAAA,CAAG,OAAH;AACD;;;6BAEK;AACJ,WAAK,IAAL,GAAY,IAAZ;AACA,WAAK,KAAL,GAAa,IAAb;AACA,WAAK,QAAL,GAAgB,IAAhB;AACA,aAAO,KAAK,MAAZ;AACD;;;6BAEK;AACJ,UAAM,GAAG,GAAG,QAAA,CAAA,MAAA,CAAO,IAAP,CAAY,KAAK,IAAjB,CAAZ;;AACA,UAAI,GAAJ,EAAS;AACP,YAAM,IAAI,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,YAA9B,CAAb;AACA,QAAA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,YAAnB;AACA,QAAA,IAAI,CAAC,WAAL,GAAmB,MAAA,CAAA,MAAA,CAAO,KAAK,IAAZ,EAAkB,QAAA,CAAA,MAAA,CAAO,IAAzB,CAAnB;;AACA,YAAK,GAAG,CAAC,IAAJ,IAAY,CAAC,GAAG,CAAC,IAAJ,CAAS,QAAT,CAAkB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,CAA5B,CAAlB,CAAd,IAAoE,KAAK,IAAL,CAAU,MAAV,GAAmB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,GAA3G,EAAgH;AAC9G,eAAK,MAAL,CAAY,SAAZ,CAAsB,GAAtB,CAA0B,MAA1B;AACD,SAFD,MAEO;AACL,eAAK,MAAL,CAAY,SAAZ,CAAsB,MAAtB,CAA6B,MAA7B;AACD;;AAED,YAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,EAAD,EAA0B,KAA1B,EAAyC,IAAzC,EAAyD;AACxE,cAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,cAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;AACA,UAAA,CAAC,CAAC,WAAF,GAAgB,KAAhB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,CAAf;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,UAAA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,OAAjB;AACA,UAAA,EAAE,CAAC,WAAH,GAAiB,IAAjB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AACD,SAXD;;AAaA,YAAM,CAAC,GAAG,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,KAAb,CAAmB,KAAK,IAAxB,EAA8B,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAA9C,EAAoD,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAApE,CAAV;AAEA,YAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,QAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,cAApB;AAEA,YAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,QAAA,QAAQ,CAAC,EAAD,EAAK,OAAL,EAAc,CAAC,CAAC,KAAF,KAAY,GAAZ,GAAkB,GAAlB,GAAwB,CAAC,CAAC,KAAxC,CAAR;AACA,QAAA,QAAQ,CAAC,EAAD,EAAK,OAAL,EAAc,CAAC,CAAC,IAAF,GAAS,MAAM,CAAC,CAAC,CAAC,IAAF,CAAO,CAAR,CAAf,GAA4B,GAA1C,CAAR;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AAEA,QAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,QAAA,QAAQ,CAAC,EAAD,EAAK,WAAL,EAAkB,CAAC,CAAC,IAAF,GAAS,MAAM,CAAC,CAAC,CAAC,IAAH,CAAf,GAA0B,GAA5C,CAAR;AACA,QAAA,QAAQ,CAAC,EAAD,EAAK,SAAL,EAAiB,CAAC,CAAC,OAAF,GAAY,MAAM,CAAC,CAAC,CAAC,OAAF,CAAU,CAAX,CAAlB,GAAkC,GAAnD,CAAR;AACA,QAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AAEA,QAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AAEA,YAAI,KAAK,IAAT,EAAe,KAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,IAA7B;AACf,aAAK,MAAL,CAAY,WAAZ,CAAwB,IAAxB;AACA,aAAK,IAAL,GAAY,IAAZ;AAEA,YAAI,KAAK,KAAT,EAAgB,KAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,KAA7B;AAChB,aAAK,MAAL,CAAY,WAAZ,CAAwB,KAAxB;AACA,aAAK,KAAL,GAAa,KAAb;AACD,OA/CD,MA+CO;AACL,YAAI,KAAK,IAAT,EAAe;AACb,eAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,IAA7B;AACA,eAAK,IAAL,GAAY,IAAZ;AACD;;AACD,YAAI,KAAK,KAAT,EAAgB;AACd,eAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,KAA7B;AACA,eAAK,KAAL,GAAa,IAAb;AACD;AACF;;AAED,UAAM,QAAQ,GAAG,KAAK,cAAL,EAAjB;AACA,UAAI,KAAK,QAAT,EAAmB,KAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,QAA7B;AACnB,WAAK,MAAL,CAAY,WAAZ,CAAwB,QAAxB;AACA,WAAK,QAAL,GAAgB,QAAhB;AACD;;;qCAEc;AAAA;;AACb,UAAM,GAAG,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,gBAA9B,CAAZ;AAEA,UAAM,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,QAAb,CAAsB,KAAK,IAA3B,EAAiC,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAjD,EAAuD,KAArE;AACA,UAAI,KAAK,CAAC,MAAN,IAAgB,CAApB,EAAuB,OAAO,GAAP;AAEvB,UAAM,IAAI,GAAG,EAAb;AACA,UAAM,SAAS,GAAG,IAAI,GAAJ,EAAlB;AAPa;AAAA;AAAA;;AAAA;AASb,6BAAgB,KAAhB,8HAAuB;AAAA,cAAZ,CAAY;AACrB,cAAM,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,EAAY,OAAZ,GAAsB,IAAtB,CAA2B,EAA3B,CAAV;;AACA,cAAI,CAAC,KAAK,CAAN,IAAW,KAAK,CAAC,QAAN,CAAe,CAAf,CAAf,EAAkC;AAChC,YAAA,SAAS,CAAC,GAAV,WAAiB,CAAC,CAAD,EAAI,CAAJ,EAAO,IAAP,GAAc,IAAd,CAAmB,GAAnB,CAAjB;AACD,WAFD,MAEO;AACL,YAAA,IAAI,CAAC,IAAL,CAAU,CAAV;AACD;AACF;AAhBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBb,UAAM,MAAM,GAAG,SAAT,MAAS,CAAC,CAAD,EAAc;AAC3B,YAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,CAAC,KAAK,MAAI,CAAC,IAAX,GAAkB,GAAlB,GAAwB,MAA/C,CAAV;AACA,QAAA,CAAC,CAAC,WAAF,GAAgB,CAAhB;AACA,QAAA,CAAC,CAAC,gBAAF,CAAmB,OAAnB,EAA4B;AAAA,iBAAM,MAAI,CAAC,KAAL,CAAW,CAAX,CAAN;AAAA,SAA5B;AACA,eAAO,CAAP;AACD,OALD;;AAlBa;AAAA;AAAA;;AAAA;AAyBb,8BAAmB,SAAnB,mIAA8B;AAAA,cAAnB,IAAmB;;AAAA,4BACb,IAAI,CAAC,KAAL,CAAW,GAAX,CADa;AAAA;AAAA,cACrB,CADqB;AAAA,cAClB,CADkB;;AAE5B,UAAA,GAAG,CAAC,WAAJ,CAAgB,QAAQ,CAAC,cAAT,CAAwB,IAAxB,CAAhB;AACA,UAAA,GAAG,CAAC,WAAJ,CAAgB,MAAM,CAAC,CAAD,CAAtB;AACA,UAAA,GAAG,CAAC,WAAJ,CAAgB,QAAQ,CAAC,cAAT,CAAwB,GAAxB,CAAhB;AACA,UAAA,GAAG,CAAC,WAAJ,CAAgB,MAAM,CAAC,CAAD,CAAtB;AACA,UAAA,GAAG,CAAC,WAAJ,CAAgB,QAAQ,CAAC,cAAT,CAAwB,IAAxB,CAAhB;AACD;AAhCY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkCb,+BAAgB,IAAhB,2BAAsB;AAAjB,YAAM,EAAC,YAAP;AACH,QAAA,GAAG,CAAC,WAAJ,CAAgB,MAAM,CAAC,EAAD,CAAtB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,QAAQ,CAAC,cAAT,CAAwB,GAAxB,CAAhB;AACD;;AAED,aAAO,GAAP;AACD;;;8BAEe,GAAgB;;;;;;;;;AAC9B,gBAAA,IAAA,CAAA,EAAA,CAAG,oBAAH,CAAwB,KAAK,MAA7B;AAEM,gBAAA,MAAM,CAAC,CAAC;;sBACV,GAAG,KAAK,EAAR,IAAc,GAAG,KAAK;;;;;qBACpB,KAAK;;;;;AACP,qBAAK,KAAL,CAAW,EAAX;;;;;;AAEA,uBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,CAAN;;;;;;;sBAEO,GAAG,KAAK;;;;;;AACjB,uBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,CAAN;;;;;;;AACK,oBAAI,CAAC,GAAG,GAAG,EAAN,IAAY,GAAG,GAAG,EAAnB,KAA0B,GAAG,KAAK,CAAtC,EAAyC;AAC9C,kBAAA,CAAC,CAAC,cAAF;AACD;;;;;;;;;AACF;;;;;;AAjLH,OAAA,CAAA,UAAA,GAAA,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;IAGa;;;;;;;;;6BAEL,CAAK;;;6BACL;AAAA;;AACJ,WAAK,IAAL,GAAY,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAZ;AACA,UAAM,KAAK,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,IAAvB,EAA6B,OAA7B,CAAd;AACA,MAAA,KAAK,CAAC,WAAN,GAAoB,QAApB;AAEA,MAAA,KAAK,CAAC,gBAAN,CAAuB,YAAvB,EAAqC;AAAA,eAAW,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,gCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACjC,yBAAM,MAAM,CAAC,IAAP,EAAN;;AADiC;AAAA,gCACP,UAAA,CAAC;AAAA,2BAAI,CAAC,CAAC,UAAF,CAAa,OAAb,CAAJ;AAAA,mBADM;;AACxC,kBAAA,GADwC,iBACZ,IADY;;AAAA,uBAE1C,GAF0C;AAAA;AAAA;AAAA;;AAAA;AAErC,yBAAM,MAAM,UAAN,CAAc,GAAd,CAAN;;AAFqC;AAI9C,kBAAA,QAAQ,CAAC,QAAT,CAAkB,MAAlB,CAAyB,IAAzB;;AAJ8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,EAAX;AAAA,OAArC;AAMA,WAAK,IAAL,CAAU,WAAV,CAAsB,KAAtB;AACA,UAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;;AAEA,UAAM,YAAY,GAAG,SAAf,YAAe,CAAC,IAAD,EAAe,EAAf,EAAiC;AACpD,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,QAAA,MAAM,CAAC,WAAP,GAAqB,IAArB;AACA,QAAA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,EAAjC;AACA,eAAO,MAAP;AACD,OAND;;AAQA,UAAK,IAAA,CAAA,EAAA,CAAG,KAAH,CAAS,KAAT,CAA6B,IAAlC,EAAwC;AACtC,QAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,QAAD,EAAW;AAAA,iBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,EAAuB;AAAC,YAAA,MAAM,EAAE;AAAT,WAAvB,CAAN;AAAA,SAAX,CAA5B;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,UAAD,EAAa;AAAA,iBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,CAAN;AAAA,SAAb,CAA5B;AACD,OAHD,MAGO;AACL,QAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,MAAD,EAAS;AAAA,iBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,CAAN;AAAA,SAAT,CAA5B;AACD;;AACD,MAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,OAAD,EAAU;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,UAAd,CAAN;AAAA,OAAV,CAA5B;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,QAAD,EAAW;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,CAAN;AAAA,OAAX,CAA5B;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,OAAD,EAAU;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,OAAd,CAAN;AAAA,OAAV,CAA5B;AACA,MAAA,GAAG,CAAC,WAAJ,CAAgB,YAAY,CAAC,UAAD,EAAa;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,UAAd,CAAN;AAAA,OAAb,CAA5B;AAEA,WAAK,IAAL,CAAU,WAAV,CAAsB,GAAtB;AACA,aAAO,KAAK,IAAZ;AACD;;;6BAEK;AACJ,aAAO,KAAK,IAAZ;AACD;;;;;;AA1CH,OAAA,CAAA,QAAA,GAAA,QAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;IAGa;;;AAKX,sBAAY,IAAZ,EAAiC;AAAA;;AAC/B,SAAK,IAAL,GAAY,IAAI,GAAG,IAAI,CAAC,IAAR,GAAe,CAA/B;AACD;;;;6BAEK;AACJ,aAAO;AAAC,QAAA,IAAI,EAAE,KAAK;AAAZ,OAAP;AACD;;;2BAEY,MAAa;;;;;;;;;;;AACxB,uBAAM,OAAO,CAAC,GAAR,CAAY,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAf,EAAqB,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,KAAd,EAArB,CAAZ,CAAN;;;AAEA,qBAAK,MAAL,GAAc,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,QAA9B,CAAd;AACA,oBAAI,IAAJ,EAAU,KAAK,IAAL,GAAY,IAAZ;AAEJ,gBAAA,OAAO,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,yBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,UAAd,CAAN;AAAA,iBAApB;AACP,gBAAA,WAAW,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,UAA9B;AACjB,gBAAA,QAAQ,CAAC,WAAT,GAAuB,MAAM,CAAC,KAAK,IAAN,CAA7B;AACA,qBAAK,MAAL,CAAY,WAAZ,CAAwB,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B,QAA5B,CAAxB;AAEM,gBAAA,IAAI,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,CAA5B,EAA+B,WAA/B;;AACJ,gBAAA,QAAQ,SAAR,KAAQ,CAAC,CAAD;AAAA,yBAAe,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,QAAb,CAAsB,CAAtB,EAAyB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAzC,EAA+C,CAA/C,KAAqD,CAApE;AAAA;;AAER,gBAAA,QAAQ,IAAI,OAAA,CAAA,KAAJ,CAAU,UAAV,EAAsB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAtC;;AACD,uBAAM,KAAK,CAAC,GAAN,CAAU,MAAV,CAAN;;;AAAP,gBAAA;AACA,gBAAA,OAAO,IAAI,CACd,MADU,CACH,UAAA,CAAC;AAAA,yBAAI,CAAC,CAAC,CAAF,GAAM,GAAV;AAAA,iBADE,EAEV,IAFU,CAEL,UAAC,CAAD,EAAI,CAAJ;AAAA,yBAAU,KAAK,CAAC,CAAC,CAAC,CAAH,CAAL,GAAa,CAAC,CAAC,CAAf,GAAmB,KAAK,CAAC,CAAC,CAAC,CAAH,CAAL,GAAa,CAAC,CAAC,CAA5C;AAAA,iBAFK,EAGV,GAHU,CAGN,UAAA,CAAC;AAAA,yBAAI,CAAC,CAAC,CAAN;AAAA,iBAHK;AAKP,gBAAA,UAAU,QAAQ,CAAC,aAAT,CAAuB,KAAvB;AAChB,gBAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,SAAtB;;;;;;AAEA,iCAAgB,IAAhB,uHAAsB;AAAX,kBAAA,CAAW;AACd,kBAAA,KADc,GACN,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADM;AAEpB,kBAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,SAApB;AACA,kBAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB,KAAlB,EAAyB,MAAA,CAAA,KAAA,CAAM,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,QAAb,CAAsB,CAAtB,EAAyB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAzC,EAA+C,KAArD,CAAzB;AACA,kBAAA,OAAO,CAAC,WAAR,CAAoB,KAApB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACD,qBAAK,MAAL,CAAY,WAAZ,CAAwB,OAAxB;iDAEO,KAAK;;;;;;;;;AACb;;;6BAEK;AACJ,aAAO,KAAK,MAAZ;AACD;;;;;;AAlDH,OAAA,CAAA,UAAA,GAAA,UAAA;;;;;;;;;;;;;;;;;;;;;;ACNA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;IAKa;;;;;;;;;6BAIL,CAAK;;;6BACL;AAAA;;AACJ,WAAK,QAAL,GAAgB,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,UAA9B,CAAhB;;AAEA,UAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,CAAD,EAAmB;AACnC,YAAM,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAA,GAAG,CAAC,SAAJ,CAAc,GAAd,CAAkB,KAAlB;AACA,QAAA,GAAG,CAAC,WAAJ,CAAgB,CAAhB;AACA,eAAO,GAAP;AACD,OALD;;AAOA,WAAK,IAAL,GAAY,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,MAA9B,CAAZ;AACA,WAAK,IAAL,CAAU,WAAV,GAAwB,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,QAArB,EAA+B,QAAA,CAAA,MAAA,CAAO,IAAtC,CAAxB;AACA,WAAK,IAAL,CAAU,YAAV,CAAuB,iBAAvB,EAA0C,MAA1C;AACA,WAAK,IAAL,CAAU,gBAAV,CAA2B,OAA3B,EAAoC;AAAA,eAAM,KAAI,CAAC,OAAL,CAAa,KAAI,CAAC,IAAL,CAAU,WAAV,IAAyB,EAAtC,CAAN;AAAA,OAApC;AACA,UAAM,IAAI,GAAG,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,MAAd,CAAN;AAAA,OAApB,CAAb;AACA,WAAK,QAAL,CAAc,WAAd,CAA0B,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,KAAK,IAA3B,EAAiC,IAAjC,CAA1B;;AAEA,UAAM,eAAe,GAAG,SAAlB,eAAkB,CAAC,CAAD,EAAoB,IAApB,EAAoC,EAApC,EAA0E,EAA1E;AAAA,eACtB,SAAS,CAAC,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,EAAE,IAAI,CAAtB,EAAyB,IAAI,CAAC,GAAL,CAAS,UAAA,CAAC;AAAA,iBAAI,CAAC,KAAK,MAAM,CAAC,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,CAAhB,CAAD,CAAZ,GAAmC,CAAC,CAAD,CAAnC,GAAyC,CAA7C;AAAA,SAAV,CAAzB,EAAoF,EAApF,CAAD,CADa;AAAA,OAAxB;;AAEA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,MAAD,EAAS,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAT,EAAgC,YAAA;AACvE,YAAM,GAAG,GAAG,KAAK,KAAL,KAAe,KAAf,GAAuB,CAAvB,GAA2B,CAAvC;AACC,QAAA,QAAQ,CAAC,cAAT,cAA8B,GAA9B,GAA0D,OAA1D,GAAoE,IAApE;AACD,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,IAAI,EAAE,KAAK,KAAZ;AAA2B,UAAA,GAAG,EAAH;AAA3B,SAAlB;AACD,OAJwC,CAAzC;AAKA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,KAAD,EAAQ,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAR,EAAyB,YAAA;AAChE,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,GAAG,EAAE,MAAM,CAAC,KAAK,KAAN;AAAZ,SAAlB;AACD,OAFwC,CAAzC;AAGA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,MAAD,EAAS,CAAC,KAAD,EAAQ,QAAR,EAAkB,KAAlB,CAAT,EAAmC,YAAA;AAC1E,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,IAAI,EAAE,KAAK;AAAZ,SAAlB;AACD,OAFwC,CAAzC;AAGA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,OAAD,EAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAV,EAAgC,YAAA;AACvE,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,KAAK,EAAE,KAAK;AAAb,SAAlB;AACD,OAFwC,CAAzC;AAGA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,SAAD,EAAY,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,CAAZ,EAAsC,YAAA;AAC7E,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,OAAO,EAAE,KAAK;AAAf,SAAlB;AACD,OAFwC,EAEtC,cAFsC,CAAzC;AAGA,WAAK,QAAL,CAAc,WAAd,CAA0B,eAAe,CAAC,OAAD,EAAU,CAAC,OAAD,EAAU,MAAV,CAAV,EAA6B,YAAA;AACpE,YAAM,KAAK,GAAG,KAAK,KAAnB;AACA,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB;AAAC,UAAA,KAAK,EAAL;AAAD,SAAlB;AACA,QAAA,IAAA,CAAA,EAAA,CAAG,QAAH,CAAY,KAAZ;AACD,OAJwC,CAAzC;AAMA,aAAO,KAAK,QAAZ;AACD;;;6BAEK;AACJ,aAAO,KAAK,QAAZ;AACD;;;6BAEK;AACJ,WAAK,IAAL,CAAU,WAAV,GAAwB,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,QAArB,EAA+B,QAAA,CAAA,MAAA,CAAO,IAAtC,CAAxB;AACA,WAAK,IAAL,CAAU,SAAV,CAAoB,MAApB,CAA2B,OAA3B;;AACA,UAAM,GAAG,GAAG,SAAN,GAAM,CAAC,EAAD;AAAA,eAAiB,QAAQ,CAAC,cAAT,CAAwB,EAAxB,EAAiD,OAAjD,GAA2D,IAA5E;AAAA,OAAZ;;AACA,MAAA,GAAG,eAAQ,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAxB,EAAH;AACA,MAAA,GAAG,cAAO,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,GAAvB,EAAH;AACA,MAAA,GAAG,eAAQ,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAxB,EAAH;AACA,MAAA,GAAG,gBAAS,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAAzB,EAAH;AACA,MAAA,GAAG,uBAAgB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,OAAhC,EAAH;AACA,MAAA,GAAG,gBAAS,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAAhB,IAAyB,OAAlC,EAAH;AACD;;;4BAEO,IAAU;AAAA,kCACS,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,EAAd,CADT;AAAA;AAAA,UACT,QADS;AAAA,UACC,IADD;;AAEhB,UAAI,KAAK,CAAC,IAAD,CAAL,IAAe,EAAE,QAAQ,CAAC,IAAT,IAAiB,QAAQ,CAAC,IAA1B,IAAkC,QAAQ,CAAC,GAA7C,CAAnB,EAAsE;AACpE,aAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,CAAwB,OAAxB;AACD,OAFD,MAEO;AACL,QAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB,QAAlB,EAA4B,IAA5B,EAAkC,KAAlC;AACA,aAAK,MAAL;AACD;AACF;;;;;;AA1EH,OAAA,CAAA,YAAA,GAAA,YAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;IAKa;;;AAMX,qBAAY,IAAZ,EAAqC;AAAA;;AAFrC,SAAA,KAAA,GAA4B,IAA5B;AAGE,SAAK,OAAL,GAAe,IAAI,GAAG,IAAI,CAAC,OAAR,GAAkB,MAArC;AACD;;;;6BAEK;AACJ,aAAO;AAAC,QAAA,OAAO,EAAE,KAAK;AAAf,OAAP;AACD;;;6BAGW;;;;;;;;;;;;AACV,uBAAM,OAAO,CAAC,GAAR,CAAY,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,OAAf,EAAwB,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAd,EAAxB,EAA8C,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAA5D,EAAkE,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,KAAd,EAAlE,CAAZ,CAAN;;;AACA,oBAAI,CAAC,QAAA,CAAA,MAAA,CAAO,KAAZ,EAAmB;AACjB,kBAAA,QAAA,CAAA,MAAA,CAAO,KAAP,GAAe,EAAf;;AACA,uBAAS,CAAT,GAAa,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,MAAf,GAAwB,CAArC,EAAwC,CAAC,IAAI,CAAL,IAAU,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,MAAb,GAAsB,QAAA,CAAA,MAAA,CAAO,KAA/E,EAAsF,CAAC,EAAvF,EAA2F;AACnF,oBAAA,IADmF,GAC5E,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,CAAf,CAAd,EAAiC,QAAA,CAAA,MAAA,CAAO,IAAxC,EAA8C,QAAA,CAAA,MAAA,CAAO,IAArD,EAA2D,QAAA,CAAA,MAAA,CAAO,KAAlE,CAD4E;AAEnF,oBAAA,MAFmF,GAE1E,IAAI,GAAJ,EAF0E;;AAGzF,yBAAW,CAAX,IAAgB,IAAI,CAAC,MAArB,EAA6B;AAC3B,0BAAI,IAAI,CAAC,MAAL,CAAY,CAAZ,IAAiB,CAArB,EAAwB,MAAM,CAAC,GAAP,CAAW,CAAX;AACzB;;AACD,oBAAA,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,IAAb,CAAkB,CAAC,IAAI,CAAC,QAAN,EAAgB,MAAhB,CAAlB;AACD;AACF;;AAEK,gBAAA,OAAO,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,OAAb,CAAqB,QAAA,CAAA,MAAA,CAAO,KAA5B,EAAmC,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAnD,EAAyD,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAzE;AAEb,qBAAK,KAAL,GAAa,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,OAA9B,CAAb;AACM,gBAAA,OAAO,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,yBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,MAAd,CAAN;AAAA,iBAApB;;AACP,gBAAA,UAAU,SAAV,OAAU,CAAC,CAAD;AAAA,yBAAgB,KAAI,CAAC,OAAL,CAAa,CAAb,EAAgB,IAAhB,CAAhB;AAAA;;AACV,gBAAA,SAAS,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,aAAhB,EAA+B,CAAC,MAAD,EAAS,SAAT,EAAoB,MAApB,EAA4B,GAA5B,CAAgC,UAAA,CAAC;AAAA,yBAAI,CAAC,KAAK,KAAI,CAAC,OAAX,GAAqB,CAAC,CAAD,CAArB,GAA2B,CAA/B;AAAA,iBAAjC,CAA/B,EAAmG,YAAA;AAChH,kBAAA,OAAO,CAAC,KAAK,KAAN,CAAP;AACA,kBAAA,IAAA,CAAA,EAAA,CAAG,OAAH;AACD,iBAHc;AAKf,qBAAK,KAAL,CAAW,WAAX,CAAuB,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,MAAtB,EAA8B,IAA9B,CAAvB;AACA,qBAAK,OAAL,CAAa,KAAK,OAAlB,EAA2B,IAA3B;iDAEO,KAAK;;;;;;;;;AACb;;;6BAEK;AACJ,WAAK,KAAL,GAAa,IAAb;AACA,aAAO,KAAK,KAAZ;AACD;;;4BAEO,SAAkB,MAAkC;AAC1D,WAAK,OAAL,GAAe,OAAf;AAD0D,UAEnD,KAFmD,GAErB,IAFqB,CAEnD,KAFmD;AAAA,UAE5C,SAF4C,GAErB,IAFqB,CAE5C,SAF4C;AAAA,UAEjC,QAFiC,GAErB,IAFqB,CAEjC,QAFiC;;AAI1D,UAAM,IAAI,GAAG,SAAP,IAAO,CAAC,CAAD,EAAc;AACzB,YAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;AACA,QAAA,CAAC,CAAC,WAAF,GAAgB,CAAhB;AACA,QAAA,CAAC,CAAC,gBAAF,CAAmB,OAAnB,EAA4B;AAAA,iBAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,EAAwB,CAAxB,CAAN;AAAA,SAA5B;AACA,eAAO,CAAP;AACD,OALD;;AAOA,UAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,cAApB;;AACA,UAAI,OAAO,KAAK,MAAhB,EAAwB;AAAA;AAAA;AAAA;;AAAA;AACtB,+BAAgC,SAAhC,8HAA2C;AAAA;AAAA,gBAA/B,CAA+B,eAA/B,CAA+B;AAAA,gBAA5B,EAA4B,eAA5B,EAA4B;AAAA,gBAAxB,CAAwB,eAAxB,CAAwB;AAAA,gBAArB,EAAqB,eAArB,EAAqB;AAAA,gBAAjB,CAAiB,eAAjB,CAAiB;AACzC,gBAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;AAEA,gBAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,YAAA,EAAE,CAAC,WAAH,CAAe,IAAI,CAAC,CAAD,CAAnB;AACA,YAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,YAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,YAAA,EAAE,CAAC,WAAH,aAAoB,EAApB,cAA0B,EAA1B,eAAiC,CAAjC;AACA,YAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,YAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,YAAA,EAAE,CAAC,WAAH,CAAe,IAAI,CAAC,CAAD,CAAnB;AACA,YAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,YAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AACD;AAjBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBvB,OAlBD,MAkBO,IAAI,OAAO,KAAK,MAAhB,EAAwB;AAAA;AAAA;AAAA;;AAAA;AAC7B,gCAA8B,KAA9B,mIAAqC;AAAA;AAAA,gBAAzB,CAAyB,gBAAzB,CAAyB;AAAA,gBAAtB,KAAsB,gBAAtB,KAAsB;AAAA,gBAAf,GAAe,gBAAf,GAAe;;AACnC,gBAAM,GAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;;AAEA,gBAAI,GAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;;AACA,YAAA,GAAE,CAAC,WAAH,CAAe,IAAI,CAAC,CAAD,CAAnB;;AACA,YAAA,GAAE,CAAC,WAAH,CAAe,GAAf;;AAEA,YAAA,GAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,YAAA,GAAE,CAAC,WAAH,aAAoB,KAApB,cAA6B,GAA7B;;AACA,YAAA,GAAE,CAAC,WAAH,CAAe,GAAf;;AAEA,YAAA,KAAK,CAAC,WAAN,CAAkB,GAAlB;AACD;AAb4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAc9B,OAdM,MAc4B;AAAA;AAAA;AAAA;;AAAA;AACjC,gCAAoB,QAApB,mIAA8B;AAAA,gBAAnB,KAAmB;;AAC5B,gBAAM,IAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;;AACA,gBAAM,IAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;;AAEA,gBAAI,QAAQ,GAAG,EAAf;AACA,gBAAI,IAAI,GAAG,KAAX;AAL4B;AAAA;AAAA;;AAAA;AAM5B,oCAAgC,KAAhC,mIAAuC;AAAA;AAAA,oBAA3B,GAA2B,gBAA3B,GAA2B;AAAA,oBAAtB,MAAsB,gBAAtB,KAAsB;AAAA,oBAAf,IAAe,gBAAf,GAAe;;AACrC,oBAAM,EAAC,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAZ,EAAsB,EAAtB,CAAV;;AAEA,oBAAI,GAAG,CAAC,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACvB,sBAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;AACA,kBAAA,CAAC,CAAC,WAAF,GAAgB,GAAhB;AACA,kBAAA,QAAQ,CAAC,IAAT,CAAc,CAAd;AACA,kBAAA,IAAI,GAAG,IAAP;AACD;;AAED,gBAAA,QAAQ,CAAC,IAAT,CAAc,IAAI,CAAC,EAAD,CAAlB;AAEA,oBAAM,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAb;AACA,gBAAA,IAAI,CAAC,WAAL,cAAuB,MAAvB,cAAgC,IAAhC;;AAEA,oBAAI,GAAG,CAAC,QAAJ,CAAa,GAAb,CAAJ,EAAuB;AACrB,kBAAA,QAAQ,CAAC,IAAT,CAAc,IAAd;;AACA,sBAAM,EAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;;AACA,kBAAA,EAAC,CAAC,WAAF,GAAgB,GAAhB;AACA,kBAAA,QAAQ,CAAC,IAAT,CAAc,EAAd;AACA,kBAAA,IAAI,GAAG,KAAP;AACD,iBAND,MAMO;AACL,sBAAI,IAAJ,EAAU,IAAI,CAAC,WAAL,IAAoB,GAApB;AACV,kBAAA,QAAQ,CAAC,IAAT,CAAc,IAAd;AACD;;AAED,oBAAI,CAAC,IAAL,EAAW;AAAA;AAAA;AAAA;;AAAA;AACT,0CAAgB,QAAhB;AAAA,0BAAW,EAAX;;AAA0B,sBAAA,IAAE,CAAC,WAAH,CAAe,EAAf;AAA1B;AADS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAET,kBAAA,IAAE,CAAC,WAAH,CAAe,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAf;;AACA,kBAAA,QAAQ,GAAG,EAAX;AACD;AACF;AArC2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuC5B,YAAA,IAAE,CAAC,WAAH,CAAe,IAAf;;AACA,YAAA,KAAK,CAAC,WAAN,CAAkB,IAAlB;AACD;AA1CgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2ClC;;AACD,UAAI,KAAK,KAAT,EAAgB,KAAK,KAAL,CAAW,WAAX,CAAuB,KAAK,KAA5B;AAChB,WAAK,KAAL,CAAW,WAAX,CAAuB,KAAvB;AACA,WAAK,KAAL,GAAa,KAAb;AACD;;;;;;AA9IH,OAAA,CAAA,SAAA,GAAA,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AAIA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAEA,IAAM,MAAM,GAAG,CAAf;AACA,IAAM,GAAG,GAAG,KAAK,EAAL,GAAU,EAAV,GAAe,IAA3B;;AAIA,SAAS,cAAT,CAA2B,CAA3B,EAAiC,CAAjC,EAAqC;AACnC,SAAO,CAAC,GAAG,CAAJ,GAAQ,CAAC,CAAT,GAAa,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAhC;AACD;;IAEK;;;AAKJ,mBAAmE;AAAA,QAAvD,IAAuD,uEAA3C,EAA2C;AAAA,QAAvC,OAAuC,uEAAd,cAAc;;AAAA;;AACjE,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,MAAL,GAAc,KAAK,IAAL,CAAU,MAAxB;AACA,SAAK,OAAL,GAAe,OAAf;;AAEA,QAAI,KAAK,MAAL,GAAc,CAAlB,EAAqB;AACnB,WAAK,IAAI,CAAC,GAAG,CAAC,KAAK,MAAL,IAAe,CAAhB,IAAqB,CAAlC,EAAqC,CAAC,IAAI,CAA1C,EAA6C,CAAC,EAA9C;AAAkD,aAAK,IAAL,CAAU,CAAV;AAAlD;AACD;AACF;;;;yBAEI,MAAO;AACV,WAAK,IAAL,CAAU,IAAV,CAAe,IAAf;AACA,WAAK,MAAL;AACA,WAAK,EAAL,CAAQ,KAAK,MAAL,GAAc,CAAtB;AACD;;;0BAEE;AACD,UAAI,KAAK,MAAL,KAAgB,CAApB,EAAuB,OAAO,SAAP;AAEvB,UAAM,GAAG,GAAG,KAAK,IAAL,CAAU,CAAV,CAAZ;AACA,UAAM,MAAM,GAAG,KAAK,IAAL,CAAU,GAAV,EAAf;AACA,WAAK,MAAL;;AAEA,UAAI,KAAK,MAAL,GAAc,CAAlB,EAAqB;AACnB,aAAK,IAAL,CAAU,CAAV,IAAe,MAAf;AACA,aAAK,IAAL,CAAU,CAAV;AACD;;AAED,aAAO,GAAP;AACD;;;2BAEG;AACF,aAAO,KAAK,IAAL,CAAU,CAAV,CAAP;AACD;;;uBAEU,KAAW;AACpB,UAAM,IAAI,GAAG,KAAK,IAAL,CAAU,GAAV,CAAb;;AAEA,aAAO,GAAG,GAAG,CAAb,EAAgB;AACd,YAAM,MAAM,GAAI,GAAG,GAAG,CAAP,IAAa,CAA5B;AACA,YAAM,OAAO,GAAG,KAAK,IAAL,CAAU,MAAV,CAAhB;AACA,YAAI,KAAK,OAAL,CAAa,IAAb,EAAmB,OAAnB,KAA+B,CAAnC,EAAsC;AACtC,aAAK,IAAL,CAAU,GAAV,IAAiB,OAAjB;AACA,QAAA,GAAG,GAAG,MAAN;AACD;;AAED,WAAK,IAAL,CAAU,GAAV,IAAiB,IAAjB;AACD;;;yBAEY,KAAW;AACtB,UAAM,IAAI,GAAG,KAAK,MAAL,IAAe,CAA5B;AACA,UAAM,IAAI,GAAG,KAAK,IAAL,CAAU,GAAV,CAAb;;AAEA,aAAO,GAAG,GAAG,IAAb,EAAmB;AACjB,YAAI,IAAI,GAAG,CAAC,GAAG,IAAI,CAAR,IAAa,CAAxB;AACA,YAAI,IAAI,GAAG,KAAK,IAAL,CAAU,IAAV,CAAX;AACA,YAAM,KAAK,GAAG,IAAI,GAAG,CAArB;;AAEA,YAAI,KAAK,GAAG,KAAK,MAAb,IAAuB,KAAK,OAAL,CAAa,KAAK,IAAL,CAAU,KAAV,CAAb,EAA+B,IAA/B,IAAuC,CAAlE,EAAqE;AACnE,UAAA,IAAI,GAAG,KAAP;AACA,UAAA,IAAI,GAAG,KAAK,IAAL,CAAU,KAAV,CAAP;AACD;;AACD,YAAI,KAAK,OAAL,CAAa,IAAb,EAAmB,IAAnB,KAA4B,CAAhC,EAAmC;AAEnC,aAAK,IAAL,CAAU,GAAV,IAAiB,IAAjB;AACA,QAAA,GAAG,GAAG,IAAN;AACD;;AAED,WAAK,IAAL,CAAU,GAAV,IAAiB,IAAjB;AACD;;;;;;IAYU;;;AAoCX,wBACE,SADF,EAEE,OAFF,EAGE,CAHF,EAIE,IAJF,EAKE,KALF,EAME,KANF,EAMc;AAAA;;AAEZ,SAAK,SAAL,GAAiB,SAAjB;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,CAAL,GAAS,CAAT;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,KAAL,GAAa,KAAb;AACD;;;;2BAEG;AACF,aAAO,KAAK,OAAL,CAAa,MAApB;AACD;;;2BAEG;AAAA;;AACF,UAAM,GAAG,GAAG,CAAC,IAAI,IAAJ,EAAb;;AACA,UAAM,QAAQ,GAAG,SAAX,QAAW,GAAK;AACpB,YAAI,CAAC,KAAI,CAAC,SAAL,CAAe,MAApB,EAA4B,OAAO,SAAP;AAC5B,eAAO;AACL,UAAA,CAAC,EAAE,KAAI,CAAC,SAAL,CAAe,GAAf,EADE;AAEL,UAAA,CAAC,EAAE,GAFE;AAGL,UAAA,CAAC,EAAE,CAHE;AAIL,UAAA,CAAC,EAAE,CAJE;AAKL,UAAA,CAAC,EAAE,CALE;AAML,UAAA,CAAC,EAAE;AANE,SAAP;AAQD,OAVD;;AAYA,UAAI,IAAI,GAA8B,KAAK,OAAL,CAAa,GAAb,EAAtC;;AACA,UAAI,IAAJ,EAAU;AACR,YAAI,IAAI,CAAC,CAAL,GAAS,GAAb,EAAkB;AAChB,cAAM,IAAI,GAAG,QAAQ,EAArB;;AACA,cAAI,IAAJ,EAAU;AACR,iBAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB;AACA,YAAA,IAAI,GAAG,IAAP;AACD;AACF;AACF,OARD,MAQO;AACL,QAAA,IAAI,GAAG,QAAQ,EAAf;AACD;;AACD,UAAI,CAAC,IAAL,EAAW,MAAM,IAAI,UAAJ,EAAN;AAEX,UAAI,GAAG,GAAG,IAAI,CAAC,CAAf;AACA,UAAM,QAAQ,GAAG,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,EAAyB,KAAK,IAA9B,CAAjB;AACA,UAAM,KAAK,GAAG,QAAQ,CAAC,KAAvB;;AAEA,UAAM,OAAO,GAAG,SAAV,OAAU;AAAA,eAAM,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAN;AAAA,OAAhB;;AACA,UAAM,MAAM,GAAG,SAAT,MAAS,CAAC,CAAD,EAAc;AAC3B,QAAA,IAAI,GAAG,MAAM,CAAC,IAAD,EAAQ,CAAR,EAAW,GAAX,CAAb;AACA,QAAA,OAAO;AACP,eAAO,KAAI,CAAC,KAAL,CAAW,GAAX,CAAe,MAAf,EAAuB,KAAI,CAAC,OAAL,CAAa,IAApC,CAAP;AACD,OAJD;;AAMA,UAAM,MAAM,GAAG,IAAI,QAAA,CAAA,MAAJ,CAAW,IAAI,CAAC,CAAhB,CAAf;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,EAApB,EAAwB,CAAC,EAAzB,EAA6B;AAC3B,QAAA,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,GAAG,CAAC,KAAJ,CAAU,EAAV,CAAf,EAA8B,IAA9B,CAAmC,EAAnC,CAAN;AACA,YAAI,CAAC,KAAK,CAAC,QAAN,CAAe,GAAf,CAAL,EAA0B;AAC3B;;AAED,aAAO;AAAE,QAAA,KAAK,EAAE,GAAT;AAAc,QAAA,KAAK,EAAE,MAAA,CAAA,KAAA,CAAM,KAAN,CAArB;AAAmC,QAAA,MAAM,EAAN,MAAnC;AAA2C,QAAA,OAAO,EAAP;AAA3C,OAAP;AACD;;;2BA9FmB,OAAc,MAAY,MAAY,OAAc,KAAW;;;;;;;;;;AAC3E,gBAAA,IAAI,IAAI,CAAC,WAAL,GAAmB,CAAnB;AAEJ,gBAAA,UAAU,IAAI,KAAJ,CAAyB,EAAzB,EAA6C,UAAC,CAAD,EAAI,CAAJ;AAAA,yBAAU,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAlB;AAAA,iBAA7C;AAEV,gBAAA,SAAS,IAAI,GAAJ;;AAE6B,uBAAM,KAAK,CAAC,GAAN,CAAU,MAAV,CAAN;;;AAAtC,gBAAA;;qBACF;;;;;AACF,gBAAA,OAAO,CAAC,IAAR,GAAe,MAAf;AACA,gBAAA,OAAO,CAAC,MAAR,GAAiB,MAAM,CAAC,MAAxB;;;;;;AACA,iCAAgB,MAAhB;AAAW,kBAAA,CAAX;AAAwB,kBAAA,MAAM,CAAC,GAAP,CAAW,CAAC,CAAC,CAAb;AAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGI,gBAAA,MAAM;;AACZ,qBAAW,CAAX,IAAgB,KAAK,CAAC,KAAtB,EAA6B;AAC3B,sBAAI,CAAC,MAAM,CAAC,GAAP,CAAW,CAAX,CAAL,EAAoB;AACZ,oBAAA,CADY,GACR,KAAK,CAAC,QAAN,CAAe,CAAf,EAAkB,IAAlB,EAAwB,GAAxB,EAA6B,CAA7B,KAAmC,CAD3B;AAElB,wBAAI,CAAJ,EAAO,GAAG,CAAC,IAAJ,CAAS;AAAE,sBAAA,CAAC,EAAD,CAAF;AAAK,sBAAA,CAAC,EAAD;AAAL,qBAAT;AACR;AACF;;AACD,gBAAA,GAAG,CAAC,IAAJ,CAAS,UAAC,CAAD,EAAI,CAAJ;AAAA,yBAAU,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAlB;AAAA,iBAAT;AACM,gBAAA,YAAY,GAAG,CAAC,GAAJ,CAAQ,UAAA,CAAC;AAAA,yBAAI,CAAC,CAAC,CAAN;AAAA,iBAAT;iDAEX,IAAI,YAAJ,CAAiB,SAAjB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,IAAxC,EAA8C,KAA9C,EAAqD,KAArD;;;;;;;;;AACR;;;;;;AAlCH,OAAA,CAAA,YAAA,GAAA,YAAA;;AA0GA,SAAS,MAAT,CAAgB,CAAhB,EAAkC,CAAlC,EAA6C,GAA7C,EAAwD;AAEtD,MAAI,GAAG,GAAG,CAAC,GAAD,GAAO,OAAO,CAAd,GAAkB,OAAO,CAAP,GAAW,CAAvC;AAGA,MAAI,GAAG,GAAG,CAAV,EAAa,GAAG,IAAI,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAC,CAAC,CAAF,GAAM,CAAlB,IAAuB,GAAhC,EAAqC,GAArC,IAA4C,GAAnD;AAEb,MAAM,GAAG,GAAG,GAAZ;;AAEA,MAAI,CAAC,IAAI,CAAT,EAAY;AAEV,QAAM,KAAK,GAAG,CAAC,CAAC,CAAF,GAAM,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,CAAC,CAAC,CAAC,CAAF,GAAM,CAAC,CAAC,CAAT,IAAc,GAAd,IAAqB,CAAC,CAAC,CAAF,GAAM,MAAN,GAAe,CAApC,CAAZ,CAAN,GAA4D,CAA1E;AACA,IAAA,CAAC,CAAC,CAAF;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,CAAC,CAAC,CAAF,GAAM,GAAG,GAAG,KAA1B,CAAN;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,GAAG,GAAG,GAAG,GAAG,MAAN,GAAe,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,CAAX,EAAc,CAAC,CAAC,CAAF,GAAM,CAApB,CAAf,GAAwC,KAApD;AACD,GAND,MAMO;AACL,IAAA,CAAC,CAAC,CAAF,GAAM,CAAN;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,CAAC,CAAC,CAAF,GAAM,GAApB,CAAN;AACA,IAAA,CAAC,CAAC,CAAF,GAAM,GAAG,GAAG,GAAZ;AACD;;AACD,EAAA,CAAC,CAAC,CAAF;AACA,EAAA,CAAC,CAAC,CAAF,GAAM,GAAN;AAEA,SAAO,CAAP;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvOD,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;IAEa;;;AAAb,0BAAA;AAAA;;AAGE,SAAA,OAAA,GAA8B,IAA9B;AACA,SAAA,OAAA,GAA+B,IAA/B;AAqGD;;;;6BAnGO,CAAK;;;6BACC;;;;;;;;;;AACV,uBAAM,OAAO,CAAC,GAAR,CAAY,CAAC,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,QAAf,EAAyB,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,IAAvC,EAA6C,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,KAAd,EAA7C,CAAZ,CAAN;;;sBACI,CAAC,KAAK,IAAN,IAAc,KAAK,IAAL,CAAU,IAAV,KAAmB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB;;;;;AAC7C,gBAAA,QAAQ,IAAI,OAAA,CAAA,KAAJ,CAAU,UAAV,EAAsB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAtC;;AACF,uBAAM,UAAA,CAAA,YAAA,CAAa,MAAb,CAChB,QAAA,CAAA,MAAA,CAAO,KADS,EACF,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IADd,EACoB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IADpC,EAC0C,KAD1C,EACiD,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,GADjE,CAAN;;;AAAZ,qBAAK;;;AAIP,qBAAK,KAAL,GAAa,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,OAA9B,CAAb;AACA,qBAAK,IAAL;iDACO,KAAK;;;;;;;;;AACb;;;6BAEW;;;;;;;;qBACN,KAAK;;;;;;AAAS,uBAAM,KAAK,OAAL,EAAN;;;AAClB,qBAAK,OAAL,GAAe,IAAf;kDACO,KAAK;;;;;;;;;AACb;;;2BAEG;AACF,UAAM,OAAO,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,SAA9B,CAAhB;AACA,UAAM,QAAQ,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,UAA9B,CAAjB;AACA,MAAA,QAAQ,CAAC,WAAT,GAAuB,MAAM,CAAC,KAAK,IAAL,CAAU,IAAV,EAAD,CAA7B;;AAHE,4BAKsC,KAAK,IAAL,CAAU,IAAV,EALtC;AAAA,UAKK,KALL,mBAKK,KALL;AAAA,UAKY,KALZ,mBAKY,KALZ;AAAA,UAKmB,MALnB,mBAKmB,MALnB;AAAA,UAK2B,OAL3B,mBAK2B,OAL3B;;AAMF,WAAK,OAAL,GAAe,OAAf;AACA,UAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,MAAA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,MAAxB;AACA,MAAA,SAAS,CAAC,WAAV,GAAwB,KAAxB;AAEA,UAAM,QAAQ,GAAG,IAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,UAA9B,CAAjB;AACA,MAAA,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,QAAvB;AACA,MAAA,QAAQ,CAAC,WAAT,GAAuB,MAAM,CAAC,KAAK,CAAC,MAAP,CAA7B;AAEA,UAAM,MAAM,GAAG,KAAK,mBAAL,CAAyB,MAAzB,CAAf;AACA,UAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,MAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,SAApB,EAA+B,QAA/B;AACA,MAAA,IAAA,CAAA,EAAA,CAAG,cAAH,CAAkB,KAAlB,EAAyB,KAAzB;AAEA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,QAAd,EAAwB,QAAQ,CAAC,WAAjC,CAAN;AAAA,OAArC;AACA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,YAA1B,EAAwC,YAAK;AAC3C,YAAI,CAAC,MAAM,CAAC,SAAP,CAAiB,QAAjB,CAA0B,QAA1B,CAAL,EAA0C;AAC1C,QAAA,QAAQ,CAAC,SAAT,CAAmB,MAAnB,CAA0B,QAA1B;AACD,OAHD;AAIA,MAAA,QAAQ,CAAC,gBAAT,CAA0B,eAA1B,EAA2C;AAAA,eAAM,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,QAAvB,CAAN;AAAA,OAA3C;AAEA,UAAM,IAAI,GAAG,IAAA,CAAA,EAAA,CAAG,gBAAH,CAAoB;AAAA,eAAM,IAAA,CAAA,EAAA,CAAG,UAAH,CAAc,MAAd,CAAN;AAAA,OAApB,CAAb;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,IAAA,CAAA,EAAA,CAAG,YAAH,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B,QAA5B,CAApB;AAEA,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,SAAtB;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,SAApB;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,KAApB;AAEA,MAAA,OAAO,CAAC,WAAR,CAAoB,OAApB;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,QAApB;AACA,MAAA,OAAO,CAAC,WAAR,CAAoB,MAApB;;AAEA,UAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,CAAD,EAAkB;AACjC,YAAI,CAAC,CAAC,IAAD,EAAO,QAAP,EAAiB,QAAjB,CAA0B,CAAC,CAAC,MAA5B,CAAL,EAAyD;AACvD,UAAA,OAAO,CAAC,mBAAR,CAA4B,OAA5B,EAAqC,QAArC;AACA,UAAA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,QAAxB;AACA,UAAA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,QAAvB;AACA,UAAA,MAAM,CAAC,SAAP,CAAiB,MAAjB,CAAwB,QAAxB;AACD;AACF,OAPD;;AAQA,MAAA,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,QAAlC;AAEA,UAAI,KAAK,OAAT,EAAkB,KAAK,KAAL,CAAW,WAAX,CAAuB,KAAK,OAA5B;AAClB,WAAK,KAAL,CAAW,WAAX,CAAuB,OAAvB;AACA,WAAK,OAAL,GAAe,OAAf;AACD;;;wCAEmB,QAAoC;AAAA;;AACtD,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;AACA,MAAA,OAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B,QAA3B;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,cAAtB;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,YAAtB;AACA,MAAA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,QAAtB;;AALsD,iCAO7C,CAP6C;AAQpD,YAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,QAAA,MAAM,CAAC,YAAP,CAAoB,IAApB,kBAAmC,CAAnC;AACA,QAAA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;AACA,QAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;AACA,QAAA,MAAM,CAAC,WAAP,GAAqB,MAAM,CAAC,CAAD,CAA3B;AAEA,QAAA,OAAO,CAAC,WAAR,CAAoB,MAApB;AAEA,QAAA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC;AAAA,iBAAW,SAAA,CAAA,KAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,kCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1C,2BAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,WAAR,CAAP,CAAZ;;AAD0C;AAE1C,yBAAK,OAAL,GAAe,IAAf;AACA,yBAAK,IAAL;;AAH0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,EAAX;AAAA,SAAjC;AAhBoD;;AAOtD,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B;AAAA,cAAnB,CAAmB;AAc3B;;AAED,aAAO,OAAP;AACD;;;;;;AAxGH,OAAA,CAAA,YAAA,GAAA,YAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AACA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;IAEM;;;;;;;;;6BAGE;AACJ,WAAK,MAAL,GAAc,OAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,QAA9B,CAAd;AACA,UAAM,OAAO,GAAG,OAAA,CAAA,EAAA,CAAG,mBAAH,CAAuB,KAAvB,EAA8B,SAA9B,CAAhB;AACA,WAAK,MAAL,CAAY,WAAZ,CAAwB,OAAxB;AACA,aAAO,KAAK,MAAZ;AACD;;;6BAEK;AACJ,aAAO,KAAK,MAAZ;AACD;;;;;;AAWU,OAAA,CAAA,EAAA,GAAK;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAQJ;;;;;;;;;;;;AACV,gBAAA,UAAU,CAAC;AAAA,yBAAM,MAAM,CAAC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB,CAAN;AAAA,iBAAD,EAA8B,CAA9B,CAAV;;AAGA,oBAAI,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAAhB,KAA0B,SAA9B,EAAyC;AACvC,uBAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA9B;AACD,iBAFD,MAEO;AACL,uBAAK,QAAL,CAAc,MAAM,CAAC,UAAP,CAAkB,8BAAlB,EAAkD,OAAlD,GAA4D,MAA5D,GAAqE,OAAnF;AACD;;AAED,qBAAK,IAAL,GAAY,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAZ;AAEM,gBAAA,QAAQ,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAX;AACd,qBAAK,OAAL,GAAe,KAAK,GAAG,KAAK,CAAC,OAAT,GAAmB,MAAvC;AACA,qBAAK,QAAL,GAAgB,KAAK,GAAG,KAAK,CAAC,QAAT,GAAoB,MAAzC;AACA,qBAAK,MAAL,GAAc,IAAI,MAAJ,EAAd;AACM,gBAAA,QAAQ;AACZ,kBAAA,IAAI,EAAE,MAAA,CAAA,QADM;AAEZ,kBAAA,KAAK,EAAE,OAAA,CAAA,SAFK;AAGZ,kBAAA,QAAQ,EAAE,UAAA,CAAA,YAHE;AAIZ,kBAAA,MAAM,EAAE,QAAA,CAAA,UAJI;AAKZ,kBAAA,MAAM,EAAE,QAAA,CAAA,UALI;AAMZ,kBAAA,KAAK,EAAE,OAAA,CAAA,SANK;AAOZ,kBAAA,QAAQ,EAAE,UAAA,CAAA;AAPE;AASR,gBAAA,QAAQ,KAAK,GAAG,KAAK,CAAC,KAAT,GAAiB;AACpC,qBAAK,KAAL,GAAa,EAAb;;AACA,+CAA2B,MAAM,CAAC,OAAP,CAAe,KAAf,CAA3B,qCAAkD;AAAA,+EAAtC,IAAsC,0BAAhC,IAAgC;AAEhD,uBAAK,KAAL,CAAW,IAAX,IAAmB,IAAI,IAAJ,CAAS,KAAK,CAAC,IAAD,CAAd,CAAnB;AACD;;;AAED,uBAAM,KAAK,KAAL,EAAN;;;AAEA,qBAAK,IAAL,GAAY,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;AACA,qBAAK,IAAL,CAAU,GAAV,GAAiB,QAAQ,CAAC,cAAT,CAAwB,KAAxB,EAAoD,GAArE;AACA,qBAAK,IAAL,CAAU,MAAV,GAAmB,EAAnB;AAEA,gBAAA,QAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC,UAAA,CAAC;AAAA,yBAAI,KAAI,CAAC,SAAL,CAAe,CAAf,CAAJ;AAAA,iBAAtC;AACA,gBAAA,QAAQ,CAAC,gBAAT,CAA0B,aAA1B,EAAyC;AAAA,yBAAM,KAAI,CAAC,UAAL,CAAgB,QAAhB,CAAN;AAAA,iBAAzC;AACA,gBAAA,QAAQ,CAAC,gBAAT,CAA0B,cAA1B,EAA0C;AAAA,yBAAM,KAAI,CAAC,UAAL,CAAgB,QAAhB,CAAN;AAAA,iBAA1C;AACA,gBAAA,MAAM,CAAC,gBAAP,CAAwB,YAAxB,EAAuC;AAAA,yBAAM,KAAI,CAAC,YAAL,EAAN;AAAA,iBAAvC;AACA,gBAAA,MAAM,CAAC,gBAAP,CAAwB,cAAxB,EAAwC;AAAA,yBAAM,KAAI,CAAC,OAAL,EAAN;AAAA,iBAAxC;;AAEA,uBAAM,KAAK,UAAL,CAAgB,KAAK,OAArB,CAAN;;;;;;;;;AACD;AArDe;AAAA;AAAA,8BAuDQ;AAAA,UAAhB,QAAgB,uEAAL,KAAK;AACtB,UAAM,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAX,KAA8C,EAA5D;AACA,MAAA,KAAK,CAAC,OAAN,GAAgB,KAAK,OAArB;AACA,MAAA,KAAK,CAAC,QAAN,GAAiB,KAAK,QAAtB;AACA,MAAA,KAAK,CAAC,KAAN,GAAc,KAAK,CAAC,KAAN,IAAe,EAA7B;AACA,MAAA,KAAK,CAAC,KAAN,CAAY,KAAK,OAAjB,IAA4B,KAAK,KAAL,CAAW,KAAK,OAAhB,CAA5B;AACA,UAAI,QAAJ,EAAc,KAAK,CAAC,KAAN,CAAY,KAAK,QAAjB,IAA6B,KAAK,KAAL,CAAW,KAAK,QAAhB,CAA7B;AACd,MAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAAI,CAAC,SAAL,CAAe,KAAf,CAA9B;AACD;AA/De;AAAA;AAAA,+BAiEC,IAjED,EAiEe,IAjEf,EAiEyB;;;;;;;;;AAEvC,qBAAK,IAAL,CAAU,WAAV,CAAsB,KAAK,MAAL,CAAY,MAAZ,EAAtB;AACM,gBAAA,IAAI,KAAK,KAAL,CAAW,IAAX;;AACO,uBAAM,CAAC,CAAC,MAAF,CAAS,IAAT,CAAN;;;AAAX,gBAAA;AACN,qBAAK,IAAL,CAAU,WAAV,CAAsB,KAAK,MAAL,CAAY,MAAZ,EAAtB;AACA,qBAAK,IAAL,CAAU,WAAV,CAAsB,QAAtB;AACA,oBAAI,CAAC,CAAC,WAAN,EAAmB,CAAC,CAAC,WAAF;;;;;;;;;AAEpB;AA1Ee;AAAA;AAAA,+BA4EC,IA5ED,EA4Ee,IA5Ef,EA4E2B;;;;;;;;+BAEzC,KAAK;;AAAiB,uBAAM,KAAK,KAAL,CAAW,IAAX,EAAiB,MAAjB,CAAwB,IAAxB,CAAN;;;;;6BAAZ;;;;;;;;;AAEX;AAhFe;AAAA;AAAA,+BAkFC,IAlFD,EAkFe,IAlFf,EAkFyB;;;;;;;;sBAEnC,KAAK,OAAL,KAAiB;;;;;;AACnB,uBAAM,KAAK,UAAL,CAAgB,IAAhB,EAAsB,KAAK,QAA3B,CAAN;;;AACA,qBAAK,OAAL,GAAe,KAAK,QAApB;AACA,qBAAK,QAAL,GAAgB,IAAhB;;AACA,uBAAM,KAAK,UAAL,CAAgB,KAAK,OAArB,EAA8B,IAA9B,CAAN;;;;;;;;AAEA,uBAAM,KAAK,UAAL,CAAgB,KAAK,OAArB,EAA8B,IAA9B,CAAN;;;AACA,qBAAK,QAAL,GAAgB,KAAK,OAArB;AACA,qBAAK,OAAL,GAAe,IAAf;;AACA,uBAAM,KAAK,UAAL,CAAgB,IAAhB,EAAsB,IAAtB,CAAN;;;AAEF,qBAAK,OAAL,CAAa,IAAb;;;;;;;;;AACD;AAhGe;AAAA;AAAA,4BAkGL;;;;;;;;;;;;AACH,gBAAA,mBAAmB,SAAnB,gBAAmB;AAAA,yBAAW,SAAA,CAAA,MAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA;AAAA;AAAA,0CAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAClC,mCAAM,QAAA,CAAA,MAAA,CAAO,MAAP,CAAc,OAApB;;AADkC;AAElC,gCAAI,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,MAAnB,EAA2B;AACnB,8BAAA,EADmB,GACd,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,QAAA,CAAA,MAAA,CAAO,OAAP,CAAe,MAAf,GAAwB,CAAvC,EAA0C,IAD5B;AAAA,sDAEN,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,EAAd,CAFM,qEAElB,QAFkB;AAInB,8BAAA,IAJmB,GAIZ,IAAI,QAAA,CAAA,MAAJ,EAJY;AAKzB,8BAAA,IAAI,CAAC,IAAL,GAAY,QAAA,CAAA,MAAA,CAAO,IAAnB;AACA,8BAAA,IAAI,CAAC,IAAL;AAEA,8BAAA,OAAO,CAAC,GAAR,CAAY,oBAAZ;AACA,mCAAK,cAAL,CAAoB,QAApB,EAA8B,IAAI,CAAC,IAAnC;AACD;;AAZiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAA,EAAX;AAAA;;AAenB,gBAAA,OAAO,QAAQ,CAAC,QAAT,CAAkB,IAAlB,IAA0B,QAAQ,CAAC,QAAT,CAAkB,IAAlB,CAAuB,KAAvB,CAA6B,CAA7B;;oBAClC;;;;;AACG,gBAAA,WAAY,KAAK,KAAL,CAAW,KAAX,CAA+B;;qBAC7C;;;;;yCACuB,MAAA,CAAA,IAAA,CAAK,QAAL,CAAe,QAAqB,CAAC,IAArC,uEAAlB,sCAAU;AACjB,gBAAA,OAAO,CAAC,GAAR,CAAY,UAAZ;AACA,qBAAK,cAAL,CAAoB,QAApB,EAA8B,IAA9B;;;;;kDAEO,gBAAgB;;;;;;;yCAGA,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,IAAd,uEAAlB,uCAAU;;oBACZ,KAAK,KAAL,CAAW,SAAX,EAAqB,KAArB;;;;;kDACI,gBAAgB;;;AAEzB,gBAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACA,qBAAK,cAAL,CAAoB,SAApB,EAA8B,KAA9B;;;;;;;;;AAEH;AApIe;AAAA;AAAA,8BAsIA,CAtIA,EAsIgB;;;;;;;;;AAExB,gBAAA,MAAM,CAAC,CAAC;AACR,gBAAA,cAAc,KAAK,KAAL,CAAW,KAAK,OAAhB;;sBAChB,GAAG,KAAK,GAAR,IAAe,CAAC,CAAC;;;;;AACnB,gBAAA,CAAC,CAAC,cAAF;;AACA,uBAAM,KAAK,UAAL,CAAgB,QAAhB,CAAN;;;;;;;sBACS,eAAe;;;;;;AACxB,uBAAM,WAAW,CAAC,SAAZ,CAAuB,CAAvB,CAAN;;;;;;;;;AAEH;AAhJe;AAAA;AAAA,mCAkJE;;;;;;;;;;oBACX,QAAQ,CAAC,QAAT,CAAkB;;;;;;;;yCACE,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAQ,CAAC,QAAT,CAAkB,IAAlB,CAAuB,KAAvB,CAA6B,CAA7B,CAAd,uEAAlB,sCAAU;;oBACZ,KAAK,KAAL,CAAW,QAAX,EAAqB,IAArB;;;;;;;;AAED,gBAAA,UAAU,IAAI,KAAK,QAAA,CAAA,MAAA,CAAO;;AAC9B,oBAAI,CAAC,OAAL,EAAc;AACN,kBAAA,CADM,GACF,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,QAAA,CAAA,MAAA,CAAO,QAAzB,CADE;AAEZ,kBAAA,OAAO,GAAG,CAAC,CAAC,IAAF,KAAW,QAAQ,CAAC,IAApB,IAA4B,CAAC,CAAC,GAAF,KAAU,QAAQ,CAAC,GAA/C,IAAsD,CAAC,CAAC,IAAF,KAAW,QAAQ,CAAC,IAApF;AACD;;AACD,qBAAK,cAAL,CAAoB,QAApB,EAA8B,IAA9B,EAAoC,KAApC;;sBAEI,KAAK,OAAL,KAAiB;;;;;AAClB,qBAAK,KAAL,CAAW,KAAK,OAAhB,EAA0C,MAA1C;;;;;sBACQ,OAAO,IAAI,KAAK,OAAL,KAAiB;;;;;kDAC7B,KAAK,KAAL,CAAW,KAAK,OAAhB,EAAuC,OAAvC,CAA+C;AAAC,kBAAA,UAAU,EAAE;AAAb,iBAA/C;;;;;;;;;AAEX;AAnKe;AAAA;AAAA,0BAqKV,QArKU,EAqKuB,IArKvB,EAqKmC;AACjD,aAAO,CAAC,KAAK,CAAC,IAAD,CAAN,IAAgB,EAAE,QAAQ,CAAC,IAAT,IAAiB,QAAQ,CAAC,IAA1B,IAAkC,QAAQ,CAAC,GAA7C,CAAvB;AACD;AAvKe;AAAA;AAAA,mCAyKD,QAzKC,EAyK4B,IAzK5B,EAyKqD;AAAA,UAAV,GAAU,uEAAJ,IAAI;AACnE,MAAA,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB;AAAC,QAAA,QAAQ,EAAR,QAAD;AAAW,QAAA,IAAI,EAAJ;AAAX,OAAtB;AACA,MAAA,MAAM,CAAC,MAAP,CAAc,QAAA,CAAA,MAAA,CAAO,QAArB,EAA+B,QAA/B;AACA,MAAA,YAAY,CAAC,OAAb,CAAqB,UAArB,EAAiC,IAAI,CAAC,SAAL,CAAe,QAAA,CAAA,MAAA,CAAO,QAAtB,CAAjC;AACA,UAAI,IAAJ,EAAU,QAAA,CAAA,MAAA,CAAO,IAAP,GAAc,IAAd;AAEV,UAAM,EAAE,GAAG,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,QAAA,CAAA,MAAA,CAAO,QAArB,EAA+B,QAAA,CAAA,MAAA,CAAO,IAAtC,CAAX;AACA,MAAA,MAAM,CAAC,OAAP,CAAe,YAAf,CAA4B,IAA5B,EAAkC,EAAlC,aAA0C,EAA1C;;AAEA,UAAI,GAAG,IAAI,KAAK,OAAL,KAAiB,UAA5B,EAAwC;AACtC,YAAM,IAAI,GAAG,KAAK,KAAL,CAAW,KAAK,OAAhB,CAAb;AACA,QAAA,IAAI,CAAC,IAAL,CAAU,WAAV,GAAwB,EAAxB;AACA,QAAA,IAAI,CAAC,IAAL,CAAU,SAAV,CAAoB,MAApB,CAA2B,OAA3B;AACD;AACF;AAvLe;AAAA;AAAA,wCAyLI,IAzLJ,EAyLkB,EAzLlB,EAyL4B;AAC1C,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAhB;AACA,MAAA,OAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B,EAA3B;AACA,aAAO,OAAP;AACD;AA7Le;AAAA;AAAA,iCA+LH,IA/LG,EA+LuB,MA/LvB,EA+LmD,KA/LnD,EA+L4E;AAC1F,UAAM,MAAM,GAAG,KAAK,mBAAL,CAAyB,QAAzB,EAAmC,QAAnC,CAAf;AACA,MAAA,MAAM,CAAC,WAAP,CAAmB,IAAI,IAAI,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA3B;AACA,MAAA,MAAM,CAAC,WAAP,CAAmB,MAAM,IAAI,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA7B;AACA,MAAA,MAAM,CAAC,WAAP,CAAmB,KAAK,IAAI,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA5B;AACA,aAAO,MAAP;AACD;AArMe;AAAA;AAAA,qCAuMC,EAvMD,EAuM4B;AAC1C,UAAM,IAAI,GAAG,KAAK,mBAAL,CAAyB,KAAzB,EAAgC,MAAhC,CAAb;AACA,MAAA,IAAI,CAAC,WAAL,CAAiB,KAAK,IAAtB;AACA,MAAA,IAAI,CAAC,gBAAL,CAAsB,SAAtB,EAAiC,EAAjC;AACA,aAAO,IAAP;AACD;AA5Me;AAAA;AAAA,yCA8MK,OA9ML,EA8MyB;AACvC,MAAA,OAAO,CAAC,KAAR;AACA,MAAA,QAAQ,CAAC,WAAT,CAAqB,WAArB,EAAkC,KAAlC;AACA,UAAM,GAAG,GAAG,QAAQ,CAAC,YAAT,EAAZ;AACA,UAAI,GAAG,IAAI,CAAC,GAAG,CAAC,WAAhB,EAA6B,GAAG,CAAC,aAAJ;AAC9B;AAnNe;AAAA;AAAA,+BAqNL,OArNK,EAqNe;AAAA;;AAC7B,MAAA,OAAO,CAAC,gBAAR,CAAyB,MAAzB,EAAiC;AAAA,eAAM,UAAU,CAAC;AAAA,iBAAM,MAAI,CAAC,oBAAL,CAA0B,OAA1B,CAAN;AAAA,SAAD,EAA2C,EAA3C,CAAhB;AAAA,OAAjC;AACA,WAAK,oBAAL,CAA0B,OAA1B;AACD;AAxNe;AAAA;AAAA,6BA0NP,KA1NO,EA0NK;AACnB,MAAA,QAAQ,CAAC,eAAT,CAAyB,YAAzB,CAAsC,YAAtC,EAAoD,KAAK,CAAC,WAAN,EAApD;AACD;AA5Ne;AAAA;AAAA,mCA8ND,KA9NC,EA8NwB,KA9NxB,EA8NuC;AAAA;AAAA;AAAA;;AAAA;AACrD,6BAAgB,KAAhB,8HAAuB;AAAA,cAAZ,CAAY;AACrB,cAAM,CAAC,GAAG,CAAC,CAAC,OAAF,CAAU,QAAV,EAAoB,EAApB,CAAV;AACA,cAAM,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAX;AACA,cAAM,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,KAAP,CAAa,KAAb,CAAmB,CAAnB,EAAsB,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAAtC,EAA4C,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,IAA5D,EAAkE,KAAhF;AACA,cAAI,KAAK,GAAG,QAAA,CAAA,MAAA,CAAO,QAAP,CAAgB,KAA5B,EAAmC,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;AAEnC,cAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAT;AACA,cAAM,CAAC,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAV;AACA,cAAM,CAAC,GAAG,CAAC,CAAC,UAAF,CAAa,GAAb,cAAuB,CAAvB,YAAiC,CAAC,CAAC,QAAF,CAAW,GAAX,kBAAyB,CAAzB,kBAAsC,CAAtC,SAA3C;AACA,UAAA,CAAC,CAAC,WAAF,iBAAuB,CAAvB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,CAAf;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AACA,UAAA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAL;AACA,UAAA,EAAE,CAAC,WAAH,GAAiB,MAAA,CAAA,MAAA,CAAO,CAAP,EAAU,QAAA,CAAA,MAAA,CAAO,IAAjB,CAAjB;AACA,UAAA,EAAE,CAAC,WAAH,CAAe,EAAf;AAEA,UAAA,KAAK,CAAC,WAAN,CAAkB,EAAlB;AACD;AAlBoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBtD;AAjPe;AAAA;AAAA,iCAmPH,EAnPG,EAmPS,MAnPT,EAmP2C,QAnP3C,EAmP+D;AAC7E,UAAM,MAAM,GAAG,KAAK,mBAAL,CAAyB,MAAzB,EAAiC,EAAjC,CAAf;AACA,MAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,cAArB;AACA,MAAA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,YAArB;AACA,MAAA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,YAA5B;AAJ6E;AAAA;AAAA;;AAAA;AAK7E,8BAAgB,MAAhB,mIAAwB;AAAA,cAAf,GAAe;AACtB,cAAI,OAAO,GAAG,KAAd;;AACA,cAAI,KAAK,CAAC,OAAN,CAAc,GAAd,CAAJ,EAAwB;AACtB,YAAA,OAAO,GAAG,IAAV;AACA,YAAA,GAAG,GAAG,GAAG,CAAC,CAAD,CAAT;AACD;;AAED,cAAM,KAAK,GAAG,KAAK,mBAAL,CAAyB,OAAzB,YAAqC,EAArC,SAA0C,GAA1C,EAAd;AACA,UAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,MAApB;AACA,UAAA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,OAA3B;AACA,UAAA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,EAA3B;AACA,UAAA,KAAK,CAAC,YAAN,CAAmB,OAAnB,EAA4B,GAA5B;AACA,cAAI,OAAJ,EAAa,KAAK,CAAC,YAAN,CAAmB,SAAnB,EAA8B,SAA9B;AAEb,cAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,UAAA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,QAApB;AACA,UAAA,KAAK,CAAC,YAAN,CAAmB,KAAnB,YAA6B,EAA7B,SAAkC,GAAlC;AACA,UAAA,KAAK,CAAC,WAAN,GAAoB,GAAG,CAAC,WAAJ,EAApB;AAEA,UAAA,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,QAAQ,CAAC,IAAT,CAAc,KAAd,CAAhC;AAEA,UAAA,MAAM,CAAC,WAAP,CAAmB,KAAnB;AACA,UAAA,MAAM,CAAC,WAAP,CAAmB,KAAnB;AACD;AA5B4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6B7E,aAAO,MAAP;AACD;AAjRe;;AAAA;AAAA,MAAL;;;;;;;;ACpCb,OAAA,CAAA,6BAAA,CAAA;;AACA,IAAA,IAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAEA,IAAA,CAAA,EAAA,CAAG,MAAH;;;ACJA,IAAIA,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BJ,EAAAA,SAAS,CAACK,IAAV,CAAe,IAAf,EAAqBD,UAArB;AACA,OAAKE,GAAL,GAAW;AACTC,IAAAA,IAAI,EAAEN,MAAM,CAACC,MAAP,CAAcM,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsBI,IAAtB,CAA2BD,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTE,IAAAA,OAAO,EAAE,UAAUF,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuBG,IAAvB,CAA4BD,EAA5B;AACD;AATQ,GAAX;AAYAX,EAAAA,MAAM,CAACC,MAAP,CAAcM,OAAd,GAAwB,IAAxB;AACD;;AAEDP,MAAM,CAACC,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIY,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGhB,MAAM,CAACC,MAAP,CAAce,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASC,KAAT,EAAgB;AAC7BV,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIT,IAAI,GAAGmB,IAAI,CAACC,KAAL,CAAWF,KAAK,CAAClB,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACqB,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIC,OAAO,GAAG,KAAd;AACAtB,MAAAA,IAAI,CAACuB,MAAL,CAAYC,OAAZ,CAAoB,UAASC,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACM,EAA7B,CAA9B;;AACA,cAAIJ,SAAJ,EAAe;AACbL,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAItB,IAAI,CAACuB,MAAL,CAAYS,KAAZ,CAAkB,UAASP,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACJ,IAAN,KAAe,KAAf,IAAwBI,KAAK,CAACQ,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIZ,OAAJ,EAAa;AACXa,QAAAA,OAAO,CAACC,KAAR;AAEApC,QAAAA,IAAI,CAACuB,MAAL,CAAYC,OAAZ,CAAoB,UAAUC,KAAV,EAAiB;AACnCY,UAAAA,QAAQ,CAACR,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAhB,QAAAA,cAAc,CAACe,OAAf,CAAuB,UAAUc,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIxB,QAAQ,CAAC0B,MAAb,EAAqB;AAAE;AAC5B1B,QAAAA,QAAQ,CAAC0B,MAAT;AACD;AACF;;AAED,QAAIxC,IAAI,CAACqB,IAAL,KAAc,QAAlB,EAA4B;AAC1BL,MAAAA,EAAE,CAACyB,KAAH;;AACAzB,MAAAA,EAAE,CAAC0B,OAAH,GAAa,YAAY;AACvB5B,QAAAA,QAAQ,CAAC0B,MAAT;AACD,OAFD;AAGD;;AAED,QAAIxC,IAAI,CAACqB,IAAL,KAAc,gBAAlB,EAAoC;AAClCc,MAAAA,OAAO,CAACQ,GAAR,CAAY,2BAAZ;AAEAC,MAAAA,kBAAkB;AACnB;;AAED,QAAI5C,IAAI,CAACqB,IAAL,KAAc,OAAlB,EAA2B;AACzBc,MAAAA,OAAO,CAACU,KAAR,CAAc,kBAAkB7C,IAAI,CAAC6C,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8C9C,IAAI,CAAC6C,KAAL,CAAWE,KAAvE;AAEAH,MAAAA,kBAAkB;AAElB,UAAII,OAAO,GAAGC,kBAAkB,CAACjD,IAAD,CAAhC;AACAkD,MAAAA,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BJ,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASJ,kBAAT,GAA8B;AAC5B,MAAII,OAAO,GAAGE,QAAQ,CAACG,cAAT,CAAwB7D,UAAxB,CAAd;;AACA,MAAIwD,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACM,MAAR;AACD;AACF;;AAED,SAASL,kBAAT,CAA4BjD,IAA5B,EAAkC;AAChC,MAAIgD,OAAO,GAAGE,QAAQ,CAACK,aAAT,CAAuB,KAAvB,CAAd;AACAP,EAAAA,OAAO,CAACjB,EAAR,GAAavC,UAAb,CAFgC,CAIhC;;AACA,MAAIsD,OAAO,GAAGI,QAAQ,CAACK,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAGN,QAAQ,CAACK,aAAT,CAAuB,KAAvB,CAAjB;AACAT,EAAAA,OAAO,CAACW,SAAR,GAAoBzD,IAAI,CAAC6C,KAAL,CAAWC,OAA/B;AACAU,EAAAA,UAAU,CAACC,SAAX,GAAuBzD,IAAI,CAAC6C,KAAL,CAAWE,KAAlC;AAEAC,EAAAA,OAAO,CAACU,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EZ,OAAO,CAACY,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOV,OAAP;AAED;;AAED,SAASW,UAAT,CAAoBhE,MAApB,EAA4BoC,EAA5B,EAAgC;AAC9B,MAAI6B,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAKjC,EAAR,IAAekC,KAAK,CAACC,OAAN,CAAcF,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwBpC,EAAjE,EAAsE;AACpE8B,QAAAA,OAAO,CAACvD,IAAR,CAAawD,CAAb;AACD;AACF;AACF;;AAED,MAAInE,MAAM,CAACe,MAAX,EAAmB;AACjBmD,IAAAA,OAAO,GAAGA,OAAO,CAACO,MAAR,CAAeT,UAAU,CAAChE,MAAM,CAACe,MAAR,EAAgBqB,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO8B,OAAP;AACD;;AAED,SAASxB,QAAT,CAAkB1C,MAAlB,EAA0B8B,KAA1B,EAAiC;AAC/B,MAAImC,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAACnC,KAAK,CAACM,EAAP,CAAP,IAAqB,CAACpC,MAAM,CAACe,MAAjC,EAAyC;AACvC,QAAIL,EAAE,GAAG,IAAIgE,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6C5C,KAAK,CAACQ,SAAN,CAAgBC,EAA7D,CAAT;AACAT,IAAAA,KAAK,CAACC,KAAN,GAAc,CAACkC,OAAO,CAACnC,KAAK,CAACM,EAAP,CAAtB;AACA6B,IAAAA,OAAO,CAACnC,KAAK,CAACM,EAAP,CAAP,GAAoB,CAAC1B,EAAD,EAAKoB,KAAK,CAAC6C,IAAX,CAApB;AACD,GAJD,MAIO,IAAI3E,MAAM,CAACe,MAAX,EAAmB;AACxB2B,IAAAA,QAAQ,CAAC1C,MAAM,CAACe,MAAR,EAAgBe,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwBjC,MAAxB,EAAgCoC,EAAhC,EAAoC;AAClC,MAAI6B,OAAO,GAAGjE,MAAM,CAACiE,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAAC7B,EAAD,CAAR,IAAgBpC,MAAM,CAACe,MAA3B,EAAmC;AACjC,WAAOkB,cAAc,CAACjC,MAAM,CAACe,MAAR,EAAgBqB,EAAhB,CAArB;AACD;;AAED,MAAIvB,aAAa,CAACuB,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDvB,EAAAA,aAAa,CAACuB,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAIwC,MAAM,GAAG5E,MAAM,CAAC6E,KAAP,CAAazC,EAAb,CAAb;AAEAtB,EAAAA,cAAc,CAACH,IAAf,CAAoB,CAACX,MAAD,EAASoC,EAAT,CAApB;;AAEA,MAAIwC,MAAM,IAAIA,MAAM,CAACxE,GAAjB,IAAwBwE,MAAM,CAACxE,GAAP,CAAWG,gBAAX,CAA4BiE,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAOR,UAAU,CAAC9B,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAAV,CAAqC0C,IAArC,CAA0C,UAAU1C,EAAV,EAAc;AAC7D,WAAOH,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASQ,YAAT,CAAsB5C,MAAtB,EAA8BoC,EAA9B,EAAkC;AAChC,MAAIwC,MAAM,GAAG5E,MAAM,CAAC6E,KAAP,CAAazC,EAAb,CAAb;AACApC,EAAAA,MAAM,CAACM,OAAP,GAAiB,EAAjB;;AACA,MAAIsE,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACxE,GAAP,CAAWC,IAAX,GAAkBL,MAAM,CAACM,OAAzB;AACD;;AAED,MAAIsE,MAAM,IAAIA,MAAM,CAACxE,GAAjB,IAAwBwE,MAAM,CAACxE,GAAP,CAAWI,iBAAX,CAA6BgE,MAAzD,EAAiE;AAC/DI,IAAAA,MAAM,CAACxE,GAAP,CAAWI,iBAAX,CAA6BqB,OAA7B,CAAqC,UAAUkD,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAAC/E,MAAM,CAACM,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAON,MAAM,CAAC6E,KAAP,CAAazC,EAAb,CAAP;AACApC,EAAAA,MAAM,CAACoC,EAAD,CAAN;AAEAwC,EAAAA,MAAM,GAAG5E,MAAM,CAAC6E,KAAP,CAAazC,EAAb,CAAT;;AACA,MAAIwC,MAAM,IAAIA,MAAM,CAACxE,GAAjB,IAAwBwE,MAAM,CAACxE,GAAP,CAAWG,gBAAX,CAA4BiE,MAAxD,EAAgE;AAC9DI,IAAAA,MAAM,CAACxE,GAAP,CAAWG,gBAAX,CAA4BsB,OAA5B,CAAoC,UAAUkD,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","export class Store {\n  private readonly db: Promise<IDBDatabase>;\n\n  static async setup(dbName = 'keyval', storeNames = ['keyval']) {\n    return new Promise((resolve, reject) => {\n      const openreq = indexedDB.open(dbName, 1);\n      openreq.onerror = () => reject(openreq.error);\n      openreq.onsuccess = () => resolve(openreq.result);\n      openreq.onupgradeneeded = () => {\n        for (const storeName of storeNames) {\n          openreq.result.createObjectStore(storeName);\n        }\n      };\n    });\n  }\n\n  constructor(dbName = 'keyval', readonly storeName = 'keyval') {\n    this.db = new Promise((resolve, reject) => {\n      const openreq = indexedDB.open(dbName, 1);\n      openreq.onerror = () => reject(openreq.error);\n      openreq.onsuccess = () => resolve(openreq.result);\n\n      // First time setup: create an empty object store\n      openreq.onupgradeneeded = () => {\n        openreq.result.createObjectStore(storeName);\n      };\n    });\n  }\n\n  get<T>(key: string): Promise<T> {\n    let req: IDBRequest;\n    return this.withIDBStore('readonly', store => {\n      req = store.get(key);\n    }).then(() => req.result);\n  }\n\n  set<T>(key: string, value: T): Promise<void> {\n    return this.withIDBStore('readwrite', store => {\n      store.put(value, key);\n    });\n  }\n\n  private withIDBStore(\n    type: IDBTransactionMode,\n    callback: (store: IDBObjectStore) => void\n  ): Promise<void> {\n    return this.db.then(\n      db =>\n        new Promise<void>((resolve, reject) => {\n          const transaction = db.transaction(this.storeName, type);\n          transaction.oncomplete = () => resolve();\n          transaction.onabort = transaction.onerror = () => reject(transaction.error);\n          callback(transaction.objectStore(this.storeName));\n        })\n    );\n  }\n}\n","import { Dictionary } from './dict';\n\nexport class Trie {\n  parent: Trie | null;\n  children: Trie[];\n  isWord: string | boolean;\n\n  private constructor(parent: Trie | null, value: string) {\n    this.parent = parent;\n    this.children = new Array(26);\n    this.isWord = false;\n    if (parent !== null) parent.children[value.charCodeAt(0) - 65] = this;\n  }\n\n  static create(dict: Dictionary) {\n    const root = new Trie(null, '');\n    for (const word in dict) {\n      let current = root;\n      for (let i = 0; i < word.length; i++) {\n        const letter = word[i];\n        const ord = letter.charCodeAt(0);\n        let next = current.children[ord - 65];\n        if (next === undefined) next = new Trie(current, letter);\n        current = next;\n      }\n      current.isWord = dict[word].dict || true;\n    }\n    return root;\n  }\n}\n","export interface Dictionary {\n  [word: string]: Entry;\n}\n\nexport interface Entry {\n  defn: string;\n\n  freq?: number;\n  dict?: string;\n\n  n?: number;\n  o?: number;\n  b?: number;\n}\n\nexport type Type = 'NWL' | 'ENABLE' | 'CSW';\n\n// TODO: linkify? recurse?\nexport function define(word: string, dict: Dictionary) {\n  const val = dict[word];\n  if (!val) return '';\n  const re = /[{<](.*?)?=.*?[>}]/g;\n  let def = dict[word].defn;\n  if (!def) return '';\n  const match = re.exec(def);\n  if (match) {\n    const m = dict[match[1].toUpperCase()];\n    if (!m || !m.defn) {\n      def = match[1];\n    } else {\n      def = `${match[1]} (${m.defn})`;\n    }\n  }\n  return def\n    .replace(/\\{(.*?)=.*?\\}/g, '$1')\n    .replace(/<(.*?)=.*?>/g, '$1')\n    .replace(/\\s*?\\[.*?\\]\\s*?/g, '');\n}\n\nexport function isValid(word: string, dict: Dictionary, type: Type) {\n  const val = dict[word];\n  return val && (!val.dict || val.dict.includes(type.charAt(0)));\n}\n\nexport function order(words: string[]) {\n  const ordered = [];\n\n  const anadromes = new Set();\n  for (const w of words) {\n    // prettier-ignore\n    const r = w.split('').reverse().join('');\n    if (r !== w && words.includes(r)) {\n      const key = `${[w, r].sort().join(' ')}`;\n      if (!anadromes.has(key)) {\n        anadromes.add(key);\n        ordered.push(`(${w}`, `${r})`);\n      }\n    } else {\n      ordered.push(w);\n    }\n  }\n  return ordered;\n}\n","import { Dice } from './settings';\nimport { Dictionary, Type, isValid, order } from './dict';\n\nexport interface Data {\n  New: DiceEntry;\n  Old: DiceEntry;\n  Big: DiceEntry;\n  freqs: number[];\n  total: number;\n}\n\ninterface DiceEntry {\n  NWL: TypeEntry;\n  ENABLE: TypeEntry;\n  CSW: TypeEntry;\n}\n\ninterface TypeEntry {\n  words: number[];\n  anagrams: number[];\n  total: number;\n}\n\nexport type Grade = 'A' | 'B' | 'C' | 'D' | ' ';\n\nexport class Stats {\n  private readonly dict: Dictionary;\n  private readonly percentiles: Data;\n  // NOTE: contains ALL words!\n  readonly mixed: { [anagram: string]: string[] };\n\n  constructor(percentiles: Data, dict: Dictionary) {\n    this.dict = dict;\n    this.percentiles = percentiles;\n\n    this.mixed = {};\n    for (const word in dict) {\n      const anagram = Stats.toAnagram(word);\n      this.mixed[anagram] = this.mixed[anagram] || [];\n      this.mixed[anagram].push(word);\n    }\n  }\n\n  anagrams(word: string, type: Type, min?: number) {\n    const a = Stats.toAnagram(word);\n    const group = this.mixed[a];\n\n    const result: { words: string[]; n?: number; o?: number; b?: number } = { words: [] };\n    if (!group) return result;\n\n    for (const w of group) {\n      if (min && w.length < min) continue;\n      if (isValid(w, this.dict, type)) {\n        result.words.push(w);\n        const v = this.dict[w];\n        for (const d of ['n', 'o', 'b'] as Array<'n' | 'o' | 'b'>) {\n          if (v[d]) result[d] = (result[d] || 0) + v[d]!;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  stats(word: string, dice: Dice = 'New', type: Type = 'NWL') {\n    const val = this.dict[word];\n    const a = this.anagrams(word, type);\n    if (!isValid(word, this.dict, type) || !a.words.length) {\n      return { grade: ' ' as Grade };\n    }\n\n    const pf = val.freq === undefined ? -1 : this.percentiles.freqs.findIndex(v => v <= val.freq!);\n    const f = pf === -1 ? ' ' : gradeFreq(pf);\n\n    const s = (this.percentiles[dice] as DiceEntry)[type];\n    const d = dice.charAt(0).toLowerCase() as 'n' | 'o' | 'b';\n\n    const vw = val[d] || 0;\n    const pw = s.words.findIndex((v: number) => v <= vw);\n    const rw = rank(pw);\n\n    const va = a[d] || 0;\n    const pa = s.anagrams.findIndex((v: number) => v <= va);\n    const ra = rank(pa);\n\n    const g = [' ', 'A', 'B', 'C', 'D'][Math.ceil((rw + ra) / 2)] as Grade;\n\n    const pct = (v: number) => Math.round(((100 * v) / s.total) * 1000) / 1000;\n    const result: {\n      grade: Grade;\n      freq?: number;\n      word?: { p: number; v: number };\n      anagram?: { p: number; v: number };\n    } = { grade: g < f ? f : g };\n    if (pf > -1) result.freq = pf;\n    if (pw > -1) result.word = { p: pw, v: pct(val.freq!) };\n    if (pa > -1) result.anagram = { p: pa, v: pct(va) };\n    return result;\n  }\n\n  history(games: Array<[{ [w: string]: any }, Set<string>]>, dice: Dice, type: Type) {\n    const d = dice.charAt(0).toLowerCase() as 'n' | 'o' | 'b';\n    // prettier-ignore\n    const reverse = (w: string) => w.split('').reverse().join('');\n\n    const ratio: { [k: string]: number } = {};\n    const anadromes: { [k: string]: number } = {};\n    const anagrams: { [k: string]: number } = {};\n\n    const all: { [k: string]: number } = {};\n    const either: { [k: string]: number } = {};\n    const found: { [k: string]: number } = {};\n    let n = games.length;\n    for (const [possible, played] of games) {\n      const as: { [k: string]: string[] } = {};\n      for (const w in possible) {\n        all[w] = (all[w] || 0) + 1;\n        const a = Stats.toAnagram(w);\n        as[a] = as[a] || [];\n        as[a].push(w);\n\n        if (played.has(w)) {\n          found[w] = (found[w] || 0) + 1;\n\n          const r = reverse(w);\n          if (r !== w && possible[r]) {\n            const k = [w, r].sort()[0];\n            if (!played.has(r)) {\n              either[k] = (either[k] || 0) + 1;\n              // FIXME: why does this not remove NOD/DON in Big dice?\n              anadromes[k] = (anadromes[w] || 0) + (1 / n) * this.dict[k][d]!;\n            } else if (w === k) {\n              either[k] = (either[k] || 0) + 1;\n            }\n          }\n        } else {\n          ratio[w] = (ratio[w] || 0) + (1 / n) * this.dict[w][d]!;\n        }\n      }\n\n      for (const a in as) {\n        const group = as[a];\n        if (group.length <= 1) continue;\n        const f = group.filter(w => played.has(w)).length / group.length;\n        if (!f) continue;\n        const w = group.reduce((acc, w) => acc + this.dict[w][d]!, 0) / group.length;\n        anagrams[a] = (anagrams[a] || 0) + (1 / n) * w * (1 - f);\n      }\n      n--;\n    }\n\n    const K = Math.log(games.length);\n    for (const w in all) {\n      ratio[w] += K * this.dict[w][d]! * Math.pow(1 - (found[w] || 0) / all[w], 2);\n      if (anadromes[w]) {\n        const r = reverse(w);\n        const [a, b] = (found[r] || 0) > (found[w] || 0) ? [w, r] : [r, w];\n        anadromes[w] += K * this.dict[w][d]! * 2 * Math.pow(1 - (found[a] || 0) / (all[b] || 1), 2);\n      }\n\n      const a = Stats.toAnagram(w);\n      if (anagrams[a] && all[w]) {\n        anagrams[w] += K * this.dict[w][d]! * Math.pow(1 - (found[w] || 0) / all[w], 2);\n      }\n    }\n\n    const sorted = (obj: { [k: string]: number }, limit: number) =>\n      Object.entries(obj)\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, limit);\n\n    return {\n      words: sorted(ratio, 100).map(e => ({\n        w: e[0],\n        found: found[e[0]] || 0,\n        all: all[e[0]] || 0,\n      })),\n      anadromes: sorted(anadromes, 50).map(e => {\n        const k = e[0];\n        const r = reverse(k);\n        const [n, d] = (found[r] || 0) > (found[k] || 0) ? [k, r] : [r, k];\n        return { n, fn: found[n] || 0, d, fd: found[d] || 0, e: either[k] || 0 };\n      }),\n      anagrams: sorted(anagrams, 50).map(e => {\n        const group = [];\n        // FIXME: should pass in min length and 3 letter words should have B scores\n        for (const r of order(this.anagrams(e[0], type).words)) {\n          const w = r.replace(/[^A-Z]/, '');\n          group.push({ raw: r, found: found[w] || 0, all: all[w] || 0 });\n        }\n        return group;\n      }),\n    };\n  }\n\n  static toAnagram(word: string) {\n    // prettier-ignore\n    return word.split('').sort().join('');\n  }\n}\n\nfunction gradeFreq(p: number) {\n  if (p >= 99) return ' ';\n  if (p >= 20) return 'A';\n  if (p >= 10) return 'B';\n  if (p >= 5) return 'C';\n  return 'D';\n}\n\nfunction rank(p: number) {\n  if (p >= 75) return 0;\n  if (p >= 50) return 1;\n  if (p >= 25) return 2;\n  if (p >= 10) return 3;\n  return 4;\n}\n","// tslint:disable:no-var-keyword prefer-const\nimport {Store} from '../store';\nimport {Settings} from '../settings';\nimport {Trie} from '../trie';\nimport {Dictionary} from '../dict';\nimport {GameJSON} from '../game';\nimport {Stats, Data} from '../stats';\n\nconst STORE = new Store('db', 'store');\nconst DEFAULTS: Settings = {dice: 'New', min: 3, dict: 'NWL', grade: 'C', display: 'Show'};\nconst fetchJSON = (url: string) => fetch(url, {mode: 'no-cors'}).then(j => j.json());\n// TODO: TRIE, STATS, GAMES, and the TrainingPool creation\n// need to be moved to a background worker and transferred in.\nexport const global: {\n  SETTINGS: Settings;\n  STORE: Store;\n  LIMIT: number;\n  DICT: Dictionary;\n  STATS: Stats;\n  HISTORY: GameJSON[];\n  TRIE: Trie;\n  GAMES: Array<[{ [word: string]: any }, Set<string>]> | undefined;\n  SEED: number;\n  LOADED: {\n    DICT: Promise<void>;\n    TRIE: () => Promise<void>;\n    STATS: () => Promise<void>;\n    HISTORY: Promise<void>;\n    TRAINING: Promise<void>;\n  };\n} = {\n  SETTINGS: JSON.parse(localStorage.getItem('settings')!) as Settings || DEFAULTS,\n  STORE,\n  LIMIT: 500,\n  DICT: undefined as unknown as Dictionary,\n  STATS: undefined as unknown as Stats,\n  HISTORY: undefined as unknown as GameJSON[],\n  TRIE: undefined as unknown as Trie,\n  GAMES: undefined as Array<[{ [word: string]: any }, Set<string>]> | undefined,\n  SEED: 0,\n  LOADED: {\n    DICT: fetchJSON('data/dict.json').then(d => { global.DICT = d; }),\n    TRIE: async () => {\n      if (global.TRIE) return;\n      await global.LOADED.DICT;\n      global.TRIE = Trie.create(global.DICT);\n    },\n    STATS: async () => {\n      if (global.STATS) return;\n      let stats: Data;\n      await Promise.all([\n        global.LOADED.DICT,\n        fetchJSON('data/stats.json').then(s => { stats = s; }),\n      ]);\n      global.STATS = new Stats(stats!, global.DICT);\n    },\n    HISTORY: STORE.get('history').then(h => { global.HISTORY = h as GameJSON[] || []}),\n    TRAINING: Store.setup('training', ['NWL', 'ENABLE', 'CSW']) as Promise<void>,\n  },\n};\n\n  // @ts-ignore\n  window.global = global;","export class Random {\n  /* private */ seed: number;\n\n  constructor(n = 4 /* https://xkcd.com/221/ */) {\n    // Hash: https://burtleburtle.net/bob/hash/integer.html\n    n = n ^ 61 ^ (n >>> 16);\n    n = n + (n << 3);\n    n = n ^ (n >>> 4);\n    n = Math.imul(n, 0x27d4eb2d);\n    n = n ^ (n >>> 15);\n    this.seed = n >>> 0;\n  }\n\n  // Mulberry32: https://gist.github.com/tommyettinger/46a874533244883189143505d203312c\n  next(min?: number, max?: number) {\n    if (min) min = Math.floor(min);\n    if (max) max = Math.floor(max);\n\n    let z = (this.seed += 0x6d2b79f5 | 0);\n    z = Math.imul(z ^ (z >>> 15), z | 1);\n    z = z ^ (z + Math.imul(z ^ (z >>> 7), z | 61));\n    z = (z ^ (z >>> 14)) >>> 0;\n    const n = z / 2 ** 32;\n\n    if (min === undefined) return n;\n    if (!max) return Math.floor(n * min);\n    return Math.floor(n * (max - min)) + min;\n  }\n\n  shuffle<T>(arr: T[]) {\n    for (let i = arr.length - 1; i > 0; i--) {\n      const j = Math.floor(this.next() * (i + 1));\n      [arr[i], arr[j]] = [arr[j], arr[i]];\n    }\n    return arr;\n  }\n\n  sample<T>(arr: T[], remove = false) {\n    if (arr.length === 0) throw new RangeError('Cannot sample an empty array');\n    const index = this.next(arr.length);\n    const val = arr[index];\n    if (remove) {\n      arr[index] = arr[arr.length - 1];\n      arr.pop();\n    }\n    if (val === undefined && !Object.prototype.hasOwnProperty.call(arr, index)) {\n      throw new RangeError(`Cannot sample a sparse array`);\n    }\n    return val;\n  }\n}\n","import { Dictionary, Type, define } from './dict';\nimport { Random } from './random';\nimport { Settings, Dice, MinLength } from './settings';\nimport { Trie } from './trie';\nimport { Stats, Grade } from './stats';\n\n// prettier-ignore\nconst NEW_DICE = [\n  'AAEEGN', 'ELRTTY', 'AOOTTW', 'ABBJOO',\n  'EHRTVW', 'CIMOTU', 'DISTTY', 'EIOSST',\n  'DELRVY', 'ACHOPS', 'HIMNQU', 'EEINSU',\n  'EEGHNW', 'AFFKPS', 'HLNNRZ', 'DEILRX',\n];\n\n// prettier-ignore\nconst OLD_DICE = [\n  'AACIOT', 'AHMORS', 'EGKLUY', 'ABILTY',\n  'ACDEMP', 'EGINTV', 'GILRUW', 'ELPSTU',\n  'DENOSW', 'ACELRS', 'ABJMOQ', 'EEFHIY',\n  'EHINPS', 'DKNOTU', 'ADENVZ', 'BIFORX',\n];\n\n// prettier-ignore\nconst BIG_DICE = [\n  'AAAFRS', 'AAEEEE', 'AAFIRS', 'ADENNN', 'AEEEEM',\n  'AEEGMU', 'AEGMNN', 'AFIRSY', 'BJKQXZ', 'CCNSTW',\n  'CEIILT', 'CEILPT', 'CEIPST', 'DDLNOR', 'DHHLOR',\n  'DHHNOT', 'DHLNOR', 'EIIITT', 'EMOTTT', 'ENSSSU',\n  'FIPRSY', 'GORRVW', 'HIPRRY', 'NOOTUW', 'OOOTTU',\n];\n\nexport const SUFFIXES = ['S', 'ER', 'ED', 'ING'];\n\nexport interface GameSettings {\n  dice: Dice;\n  dict: Type;\n  min?: MinLength;\n}\n\nexport interface GameJSON {\n  seed: string;\n  start: number;\n  expired: number | null;\n  words: { [word: string]: number };\n  goal: {\n    S: number;\n    A: number;\n    B: number;\n    C: number;\n    D: number;\n  };\n}\n\nexport class Game {\n  private readonly trie: Trie;\n  private readonly dict: Dictionary;\n  private readonly stats: Stats;\n\n  private readonly dice: string[];\n\n  readonly seed: number;\n  readonly board: string[];\n  readonly random: Random;\n  readonly settings: Omit<Settings, 'grade'>;\n  readonly size: number;\n  readonly possible: { [word: string]: Array<[number, number]> };\n  readonly id: string;\n  readonly played: { [word: string]: number };\n  readonly overtime: Set<string>;\n  readonly score: { regular: number; overtime: number };\n  readonly start: number;\n\n  expired: number | null;\n  private totals_:\n    | {\n        s: number;\n        a: number;\n        b: number;\n        c: number;\n        d: number;\n        anagrams: { [anagram: string]: string[] };\n      }\n    | undefined;\n\n  constructor(\n    trie: Trie,\n    dict: Dictionary,\n    stats: Stats,\n    random: Random,\n    settings: GameSettings = { dice: 'New', dict: 'NWL' }\n  ) {\n    this.trie = trie;\n    this.dict = dict;\n    this.stats = stats;\n\n    this.dice = settings.dice === 'Big' ? BIG_DICE : settings.dice === 'Old' ? OLD_DICE : NEW_DICE;\n    this.size = Math.sqrt(this.dice.length);\n    settings.min = (settings.min || this.size - 1) as MinLength;\n    this.settings = settings as Settings;\n\n    this.random = random;\n    this.seed = this.random.seed;\n    this.board = [];\n    for (const die of this.dice) {\n      const c = this.random.sample(die.split(''));\n      this.board.push(c === 'Q' ? 'Qu' : c);\n    }\n    this.random.shuffle(this.board);\n    this.possible = this.solve();\n\n    this.id = Game.encodeID(this.settings, this.seed);\n    this.played = {};\n    this.overtime = new Set();\n    this.score = { regular: 0, overtime: 0 };\n\n    this.start = +new Date();\n    this.expired = null; // set to timestamp!\n  }\n\n  play(word: string) {\n    if (!this.played[word] && word.length >= this.settings.min) {\n      if (this.possible[word]) {\n        this.played[word] = +new Date();\n        const score = Game.score(word);\n        if (this.expired) this.overtime.add(word);\n\n        const bucket = this.expired ? 'overtime' : 'regular';\n        this.score[bucket] += score;\n        return score;\n      } else {\n        this.played[word] = -new Date();\n        if (this.expired) this.overtime.add(word);\n      }\n    }\n    return 0;\n  }\n\n  toJSON(): GameJSON {\n    return {\n      seed: this.id,\n      start: this.start,\n      expired: this.expired,\n      words: this.played,\n      goal: {\n        S: this.totals.s,\n        A: this.totals.a,\n        B: this.totals.b,\n        C: this.totals.c,\n        D: this.totals.d,\n      },\n    };\n  }\n\n  static encodeID(s: Omit<Settings, 'grade'>, seed: number) {\n    return `${s.dice.charAt(0)}${s.min}${s.dict.charAt(0)}${seed}`;\n  }\n\n  static decodeID(id: string): [Partial<GameSettings>, number] {\n    const d = id.charAt(0);\n    const dice = d === 'N' ? 'New' : d === 'O' ? 'Old' : d === 'B' ? 'Big' : undefined;\n    const min = Number(id.charAt(1)) as MinLength;\n    const t = id.charAt(2);\n    const dict = t === 'N' ? 'NWL' : t === 'E' ? 'ENABLE' : t === 'C' ? 'CSW' : undefined;\n\n    const num = id.slice(3);\n    let seed = num.length ? Number(num) : NaN;\n    if (String(seed) !== num) seed = NaN;\n\n    return [{ dice, min, dict }, seed];\n  }\n\n  static fromJSON(json: GameJSON, trie: Trie, dict: Dictionary, stats: Stats) {\n    const [settings, seed] = Game.decodeID(json.seed);\n    const random = new Random();\n    random.seed = seed;\n    const game = new Game(trie, dict, stats, random, settings as GameSettings);\n\n    // @ts-ignore readonly\n    game.start = json.start;\n    // @ts-ignore readonly\n    game.expired = json.expired;\n    // @ts-ignore readonly\n    game.played = json.words;\n\n    const score = { regular: 0, overtime: 0 };\n    for (const w in game.played) {\n      const s = Game.score(w);\n      if (!game.expired || game.played[w] <= game.expired) {\n        score.regular += s;\n      } else {\n        score.overtime += s;\n      }\n    }\n\n    // @ts-ignore readonly\n    game.score = score;\n\n    return game;\n  }\n\n  get totals() {\n    if (this.totals_) return this.totals_;\n\n    const anagrams: { [anagram: string]: string[] } = {};\n    const grades: { [grade: string]: number } = {};\n    for (const word in this.possible) {\n      const anagram = Stats.toAnagram(word);\n      anagrams[anagram] = anagrams[anagram] || [];\n      anagrams[anagram].push(word);\n\n      const g = this.stats.stats(word, this.settings.dice, this.settings.dict).grade;\n      grades[g] = (grades[g] || 0) + Game.score(word);\n    }\n\n    const d = grades.D || 0;\n    const c = d + (grades.C || 0);\n    const b = c + (grades.B || 0);\n    const a = b + (grades.A || 0);\n    const s = a + (grades[' '] || 0);\n\n    return (this.totals_ = { s, a, b, c, d, anagrams });\n  }\n\n  progress() {\n    let total = 0;\n    let invalid = 0;\n    let valid = 0;\n    const suffixes: { [suffixed: string]: string } = {};\n    const subwords = new Set<string>();\n\n    const anagrams: { [anagram: string]: string[] } = {};\n    for (const word in this.played) {\n      total++;\n      if (this.played[word] < 0) {\n        invalid++;\n        continue;\n      }\n      valid++;\n\n      for (const suffix of SUFFIXES) {\n        let suffixed;\n        if (['ER', 'ED'].includes(suffix) && word.endsWith('E')) {\n          suffixed = `${word}${suffix.charAt(1)}`;\n        } else if (suffix === 'S' && (word.endsWith('S') || word.endsWith('X'))) {\n          suffixed = `${word}ES`;\n        } else {\n          suffixed = `${word}${suffix}`;\n        }\n        if (this.possible[suffixed] && !this.played[suffixed]) suffixes[suffixed] = word;\n      }\n\n      const anagram = Stats.toAnagram(word);\n      anagrams[anagram] = anagrams[anagram] || [];\n      anagrams[anagram].push(word);\n\n      for (const sub of subs(word, this.settings.min)) {\n        if (this.possible[sub] && !this.played[sub]) subwords.add(sub);\n      }\n    }\n\n    let missing: string[] = [];\n    for (const anagram in anagrams) {\n      missing = missing.concat(\n        this.totals.anagrams[anagram].filter(w => !anagrams[anagram].includes(w))\n      );\n    }\n\n    const words = new Set([...Object.keys(suffixes), ...subwords, ...missing]);\n    const score =\n      this.score.regular +\n      this.score.overtime +\n      Array.from(words).reduce((sum, w) => Game.score(w) + sum, 0);\n\n    return {\n      invalid,\n      valid,\n      total,\n      score,\n      suffixes,\n      subwords: subwords.size,\n      anagrams: missing.length,\n      missing: words,\n    };\n  }\n\n  state() {\n    const progress = this.progress();\n    const gr = (w: string) => this.stats.stats(w, this.settings.dice, this.settings.dict).grade;\n    // missing > grade > length > anagrams > alphabetical\n    const fn = (a: string, b: string) => {\n      const ma = progress.missing.has(a);\n      const mb = progress.missing.has(b);\n      if (ma && !mb) return -1;\n      if (mb && !ma) return 1;\n\n      const ga = gr(a);\n      const gb = gr(b);\n      if (ga > gb) return -1;\n      if (gb > ga) return 1;\n\n      if (a.length > b.length) return 1;\n      if (b.length > a.length) return -1;\n\n      return Stats.toAnagram(a).localeCompare(Stats.toAnagram(b));\n    };\n\n    const augment = (w: string) => ({\n      word: w,\n      grade: gr(w),\n      defn: define(w, this.dict),\n    });\n\n    return {\n      played: Array.from(Object.entries(this.played))\n        .sort((a, b) => Math.abs(a[1]) - Math.abs(b[1]))\n        .map(e => {\n          const w = e[0];\n          const v: {\n            word: string;\n            grade: Grade;\n            defn: string;\n            invalid?: boolean;\n            overtime?: boolean;\n          } = augment(w);\n          if (e[1] < 0) v.invalid = true;\n          if (this.overtime.has(w)) v.overtime = true;\n          return v;\n        }),\n      remaining: Object.keys(this.possible)\n        .filter(w => !this.played[w])\n        .sort(fn)\n        .map(w => {\n          const v: {\n            word: string;\n            grade: Grade;\n            defn: string;\n            missing?: boolean;\n            root?: string;\n          } = augment(w);\n          if (progress.missing.has(w)) v.missing = true;\n          if (progress.suffixes[w]) v.root = progress.suffixes[w];\n          return v;\n        }),\n      progress,\n      totals: this.totals,\n    };\n  }\n\n  solve() {\n    const words: { [word: string]: Array<[number, number]> } = {};\n    const queue: Array<[number, number, string, Trie, Array<[number, number]>]> = [];\n    for (let y = 0; y < this.size; y++) {\n      for (let x = 0; x < this.size; x++) {\n        let c = this.board[this.size * y + x];\n        const ord = c.charCodeAt(0);\n        let node = this.trie.children[ord - 65];\n        if (c === 'Qu' && node !== undefined) {\n          c = 'QU';\n          node = node.children[20]; // ('U' = 85) - 65\n        }\n        if (node !== undefined) {\n          queue.push([x, y, c, node, [[x, y]]]);\n        }\n      }\n    }\n    while (queue.length !== 0) {\n      const [x, y, s, node, h] = queue.pop()!;\n      // prettier-ignore\n      for (const [dx, dy] of [[1, 0], [1, -1], [0, -1], [-1, -1], [-1, 0], [-1, 1], [0, 1], [1, 1]]) {\n        const [x2, y2] = [x + dx, y + dy];\n        if (h.find(e => e[0] === x2 && e[1] === y2) !== undefined) continue;\n        if (0 <= x2 && x2 < this.size && 0 <= y2 && y2 < this.size) {\n          const hist = h.slice();\n          hist.push([x2, y2]);\n\n          let c = this.board[this.size * y2 + x2];\n          let node2 = node.children[c.charCodeAt(0) - 65];\n          if (c === 'Qu' && node2 !== undefined) {\n            c = 'QU';\n            node2 = node2.children[20]; // ('U' = 85) - 65\n          }\n          if (node2 !== undefined) {\n            const s2 = s + c;\n            const isWord = typeof node2.isWord === 'boolean' ?\n              node2.isWord : node2.isWord.includes(this.settings.dict.charAt(0));\n            if (isWord && s2.length >= this.settings.min) words[s2] = hist;\n            queue.push([x2, y2, s2, node2, hist]);\n          }\n        }\n      }\n    }\n    return words;\n  }\n\n  static score(word: string) {\n    if (word.length < 3) return 0;\n    if (word.length <= 4) return 1;\n    if (word.length === 5) return 2;\n    if (word.length === 6) return 3;\n    if (word.length === 7) return 5;\n    /* if (word.length >= 8) */ return 11;\n  }\n}\n\nfunction subs(word: string, min: number) {\n  const words = new Set<string>();\n\n  for (let b = 0; b < word.length; b++) {\n    for (let e = 1; e <= word.length - b; e++) {\n      const s = word.substr(b, e);\n      if (s.length >= min) words.add(s);\n    }\n  }\n\n  return words;\n}\n","export interface TimerJSON {\n  duration: number;\n  elapsed: number;\n}\n\nexport class Timer {\n  private readonly display: HTMLElement;\n  private readonly duration: number;\n\n  private elapsed: number;\n  private interval: number | null;\n  private begin: number | undefined;\n  private last: number | undefined;\n  private expireFn: (() => void) | null;\n  private updateFn: (() => void) | null;\n\n  constructor(\n    display: HTMLElement,\n    duration: number,\n    elapsed = 0,\n    expireFn: (() => void) | null = null,\n    updateFn: (() => void) | null = null\n  ) {\n    this.duration = duration;\n    this.display = display;\n\n    this.elapsed = elapsed;\n    this.interval = null;\n    this.expireFn = expireFn;\n    this.updateFn = updateFn;\n\n    const remaining = this.duration - this.elapsed;\n    if (remaining < 0) {\n      this.display.classList.add('expired');\n    } else {\n      this.display.classList.remove('expired');\n    }\n\n    this.render(remaining);\n  }\n\n  toJSON(): TimerJSON {\n    return { duration: this.duration, elapsed: this.elapsed };\n  }\n\n  start() {\n    if (this.interval) return;\n    this.begin = new Date().getTime();\n    this.last = this.begin;\n    this.interval = setInterval(() => this.update(), 100);\n  }\n\n  stop() {\n    if (this.interval) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  }\n\n  pause() {\n    if (this.interval) {\n      this.stop();\n      this.begin = new Date().getTime();\n      this.elapsed += this.begin - this.last!;\n      this.last = this.begin;\n    } else {\n      this.start();\n    }\n  }\n\n  expired() {\n    return this.elapsed >= this.duration;\n  }\n\n  update() {\n    const now = new Date().getTime();\n    this.elapsed += now - this.last!;\n    this.last = now;\n\n    let distance;\n    if (this.expired()) {\n      this.display.classList.add('expired');\n      distance = this.elapsed - this.duration;\n      if (this.expireFn) {\n        this.expireFn();\n        this.expireFn = null;\n      }\n    } else {\n      distance = this.duration - this.elapsed;\n    }\n\n    const before = this.display.textContent;\n    this.render(distance);\n    if (before !== this.display.textContent && this.updateFn) {\n      this.updateFn();\n    }\n  }\n\n  private render(distance: number) {\n    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n    const seconds = `${Math.floor((distance % (1000 * 60)) / 1000)}`.padStart(2, '0');\n    this.display.textContent = `${minutes}:${seconds}`;\n  }\n}\n","import {global} from './global';\nimport {UI} from './ui';\nimport { BoardView } from './board';\nimport {Game} from '../game';\n\nexport class ScorePane {\n  readonly board: BoardView;\n\n  container!: HTMLElement;\n\n  constructor(board: BoardView) {\n    this.board = board;\n  }\n\n  attach() {\n    this.container = UI.createElementWithId('div', 'game');\n\n    const wrapper = UI.createElementWithId('div', 'wrapper');\n    wrapper.classList.add('score');\n\n    const back = UI.createBackButton(async () => {\n      UI.root.removeChild(this.detach());\n      UI.root.appendChild(await this.board.attach({resume: 'return'}));\n    });\n\n    this.container.appendChild(UI.createTopbar(back, this.board.timerDisplay, this.board.score!.cloneNode(true) as HTMLElement));\n\n    const game = this.board.game as Game;\n    const state = game.state();\n    const score = game.score.regular + game.score.overtime;\n    const goal = state.totals[global.SETTINGS.grade.toLowerCase() as 'a' | 'b' | 'c' | 'd'];\n    const details = `${score}/${goal} (${Math.round(score / goal * 100).toFixed(0)}%)`;\n    const current = makeCollapsible(game.id, details, 'block');\n    const div = document.createElement('div');\n    div.classList.add('collapsible-content');\n    this.displayPlayed(state, div, true);\n    this.displayPossible(state, div);\n    wrapper.appendChild(current);\n    wrapper.appendChild(div);\n    // Start off with played expanded\n    current.classList.add('active');\n    div.style.display = 'block';\n\n    for (let i = global.HISTORY.length - 1; i >= 0; i--) {\n      const state = global.HISTORY[i];\n      let score = 0;\n      for (const [w, t] of Object.entries(state.words)) {\n        if (t > 0) score += Game.score(w);\n      }\n      if (!score) continue;\n\n      const details = `${score}/${state.goal[global.SETTINGS.grade]} (${Math.round(score / state.goal[global.SETTINGS.grade] * 100).toFixed(0)}%)`;\n      const div = document.createElement('div');\n      div.classList.add('collapsible-content');\n      div.classList.add('lazy');\n      const button = makeCollapsible(state.seed, details, 'block', () => {\n        if (div.classList.contains('lazy')) {\n          div.classList.remove('lazy');\n          const game = Game.fromJSON(state, global.TRIE, global.DICT, global.STATS);\n          const s = game.state();\n          this.displayPlayed(s, div);\n          this.displayPossible(s, div);\n        }\n      });\n      wrapper.appendChild(button);\n      wrapper.appendChild(div);\n    }\n\n    this.container.appendChild(wrapper);\n\n    return this.container;\n  }\n\n  detach() {\n    return this.container;\n  }\n\n  displayPlayed(state: ReturnType<Game['state']>, div: HTMLElement, expanded = false) {\n    const p = state.progress;\n    const details = `(${p.score}) ${Object.keys(p.suffixes).length}/${p.subwords}/${p.anagrams} (${p.invalid}/${p.total})`;\n\n    const button = makeCollapsible('PLAYED', details, 'table');\n\n    const table = document.createElement('table');\n    table.classList.add('collapsible-content');\n    table.classList.add('results');\n    table.classList.add('played');\n\n    for (const {word, grade, overtime, defn, invalid} of state.played) {\n      const tr = document.createElement('tr');\n      if (grade < global.SETTINGS.grade) tr.classList.add('hard');\n      if (invalid) tr.classList.add('error');\n      if (overtime) tr.classList.add('overtime');\n\n      let td = document.createElement('td');\n      const b = document.createElement('b');\n      b.textContent = word;\n      td.appendChild(b);\n      tr.appendChild(td);\n\n      td = document.createElement('td');\n      if (defn) td.textContent = defn;\n      tr.appendChild(td);\n\n      table.appendChild(tr);\n    }\n\n    if (expanded) {\n      button.classList.add('active');\n      table.style.display = 'table';\n    }\n\n    div.appendChild(button);\n    div.appendChild(table);\n  }\n\n  displayPossible(state: ReturnType<Game['state']>, div: HTMLElement, expanded = false) {\n    const tot = state.totals;\n    const details = `${tot.d}/${tot.c}/${tot.b}/${tot.a} (${tot.s})`;\n\n    const button = makeCollapsible('POSSIBLE', details, 'table');\n    const table = document.createElement('table');\n    table.classList.add('collapsible-content');\n    table.classList.add('results');\n    table.classList.add('possible');\n\n    for (const {word, grade, root, missing, defn} of state.remaining) {\n      const tr = document.createElement('tr');\n      if (grade < global.SETTINGS.grade) tr.classList.add('hard');\n\n      let td = document.createElement('td');\n      const b = document.createElement('b');\n      if (root) {\n        const rootSpan = document.createElement('span');\n        rootSpan.textContent = root;\n        const suffixSpan = document.createElement('span');\n        suffixSpan.classList.add('underline');\n        suffixSpan.textContent = word.slice(root.length);\n        b.appendChild(rootSpan);\n        b.appendChild(suffixSpan);\n      } else {\n        if (missing) b.classList.add('underline');\n        b.textContent = word;\n      }\n      td.appendChild(b);\n      tr.appendChild(td);\n\n      td = document.createElement('td');\n      td.textContent = defn;\n      tr.appendChild(td);\n\n      table.appendChild(tr);\n    }\n\n    if (expanded) {\n      button.classList.add('active');\n      table.style.display = 'table';\n    }\n\n    div.appendChild(button);\n    div.appendChild(table);\n  }\n}\n\nfunction makeCollapsible(title: string, details: string, display: string, fn?: () => void) {\n  const button = document.createElement('button');\n  button.setAttribute('type', 'button');\n  button.classList.add('collapsible');\n\n  const div = document.createElement('div');\n\n  const titleSpan = document.createElement('span');\n  titleSpan.classList.add('collapsible-title');\n  titleSpan.textContent = title;\n\n  const detailsSpan = document.createElement('span');\n  detailsSpan.classList.add('collapsible-details');\n  detailsSpan.textContent = details;\n\n  div.appendChild(titleSpan);\n  div.appendChild(detailsSpan);\n  button.appendChild(div);\n\n  button.addEventListener('click', () => {\n    button.classList.toggle('active');\n    const content = button.nextElementSibling as HTMLElement;\n    if (content.style.display === display) {\n      content.style.display = 'none';\n    } else {\n      if (fn) fn();\n      content.style.display = display;\n    }\n  });\n\n  return button;\n}","import {global} from './global';\nimport {UI, View} from './ui';\nimport { Game, GameJSON, SUFFIXES } from '../game';\nimport { Timer, TimerJSON} from '../timer';\nimport {Random} from '../random';\nimport {ScorePane} from './score';\nimport {define} from '../dict';\n\nconst DURATION = 180 * 1000;\n\ninterface BoardJSON {\n  last: string;\n  kept: boolean;\n  timer: TimerJSON;\n  game?: GameJSON;\n}\n\nexport class BoardView implements View {\n  last: string;\n  kept: boolean;\n  timer: Timer;\n  game: GameJSON | Game | undefined;\n\n  played!: Set<string>;\n\n  timerDisplay: HTMLElement;\n  container!: HTMLElement;\n  score!: HTMLElement;\n  full!: HTMLElement;\n  word!: HTMLElement;\n  defn!: HTMLElement;\n  tds!: Set<HTMLTableCellElement>;\n\n  constructor(json?: BoardJSON) {\n    this.last = json ? json.last : '';\n    this.kept = json ? json.kept : false;\n    this.game = json ? json.game : undefined;\n    const {display, timer} = json ?\n      this.createTimer(json.timer.duration, json.timer.elapsed) :\n      this.createTimer();\n    this.timer = timer;\n    this.timerDisplay = display;\n  }\n\n  toJSON(): BoardJSON {\n    return {\n      last: this.last,\n      kept: this.kept,\n      timer: this.timer.toJSON(),\n      game: this.game && ('random' in this.game ? this.game.toJSON() : this.game),\n    };\n  }\n\n  async attach(data: {resume?: true | 'return', allowDupes?: boolean} = {}) {\n    await Promise.all([global.LOADED.DICT, global.LOADED.TRIE(), global.LOADED.STATS(), global.LOADED.HISTORY]);\n\n    if (!this.played) {\n      this.played = new Set();\n      for (const h of global.HISTORY) this.played.add(h.seed);\n    }\n\n    if (!this.game || !data.resume) {\n      if (this.game) {\n        this.timer.stop();\n        if (!('random' in this.game)) {\n          this.game = Game.fromJSON(this.game, global.TRIE, global.DICT, global.STATS);\n        }\n        this.played.add(this.game.id);\n        if (Object.values(this.game.played).filter(t => t > 0).length) {\n          this.updateGames();\n          global.HISTORY.push(this.game.toJSON());\n          await global.STORE.set('history', global.HISTORY);\n        }\n      }\n\n      let game;\n      const random = new Random();\n      while (!game || !Object.keys(game.possible).length) {\n        random.seed = global.SEED;\n        const id = Game.encodeID(global.SETTINGS, random.seed);\n        if (this.played.has(id) && !data.allowDupes) {\n          global.SEED++;\n          continue;\n        }\n        game = new Game(global.TRIE, global.DICT, global.STATS, random, global.SETTINGS);\n      }\n      this.game = game;\n\n      const {display, timer} = this.createTimer();\n      this.timer = timer;\n      this.timerDisplay = display;\n\n      this.last = '';\n      this.kept = false;\n    } else if (!('random' in this.game)) {\n      this.game = Game.fromJSON(this.game, global.TRIE, global.DICT, global.STATS);\n    }\n\n    this.container = UI.createElementWithId('div', 'game');\n\n    const back = UI.createBackButton(() => UI.toggleView('Menu'));\n    back.addEventListener('long-press', () => this.refresh());\n\n    this.score = UI.createElementWithId('div', 'score');\n    this.score.addEventListener('mouseup', () => {\n      const pane = new ScorePane(this);\n      UI.root.removeChild(this.detach('Score'));\n      UI.root.appendChild(pane.attach());\n    });\n    this.score.addEventListener('long-press', () => this.onLongPress());\n    this.score.addEventListener('long-press-up', () => this.onLongPressUp());\n    this.displayScore();\n\n    this.container.appendChild(UI.createTopbar(back, this.timerDisplay, this.score));\n\n    this.full = UI.createElementWithId('div', 'full');\n    this.container.appendChild(this.full);\n\n    this.container.appendChild(this.renderBoard());\n\n    this.word = UI.createElementWithId('div', 'word');\n    this.word.classList.add('word');\n    if (!(('ontouchstart' in window) ||\n      (navigator.maxTouchPoints > 0) ||\n      (navigator.msMaxTouchPoints > 0))) {\n      this.word.contentEditable = 'true';\n    }\n    this.container.appendChild(this.word);\n    this.defn = UI.createElementWithId('div', 'defn');\n    this.defn.classList.add('definition')\n    this.container.appendChild(this.defn);\n\n    if (data.resume !== 'return') this.timer.start();\n    const hash = `#${this.game.id}`;\n    if (document.location.hash !== hash) {\n      window.history.replaceState(null, '', hash);\n    }\n\n    return this.container;\n  }\n\n  renderBoard() {\n    const game = this.game as Game;\n    const content = UI.createElementWithId('div', 'foo');\n    const table = UI.createElementWithId('table', 'board');\n    if (game.size > 4) table.classList.add('big');\n\n    this.tds = new Set();\n    const random = new Random(game.seed);\n    for (let row = 0; row < game.size; row++) {\n      const tr = document.createElement('tr');\n      for (let col = 0; col < game.size; col++) {\n        const td = document.createElement('td');\n        td.textContent = game.board[row * game.size + col];\n        if (td.textContent === 'Qu') td.classList.add('qu');\n        if (['M', 'W', 'Z'].includes(td.textContent)) td.classList.add('underline');\n        td.classList.add(`rotate${90 * random.next(0, 4)}`);\n        td.setAttribute('data-x', String(row));\n        td.setAttribute('data-y', String(col));\n\n        const div = document.createElement('div');\n        div.classList.add('target');\n        div.setAttribute('data-x', String(row));\n        div.setAttribute('data-y', String(col));\n\n        td.appendChild(div);\n        tr.appendChild(td);\n        this.tds.add(td);\n      }\n      table.appendChild(tr);\n    }\n\n    let touched: Set<HTMLTableCellElement>;\n    const deselect = () => {\n      if (!touched) return;\n      for (const td of touched) {\n        td.classList.remove('selected');\n      }\n    };\n\n    const registerTouch = (e: TouchEvent) => {\n      const touch = e.touches[0];\n      const cell = document.elementFromPoint(touch.clientX, touch.clientY);\n      if (cell && cell.matches('.target')) {\n        const td = cell.parentNode as HTMLTableCellElement;\n        td.classList.add('selected');\n        if (!touched.has(td)) {\n          touched.add(td);\n          this.word.textContent += td.textContent!;\n        }\n      }\n    };\n\n    table.addEventListener('touchstart', e => {\n      this.clear();\n      deselect();\n      touched = new Set();\n\n      registerTouch(e);\n    });\n    table.addEventListener('touchend', () => {\n      deselect();\n      this.play();\n    });\n    table.addEventListener('touchmove', registerTouch);\n\n    content.appendChild(table);\n    return content;\n  }\n\n  afterAttach() {\n    UI.permaFocus(this.word);\n  }\n\n  detach(next: string) {\n    if (next !== 'Score' && next !== 'Define') this.timer.pause();\n    return this.container;\n  }\n\n  async refresh(data?: {resume?: boolean, allowDupes?: boolean}) {\n    UI.persist();\n    await UI.detachView('Board', 'Board');\n    await UI.attachView('Board', data);\n  }\n\n  play() {\n    const game = this.game as Game;\n    let w = (this.word.textContent || '').toUpperCase();\n    if (w.length < 3 || SUFFIXES.includes(w)) {\n      w = `${this.last}${w}`;\n      this.word.textContent = w;\n    }\n    const score = game.play(w);\n    this.last = w;\n    UI.persist();\n\n    const hide = game.settings.display === 'Hide';\n    this.kept = true;\n    if (!hide && score) {\n      this.displayScore();\n      this.defn.textContent = define(w, global.DICT);\n    } else {\n      const original = this.word.textContent || undefined;\n      if (!hide && game.played[w] < 0) this.word.classList.add('error');\n      this.word.classList.add('fade');\n      const listener = () => {\n        this.clear(original);\n        this.word.removeEventListener('animationend', listener);\n      }\n      this.word.addEventListener('animationend', listener);\n    }\n  }\n\n  displayScore() {\n    const game = this.game as Game;\n    if (game.settings.display === 'Hide') {\n      this.score.textContent = '?';\n      return;\n    }\n\n    if (game.settings.display === 'Full') {\n      const state = game.state();\n      const p = state.progress;\n      const details = `(${p.score}) ${Object.keys(p.suffixes).length}/${p.subwords}/${p.anagrams}`;\n      const score = game.score.regular + game.score.overtime;\n      const goal = state.totals[global.SETTINGS.grade.toLowerCase() as 'a' | 'b' | 'c' | 'd'];\n      this.full.textContent = `${details} - ${score}/${goal} (${Math.round(score / goal * 100).toFixed(0)}%)`;\n    }\n\n    const s = game.score;\n    this.score.textContent = s.overtime ? `${s.regular} / ${s.overtime}` : `${s.regular}`;\n  }\n\n  clear(w?: string) {\n    if (w && w !== this.word.textContent) return;\n    this.word.textContent = '';\n    this.word.classList.remove('error');\n    this.word.classList.remove('fade');\n    this.defn.textContent = '';\n    this.kept = false;\n  }\n\n  createTimer(duration = DURATION, elapsed = 0) {\n    const display = UI.createElementWithId('div', 'timer');\n    display.addEventListener('click', () => this.timer.pause());\n    return {display, timer: new Timer(display, duration, elapsed, () => {\n      if (this.game && !this.game.expired) {\n        this.game.expired = +new Date();\n      }\n    }, () => UI.persist())};\n  }\n\n  updateGames() {\n    if (!global.GAMES) return;\n\n    const game = this.game as Game;\n    const played = new Set<string>();\n    for (const w in game.played) {\n      if (game.played[w] > 0) played.add(w);\n    }\n    if (!played.size) return;\n\n    if (global.GAMES.length >= global.LIMIT) global.GAMES.shift();\n    global.GAMES.push([game.possible, played]);\n  }\n\n  onLongPress() {\n    const game = this.game as Game;\n    const size = game.size;\n    const weights = [];\n    for (let row = 0; row < size; row++) {\n      const a = [];\n      for (let col = 0; col < size; col++) {\n        a.push(0);\n      }\n      weights.push(a);\n    }\n    let total = 0;\n    for (const word in game.possible) {\n      if (game.played[word]) continue;\n      const score = Game.score(word);\n      total += score;\n      for (const p of game.possible[word]) {\n        weights[p[1]][p[0]] += score;\n      }\n    }\n\n    for (const td of this.tds) {\n      const w = weights[Number(td.dataset.x)][Number(td.dataset.y)] / total;\n      td.style.backgroundColor = `rgba(255,0,0,${w})`;\n    }\n  }\n\n  onLongPressUp() {\n    for (const td of this.tds) {\n      td.style.removeProperty('background-color');\n    }\n  }\n\n  async onKeyDown(e: KeyboardEvent) {\n    if (this.kept) this.clear();\n    UI.focusContentEditable(this.word);\n    const key = e.keyCode;\n    if (key === 13 || key === 32) {\n      e.preventDefault();\n      this.play();\n      UI.focusContentEditable(this.word);\n    } else if (key === 27) {\n      await UI.toggleView('Define');\n    } else if ((key < 65 || key > 90) && key !== 8) {\n      e.preventDefault();\n    }\n  }\n}\n","import {global} from './global';\nimport {UI, View} from './ui';\nimport {define} from '../dict';\n\nexport class DefineView implements View {\n  private word: string;\n\n  private define!: HTMLElement;\n  private search!: HTMLElement;\n\n  private defn: HTMLElement | null = null;\n  private stats: HTMLElement | null = null;\n  private anagrams: HTMLElement | null = null;\n\n  constructor(json?: {word: string}) {\n    this.word = json ? json.word : '';\n  }\n\n  toJSON(): {word: string} {\n    return {word: this.word};\n  }\n\n  async attach(word?: string) {\n    await Promise.all([global.LOADED.DICT, global.LOADED.STATS()]);\n\n    if (word) this.word = word;\n\n    this.define = UI.createElementWithId('div', 'define');\n    this.search = UI.createElementWithId('div', 'search');\n    this.search.classList.add('word');\n    this.search.contentEditable = 'true';\n    this.search.textContent = this.word;\n    this.define.appendChild(this.search);\n\n    this.define.addEventListener('input', () => this.query(this.search.textContent || ''));\n    this.update();\n\n    return this.define;\n  }\n\n  afterAttach() {\n    UI.permaFocus(this.search);\n  }\n\n  query(w: string) {\n    this.search.textContent = w;\n    this.word = w.toUpperCase();\n    this.update();\n    UI.persist();\n  }\n\n  detach() {\n    this.defn = null;\n    this.stats = null;\n    this.anagrams = null;\n    return this.define;\n  }\n\n  update() {\n    const val = global.DICT[this.word];\n    if (val) {\n      const defn = UI.createElementWithId('div', 'defineDefn');\n      defn.classList.add('definition');\n      defn.textContent = define(this.word, global.DICT);\n      if ((val.dict && !val.dict.includes(global.SETTINGS.dict.charAt(0))) || this.word.length < global.SETTINGS.min) {\n        this.define.classList.add('hard');\n      } else {\n        this.define.classList.remove('hard');\n      }\n\n      const addCells = (tr: HTMLTableRowElement, label: string, data: string) => {\n        let td = document.createElement('td');\n        const b = document.createElement('b');\n        b.textContent = label;\n        td.appendChild(b);\n        tr.appendChild(td);\n\n        td = document.createElement('td');\n        td.classList.add('value');\n        td.textContent = data;\n        tr.appendChild(td);\n      };\n\n      const s = global.STATS.stats(this.word, global.SETTINGS.dice, global.SETTINGS.dict);\n\n      const stats = document.createElement('table');\n      stats.classList.add('roundedTable');\n\n      let tr = document.createElement('tr');\n      addCells(tr, 'Grade', s.grade === ' ' ? 'S' : s.grade);\n      addCells(tr, 'Score', s.word ? String(s.word.p) : '-');\n      stats.appendChild(tr);\n\n      tr = document.createElement('tr');\n      addCells(tr, 'Frequency', s.freq ? String(s.freq) : '-');\n      addCells(tr, 'Anagram',  s.anagram ? String(s.anagram.p) : '-');\n      stats.appendChild(tr);\n\n      stats.appendChild(tr);\n\n      if (this.defn) this.define.removeChild(this.defn);\n      this.define.appendChild(defn);\n      this.defn = defn;\n\n      if (this.stats) this.define.removeChild(this.stats);\n      this.define.appendChild(stats);\n      this.stats = stats;\n    } else {\n      if (this.defn) {\n        this.define.removeChild(this.defn);\n        this.defn = null;\n      }\n      if (this.stats) {\n        this.define.removeChild(this.stats);\n        this.stats = null;\n      }\n    }\n\n    const anagrams = this.renderAnagrams();\n    if (this.anagrams) this.define.removeChild(this.anagrams);\n    this.define.appendChild(anagrams);\n    this.anagrams = anagrams;\n  }\n\n   renderAnagrams() {\n    const div = UI.createElementWithId('div', 'defineAnagrams');\n\n    const words = global.STATS.anagrams(this.word, global.SETTINGS.dict).words;\n    if (words.length <= 1) return div;\n\n    const solo = [];\n    const anadromes = new Set<string>();\n\n    for (const w of words) {\n      const r = w.split('').reverse().join('');\n      if (r !== w && words.includes(r)) {\n        anadromes.add(`${[w, r].sort().join(' ')}`);\n      } else {\n        solo.push(w);\n      }\n    }\n\n    const format = (w: string) => {\n      const e = document.createElement(w === this.word ? 'b' : 'span');\n      e.textContent = w;\n      e.addEventListener('click', () => this.query(w));\n      return e;\n    };\n\n    for (const pair of anadromes) {\n      const [a, b] = pair.split(' ');\n      div.appendChild(document.createTextNode(' ('));\n      div.appendChild(format(a));\n      div.appendChild(document.createTextNode(' '));\n      div.appendChild(format(b));\n      div.appendChild(document.createTextNode(') '));\n    }\n\n    for (const w of solo) {\n      div.appendChild(format(w));\n      div.appendChild(document.createTextNode(' '));\n    }\n\n    return div;\n  }\n\n  async onKeyDown(e: KeyboardEvent) {\n    UI.focusContentEditable(this.search);\n    // tslint:disable-next-line: deprecation\n    const key = e.keyCode;\n    if (key === 13 || key === 32) {\n      if (this.word) {\n        this.query('');\n      } else {\n        await UI.toggleView('Define');\n      }\n    } else if (key === 27) {\n      await UI.toggleView('Define');\n    } else if ((key < 65 || key > 90) && key !== 8) {\n      e.preventDefault();\n    }\n  }\n}","import {UI, View} from './ui';\nimport {BoardView} from './board';\n\nexport class MenuView implements View {\n  menu!: HTMLElement;\n  toJSON() {}\n  attach() {\n    this.menu = UI.createElementWithId('div', 'menu');\n    const title = UI.createElementWithId('h1', 'title');\n    title.textContent = 'BOGGLE';\n    // TODO: needs testing!\n    title.addEventListener('long-press', async () => {\n      const key = (await caches.keys()).find(n => n.startsWith('cache'));\n      if (key) await caches.delete(key);\n      // tslint:disable-next-line: deprecation\n      document.location.reload(true);\n    });\n    this.menu.appendChild(title);\n    const nav = document.createElement('nav');\n\n    const createButton = (name: string, fn: () => void) => {\n      const button = document.createElement('button');\n      button.classList.add('toggle');\n      button.textContent = name;\n      button.addEventListener('click', fn);\n      return button;\n    }\n\n    if ((UI.Views.Board as BoardView).game) {\n      nav.appendChild(createButton('RESUME', () => UI.toggleView('Board', {resume: true})));\n      nav.appendChild(createButton('NEW GAME', () => UI.toggleView('Board')));\n    } else {\n      nav.appendChild(createButton('PLAY', () => UI.toggleView('Board')));\n    }\n    nav.appendChild(createButton('TRAIN', () => UI.toggleView('Training')));\n    nav.appendChild(createButton('DEFINE', () => UI.toggleView('Define')));\n    nav.appendChild(createButton('STATS', () => UI.toggleView('Stats')));\n    nav.appendChild(createButton('SETTINGS', () => UI.toggleView('Settings')));\n\n    this.menu.appendChild(nav);\n    return this.menu;\n  }\n\n  detach() {\n    return this.menu;\n  }\n}\n","import {global} from './global';\nimport {UI, View} from './ui';\nimport {order} from '../dict';\nimport {Store} from '../store';\nimport {TrainingStats} from '../training';\n\nexport class ReviewView implements View {\n  size: number;\n\n  review!: HTMLElement;\n\n  constructor(json?: {size: number}) {\n    this.size = json ? json.size : 0;\n  }\n\n  toJSON(): {size: number} {\n    return {size: this.size};\n  }\n\n  async attach(size?: number) {\n    await Promise.all([global.LOADED.DICT, global.LOADED.STATS()]);\n\n    this.review = UI.createElementWithId('div', 'review');\n    if (size) this.size = size;\n\n    const back = UI.createBackButton(() => UI.toggleView('Training'));\n    const progress = UI.createElementWithId('div', 'progress');\n    progress.textContent = String(this.size);\n    this.review.appendChild(UI.createTopbar(back, null, progress));\n\n    const d = global.SETTINGS.dice.charAt(0).toLowerCase() as 'n' | 'o' | 'b';\n    const score = (k: string) => global.STATS.anagrams(k, global.SETTINGS.dict)[d] || 0;\n\n    const store = new Store('training', global.SETTINGS.dict);\n    const data = await store.get('data') as TrainingStats[];\n    const keys = data\n      .filter(w => w.e < 2.0) // TODO: !v.c, figure out 2.0 based on average?\n      .sort((a, b) => score(b.k) / b.e - score(a.k) / a.e)\n      .map(w => w.k);\n\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('wrapper');\n\n    for (const k of keys) {\n      const table = document.createElement('table');\n      table.classList.add('results');\n      UI.addAnagramRows(table, order(global.STATS.anagrams(k, global.SETTINGS.dict).words));\n      wrapper.appendChild(table);\n    }\n    this.review.appendChild(wrapper);\n\n    return this.review;\n  }\n\n  detach() {\n    return this.review;\n  }\n}","import {global} from './global';\nimport {UI, View} from './ui';\nimport {Game} from '../game';\nimport {Type} from '../dict';\nimport {Grade} from '../stats';\nimport {Settings, Dice, MinLength, ScoreDisplay, Theme} from '../settings';\n\nexport class SettingsView implements View {\n  settings!: HTMLElement;\n  seed!: HTMLElement;\n\n  toJSON() {}\n  attach() {\n    this.settings = UI.createElementWithId('div', 'settings');\n\n    const createRow = (e: HTMLElement) => {\n      const row = document.createElement('div');\n      row.classList.add('row');\n      row.appendChild(e);\n      return row;\n    };\n\n    this.seed = UI.createElementWithId('div', 'seed');\n    this.seed.textContent = Game.encodeID(global.SETTINGS, global.SEED);\n    this.seed.setAttribute('contenteditable', 'true');\n    this.seed.addEventListener('input', () => this.onInput(this.seed.textContent || ''));\n    const back = UI.createBackButton(() => UI.toggleView('Menu'));\n    this.settings.appendChild(UI.createTopbar(back, this.seed, null));\n\n    const checkedRadioRow = (k: keyof Settings, opts: string[], fn: (this: HTMLInputElement) => void, id?: string) =>\n      createRow(UI.createRadios(id || k, opts.map(s => s === String(global.SETTINGS[k]) ? [s] : s), fn));\n    this.settings.appendChild(checkedRadioRow('dice', ['New', 'Old', 'Big'], function (this: HTMLInputElement) {\n      const min = this.value === 'Big' ? 4 : 3;\n      (document.getElementById(`min${min}`) as HTMLInputElement).checked = true;\n      UI.updateSettings({dice: this.value as Dice, min});\n    }));\n    this.settings.appendChild(checkedRadioRow('min', ['3', '4', '5'], function (this: HTMLInputElement) {\n      UI.updateSettings({min: Number(this.value) as MinLength});\n    }));\n    this.settings.appendChild(checkedRadioRow('dict', ['NWL', 'ENABLE', 'CSW'], function (this: HTMLInputElement) {\n      UI.updateSettings({dict: this.value as Type});\n    }));\n    this.settings.appendChild(checkedRadioRow('grade', ['A', 'B', 'C', 'D'], function (this: HTMLInputElement) {\n      UI.updateSettings({grade: this.value as Exclude<Grade, ' '>});\n    }));\n    this.settings.appendChild(checkedRadioRow('display', ['Hide', 'Show', 'Full'], function (this: HTMLInputElement) {\n      UI.updateSettings({display: this.value as ScoreDisplay});\n    }, 'scoreDisplay'));\n    this.settings.appendChild(checkedRadioRow('theme', ['Light', 'Dark'], function (this: HTMLInputElement) {\n      const theme = this.value as Theme;\n      UI.updateSettings({theme});\n      UI.setTheme(theme);\n    }));\n\n    return this.settings;\n  }\n\n  detach() {\n    return this.settings;\n  }\n\n  update() {\n    this.seed.textContent = Game.encodeID(global.SETTINGS, global.SEED);\n    this.seed.classList.remove('error');\n    const set = (id: string) => (document.getElementById(id) as HTMLInputElement).checked = true;\n    set(`dice${global.SETTINGS.dice}`);\n    set(`min${global.SETTINGS.min}`);\n    set(`dict${global.SETTINGS.dict}`);\n    set(`grade${global.SETTINGS.grade}`);\n    set(`scoreDisplay${global.SETTINGS.display}`);\n    set(`theme${global.SETTINGS.theme || 'Light'}`);\n  }\n\n  onInput(id: string) {\n    const [settings, seed] = Game.decodeID(id);\n    if (isNaN(seed) || !(settings.dice && settings.dict && settings.min)) {\n      this.seed.classList.add('error');\n    } else {\n      UI.updateSettings(settings, seed, false);\n      this.update();\n    }\n  }\n}","import {global} from './global';\nimport {UI, View} from './ui';\nimport {Game} from '../game';\nimport {Stats} from '../stats';\n\ntype Section = 'WORD' | 'ANAGRAM' | 'PAIR';\n\nexport class StatsView implements View {\n  section: Section;\n\n  stats!: HTMLElement;\n  table: HTMLElement | null = null;\n\n  constructor(json?: {section: Section}) {\n    this.section = json ? json.section : 'WORD';\n  }\n\n  toJSON(): {section: Section} {\n    return {section: this.section};\n  }\n\n  // TODO: why is there no spinner?\n  async attach() {\n    await Promise.all([global.LOADED.HISTORY, global.LOADED.TRIE(), global.LOADED.DICT, global.LOADED.STATS()]);\n    if (!global.GAMES) {\n      global.GAMES = [];\n      for (let i = global.HISTORY.length - 1; i >= 0 && global.GAMES.length < global.LIMIT; i--) {\n        const game = Game.fromJSON(global.HISTORY[i], global.TRIE, global.DICT, global.STATS);\n        const played = new Set<string>();\n        for (const w in game.played) {\n          if (game.played[w] > 0) played.add(w);\n        }\n        global.GAMES.push([game.possible, played]);\n      }\n    }\n    // TODO: cache this, invalidate if GAMES/dice/dict/min changes?\n    const data = global.STATS.history(global.GAMES, global.SETTINGS.dice, global.SETTINGS.dict);\n\n    this.stats = UI.createElementWithId('div', 'stats');\n    const back = UI.createBackButton(() => UI.toggleView('Menu'));\n    const display = (s: Section) => this.display(s, data);\n    const radios = UI.createRadios('statsSelect', ['WORD', 'ANAGRAM', 'PAIR'].map(s => s === this.section ? [s] : s), function(this: HTMLInputElement) {\n      display(this.value as Section);\n      UI.persist();\n    });\n\n    this.stats.appendChild(UI.createTopbar(back, radios, null));\n    this.display(this.section, data);\n\n    return this.stats;\n  }\n\n  detach() {\n    this.table = null;\n    return this.stats;\n  }\n\n  display(section: Section, data: ReturnType<Stats['history']>) {\n    this.section = section;\n    const {words, anadromes, anagrams} = data;\n\n    const link = (w: string) => {\n      const b = document.createElement('b');\n      b.textContent = w;\n      b.addEventListener('click', () => UI.toggleView('Define', w));\n      return b;\n    };\n\n    const table = document.createElement('table');\n    table.classList.add('roundedTable');\n    if (section === 'PAIR') {\n      for (const {n, fn, d, fd, e} of anadromes) {\n        const tr = document.createElement('tr');\n\n        let td = document.createElement('td');\n        td.appendChild(link(n));\n        tr.appendChild(td);\n\n        td = document.createElement('td');\n        td.textContent = `${fn}/${fd} (${e})`;\n        tr.appendChild(td);\n\n        td = document.createElement('td');\n        td.appendChild(link(d));\n        tr.appendChild(td);\n\n        table.appendChild(tr);\n      }\n    } else if (section === 'WORD') {\n      for (const {w, found, all} of words) {\n        const tr = document.createElement('tr');\n\n        let td = document.createElement('td');\n        td.appendChild(link(w));\n        tr.appendChild(td);\n\n        td = document.createElement('td');\n        td.textContent = `${found}/${all}`;\n        tr.appendChild(td);\n\n        table.appendChild(tr);\n      }\n    } else /* section === 'ANAGRAM' */ {\n      for (const group of anagrams) {\n        const tr = document.createElement('tr');\n        const td = document.createElement('td');\n\n        let together = [];\n        let wait = false;\n        for (const {raw, found, all} of group) {\n          const w = raw.replace(/[^A-Z]/, '');\n\n          if (raw.startsWith('(')) {\n            const b = document.createElement('b');\n            b.textContent = '(';\n            together.push(b);\n            wait = true;\n          }\n\n          together.push(link(w));\n\n          const span = document.createElement('span');\n          span.textContent = ` ${found}/${all}`;\n\n          if (raw.endsWith(')')) {\n            together.push(span);\n            const b = document.createElement('b');\n            b.textContent = ')';\n            together.push(b);\n            wait = false;\n          } else {\n            if (wait) span.textContent += ' ';\n            together.push(span);\n          }\n\n          if (!wait) {\n            for (const e of together) td.appendChild(e);\n            td.appendChild(document.createElement('br'));\n            together = [];\n          }\n        }\n\n        tr.appendChild(td);\n        table.appendChild(tr);\n      }\n    }\n    if (this.table) this.stats.removeChild(this.table);\n    this.stats.appendChild(table);\n    this.table = table;\n  }\n}","import { Type, order } from './dict';\nimport { Stats } from './stats';\nimport { Store } from './store';\nimport { Dice } from './settings';\nimport { Random } from './random';\n\nconst PERIOD = 3;\nconst DAY = 24 * 60 * 60 * 1000;\n\ntype Comparator<T> = (a: T, b: T) => number;\n\nfunction defaultCompare<T>(a: T, b: T) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\nclass Queue<T> {\n  length: number;\n  data: T[];\n  compare: Comparator<T>;\n\n  constructor(data: T[] = [], compare: Comparator<T> = defaultCompare) {\n    this.data = data;\n    this.length = this.data.length;\n    this.compare = compare;\n\n    if (this.length > 0) {\n      for (let i = (this.length >> 1) - 1; i >= 0; i--) this.down(i);\n    }\n  }\n\n  push(item: T) {\n    this.data.push(item);\n    this.length++;\n    this.up(this.length - 1);\n  }\n\n  pop(): T | undefined {\n    if (this.length === 0) return undefined;\n\n    const top = this.data[0]!;\n    const bottom = this.data.pop()!;\n    this.length--;\n\n    if (this.length > 0) {\n      this.data[0] = bottom;\n      this.down(0);\n    }\n\n    return top;\n  }\n\n  peek(): T | undefined {\n    return this.data[0];\n  }\n\n  private up(pos: number) {\n    const item = this.data[pos];\n\n    while (pos > 0) {\n      const parent = (pos - 1) >> 1;\n      const current = this.data[parent];\n      if (this.compare(item, current) >= 0) break;\n      this.data[pos] = current;\n      pos = parent;\n    }\n\n    this.data[pos] = item;\n  }\n\n  private down(pos: number) {\n    const half = this.length >> 1;\n    const item = this.data[pos];\n\n    while (pos < half) {\n      let left = (pos << 1) + 1;\n      let best = this.data[left];\n      const right = left + 1;\n\n      if (right < this.length && this.compare(this.data[right], best) < 0) {\n        left = right;\n        best = this.data[right];\n      }\n      if (this.compare(best, item) >= 0) break;\n\n      this.data[pos] = best;\n      pos = left;\n    }\n\n    this.data[pos] = item;\n  }\n}\n\nexport interface TrainingStats {\n  k: string; // key\n  e: number; // easiness\n  c: number; // correct\n  n: number; // encounters\n  d: number; // due date\n  p: number; // previous\n}\n\nexport class TrainingPool {\n  readonly type: Type;\n\n  private readonly d: 'n' | 'o' | 'b';\n  private readonly unlearned: string[];\n  private readonly learned: Queue<TrainingStats>;\n  private readonly store: Store;\n  private readonly stats: Stats;\n\n  static async create(stats: Stats, dice: Dice, type: Type, store: Store, min: number) {\n    const d = dice.toLowerCase()[0] as 'n' | 'o' | 'b';\n    // NOTE: learned is shared across dice...\n    const learned = new Queue<TrainingStats>([] /* filled in */, (a, b) => a.d - b.d);\n\n    const queued = new Set();\n    // TODO: store short separately and iterate over depending on min length\n    const stored: TrainingStats[] | undefined = await store.get('data');\n    if (stored) {\n      learned.data = stored;\n      learned.length = stored.length;\n      for (const s of stored) queued.add(s.k);\n    }\n\n    const raw = [];\n    for (const k in stats.mixed) {\n      if (!queued.has(k)) {\n        const w = stats.anagrams(k, type, min)[d] || 0;\n        if (w) raw.push({ k, w });\n      }\n    }\n    raw.sort((a, b) => a.w - b.w);\n    const unlearned = raw.map(e => e.k);\n\n    return new TrainingPool(unlearned, learned, d, type, store, stats);\n  }\n\n  private constructor(\n    unlearned: string[],\n    learned: Queue<TrainingStats>,\n    d: 'n' | 'o' | 'b',\n    type: Type,\n    store: Store,\n    stats: Stats\n  ) {\n    this.unlearned = unlearned;\n    this.learned = learned;\n    this.d = d;\n    this.type = type;\n    this.store = store;\n    this.stats = stats;\n  }\n\n  size() {\n    return this.learned.length;\n  }\n\n  next() {\n    const now = +new Date();\n    const backfill = () => {\n      if (!this.unlearned.length) return undefined;\n      return {\n        k: this.unlearned.pop()!,\n        e: 2.5,\n        c: 0,\n        n: 0,\n        d: 0,\n        p: 0,\n      };\n    };\n    // TODO: what about if settings change and group no longer valid (eg. min length)?\n    let next: TrainingStats | undefined = this.learned.pop();\n    if (next) {\n      if (next.d > now) {\n        const fill = backfill();\n        if (fill) {\n          this.learned.push(next);\n          next = fill;\n        }\n      }\n    } else {\n      next = backfill();\n    }\n    if (!next) throw new RangeError();\n\n    let key = next.k;\n    const anagrams = this.stats.anagrams(key, this.type);\n    const group = anagrams.words;\n\n    const restore = () => this.learned.push(next!);\n    const update = (q: number) => {\n      next = adjust(next!, q, now);\n      restore();\n      return this.store.set('data', this.learned.data);\n    };\n\n    const random = new Random(next.n);\n    // try to find a permutation which isn't in the group\n    for (let i = 0; i < 10; i++) {\n      key = random.shuffle(key.split('')).join('');\n      if (!group.includes(key)) break;\n    }\n\n    return { label: key, group: order(group), update, restore };\n  }\n}\n\nfunction adjust(v: TrainingStats, q: number, now: number) {\n  // Standard update from SM2: https://www.supermemo.com/en/archives1990-2015/english/ol/sm2\n  let mod = -0.8 + 0.28 * q - 0.02 * q * q;\n  // During the initial learning phase (n < 5), only apply a fraction of the modifier if negative\n  // https://apps.ankiweb.net/docs/manual.html#what-spaced-repetition-algorithm-does-anki-use\n  if (mod < 0) mod *= Math.min(Math.pow(2, v.n + 1) * 2.5, 100) / 100;\n  // SM2 uses a minimum easiness of 1.3\n  const min = 1.3;\n\n  if (q >= 3) {\n    // http://www.blueraja.com/blog/477/a-better-spaced-repetition-learning-algorithm-sm2\n    const bonus = v.d ? Math.min(2, (v.d - v.p) / DAY / (v.c ? PERIOD : 1)) : 1;\n    v.c++;\n    v.e = Math.max(min, v.e + mod * bonus);\n    v.d = now + DAY * PERIOD * Math.pow(v.e, v.c - 1) * bonus;\n  } else {\n    v.c = 0;\n    v.e = Math.max(min, v.e + mod);\n    v.d = now + DAY;\n  }\n  v.n++;\n  v.p = now;\n\n  return v;\n}\n","import {global} from './global';\nimport {UI, View} from './ui';\nimport { TrainingPool } from '../training';\nimport {Store} from '../store';\n\nexport class TrainingView implements View {\n  pool!: TrainingPool;\n  train!: HTMLElement;\n  content: HTMLElement | null = null;\n  restore: (() => void) | null = null;\n\n  toJSON() {}\n  async attach() {\n    await Promise.all([global.LOADED.TRAINING, global.LOADED.DICT, global.LOADED.STATS()]);\n    if (!this.pool || this.pool.type !== global.SETTINGS.dict) {\n      const store = new Store('training', global.SETTINGS.dict);\n      this.pool = await TrainingPool.create(\n        global.STATS, global.SETTINGS.dice, global.SETTINGS.dict, store, global.SETTINGS.min);\n    }\n\n    this.train = UI.createElementWithId('div', 'train');\n    this.next();\n    return this.train;\n  }\n\n  async detach() {\n    if (this.restore) await this.restore();\n    this.content = null;\n    return this.train;\n  }\n\n  next() {\n    const content = UI.createElementWithId('div', 'content');\n    const progress = UI.createElementWithId('div', 'progress');\n    progress.textContent = String(this.pool.size());\n\n    const {label, group, update, restore} = this.pool.next();\n    this.restore = restore;\n    const trainWord = document.createElement('div');\n    trainWord.classList.add('word');\n    trainWord.textContent = label;\n\n    const sizeHint = UI.createElementWithId('div', 'sizeHint');\n    sizeHint.classList.add('hidden');\n    sizeHint.textContent = String(group.length);\n\n    const rating = this.createRatingToggles(update);\n    const table = document.createElement('table');\n    table.classList.add('results', 'hidden');\n    UI.addAnagramRows(table, group);\n\n    progress.addEventListener('mouseup', () => UI.toggleView('Review', progress.textContent));\n    progress.addEventListener('long-press', () => {\n      if (!rating.classList.contains('hidden')) return;\n      sizeHint.classList.remove('hidden')\n    });\n    progress.addEventListener('long-press-up', () => sizeHint.classList.add('hidden'));\n\n    const back = UI.createBackButton(() => UI.toggleView('Menu'));\n    content.appendChild(UI.createTopbar(back, null, progress));\n\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('wrapper');\n    wrapper.appendChild(trainWord);\n    wrapper.appendChild(table);\n\n    content.appendChild(wrapper);\n    content.appendChild(sizeHint);\n    content.appendChild(rating);\n\n    const listener = (e: MouseEvent) => {\n      if (![back, progress].includes(e.target as HTMLElement)) {\n        content.removeEventListener('click', listener);\n        trainWord.classList.add('hidden');\n        table.classList.remove('hidden');\n        rating.classList.remove('hidden');\n      }\n    };\n    content.addEventListener('click', listener);\n\n    if (this.content) this.train.removeChild(this.content);\n    this.train.appendChild(content);\n    this.content = content;\n  }\n\n  createRatingToggles(update: (q: number) => Promise<void>) {\n    const toggles = document.createElement('div');\n    toggles.setAttribute('id', 'rating');\n    toggles.classList.add('toggle-group');\n    toggles.classList.add('horizontal');\n    toggles.classList.add('hidden');\n\n    for (let i = 0; i < 6; i++) {\n      const toggle = document.createElement('button');\n      toggle.setAttribute('id', `rating${i}`);\n      toggle.setAttribute('type', 'button');\n      toggle.classList.add('toggle');\n      toggle.textContent = String(i);\n\n      toggles.appendChild(toggle);\n\n      toggle.addEventListener('click', async () => {\n        await update(Number(toggle.textContent));\n        this.restore = null;\n        this.next();\n      });\n    }\n\n    return toggles;\n  }\n}","import {global} from './global';\nimport {Game, GameSettings, GameJSON} from '../game';\nimport {Random} from '../random';\nimport {Settings, Theme} from '../settings';\nimport {define} from '../dict';\n\nimport {BoardView} from './board';\nimport {DefineView} from './define';\nimport {MenuView} from './menu';\nimport {ReviewView} from './review';\nimport {SettingsView} from './settings';\nimport {StatsView} from './stats';\nimport {TrainingView} from './training';\n\nclass Loader {\n  private loader!: HTMLElement;\n\n  attach() {\n    this.loader = UI.createElementWithId('div', 'loader');\n    const spinner = UI.createElementWithId('div', 'spinner');\n    this.loader.appendChild(spinner);\n    return this.loader;\n  }\n\n  detach() {\n    return this.loader;\n  }\n}\n\nexport interface View {\n  toJSON(): any;\n  attach(data?: any): HTMLElement | Promise<HTMLElement>;\n  detach(next: string): HTMLElement | Promise<HTMLElement>;\n  afterAttach?: () => void;\n  onKeyDown?: (e: KeyboardEvent) => Promise<void>;\n}\n\nexport const UI = new (class{\n  root!: HTMLElement;\n  BACK!: HTMLImageElement;\n  current!: string;\n  previous!: string;\n  Views!: {[view: string]: View};\n  loader!: Loader;\n\n  async create() {\n    setTimeout(() => window.scrollTo(0, 1), 0);\n\n    // If theme has been explicitly set by the user then that trumps the system value\n    if (global.SETTINGS.theme !== undefined) {\n      this.setTheme(global.SETTINGS.theme);\n    } else {\n      this.setTheme(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'Dark' : 'Light');\n    }\n\n    this.root = document.getElementById('display')!;\n\n    const state = JSON.parse(localStorage.getItem('state')!);\n    this.current = state ? state.current : 'Menu';\n    this.previous = state ? state.previous : 'Menu';\n    this.loader = new Loader();\n    const VIEWS = {\n      Menu: MenuView,\n      Board: BoardView,\n      Training: TrainingView,\n      Review: ReviewView,\n      Define: DefineView,\n      Stats: StatsView,\n      Settings: SettingsView,\n    };\n    const views = state ? state.views : {};\n    this.Views = {};\n    for (const [type, view] of Object.entries(VIEWS)) {\n      // @ts-ignore\n      this.Views[type] = new view(views[type]);\n    }\n\n    await this.setup();\n\n    this.BACK = document.createElement('img');\n    this.BACK.src = (document.getElementById('svg') as HTMLImageElement).src;\n    this.BACK.height = 20;\n\n    document.addEventListener('keydown', e => this.onKeyDown(e));\n    document.addEventListener('swiped-left', () => this.toggleView('Define'));\n    document.addEventListener('swiped-right', () => this.toggleView('Define'));\n    window.addEventListener('hashchange',  () => this.onHashChange());\n    window.addEventListener('beforeunload', () => this.persist())\n\n    await this.attachView(this.current);\n  }\n\n  persist(previous = false) {\n    const state = JSON.parse(localStorage.getItem('state')!) || {};\n    state.current = this.current;\n    state.previous = this.previous;\n    state.views = state.views || {};\n    state.views[this.current] = this.Views[this.current];\n    if (previous) state.views[this.previous] = this.Views[this.previous];\n    localStorage.setItem('state', JSON.stringify(state));\n  }\n\n  async attachView(view: string, data?: any) {\n    // console.log(+new Date(), 'ATTACHING', view, data, this.Views[view]);\n    this.root.appendChild(this.loader.attach());\n    const v = this.Views[view];\n    const attached = await v.attach(data);\n    this.root.removeChild(this.loader.detach());\n    this.root.appendChild(attached);\n    if (v.afterAttach) v.afterAttach();\n    // console.log(+new Date(), 'ATTACHED', view, data, this.Views[view]);\n  }\n\n  async detachView(view: string, next: string) {\n    // console.log(+new Date(), 'DETACHING', view, this.Views[view]);\n    this.root.removeChild(await this.Views[view].detach(next));\n    // console.log(+new Date(), 'DETACHED', view, this.Views[view]);\n  }\n\n  async toggleView(view: string, data?: any) {\n    // console.log('TOGGLE', view, {current: this.current, previous: this.previous});\n    if (this.current === view) {\n      await this.detachView(view, this.previous);\n      this.current = this.previous;\n      this.previous = view;\n      await this.attachView(this.current, data);\n    } else {\n      await this.detachView(this.current, view);\n      this.previous = this.current;\n      this.current = view;\n      await this.attachView(view, data);\n    }\n    this.persist(true);\n  }\n\n  async setup() {\n    const setupFromHistory = async () => {\n      await global.LOADED.HISTORY;\n      if (global.HISTORY.length) {\n        const id = global.HISTORY[global.HISTORY.length - 1].seed;\n        const [settings] = Game.decodeID(id);\n\n        const rand = new Random();\n        rand.seed = global.SEED;\n        rand.next();\n\n        console.log('setup from history');\n        this.updateSettings(settings, rand.seed);\n      }\n    };\n\n    const hash = document.location.hash && document.location.hash.slice(1);\n    if (!hash) {\n      const existing = (this.Views.Board as BoardView).game;\n      if (existing) {\n        const [settings, seed] = Game.decodeID((existing as GameJSON).seed);\n        console.log('existing');\n        this.updateSettings(settings, seed);\n      } else {\n        return setupFromHistory();\n      }\n    } else {\n      const [settings, seed] = Game.decodeID(hash);\n      if (!this.valid(settings, seed)) {\n        return setupFromHistory();\n      }\n      console.log('url');\n      this.updateSettings(settings, seed);\n    }\n  }\n\n  async onKeyDown(e: KeyboardEvent) {\n    // tslint:disable-next-line: deprecation\n    const key = e.keyCode;\n    const currentView = this.Views[this.current];\n    if (key === 191 && e.shiftKey) {\n      e.preventDefault();\n      await this.toggleView('Define');\n    } else if ('onKeyDown' in currentView) {\n      await currentView.onKeyDown!(e);\n    }\n  }\n\n  async onHashChange() {\n    if (!document.location.hash) return;\n    const [settings, seed] = Game.decodeID(document.location.hash.slice(1));\n    if (!this.valid(settings, seed)) return;\n\n    let refresh = seed !== global.SEED;\n    if (!refresh) {\n      const s = Object.assign({}, global.SETTINGS);\n      refresh = s.dice !== settings.dice || s.min !== settings.min || s.dict !== settings.dict;\n    }\n    this.updateSettings(settings, seed, false);\n\n    if (this.current === 'Settings') {\n      (this.Views[this.current] as SettingsView).update();\n    } else if (refresh && this.current === 'Play') {\n      return (this.Views[this.current] as BoardView).refresh({allowDupes: true});\n    }\n  }\n\n  valid(settings: Partial<GameSettings>, seed: number) {\n    return !isNaN(seed) && !(settings.dice && settings.dict && settings.min);\n  }\n\n  updateSettings(settings: Partial<Settings>, seed?: number, dom = true) {\n    console.log('UPDATE', {settings, seed});\n    Object.assign(global.SETTINGS, settings);\n    localStorage.setItem('settings', JSON.stringify(global.SETTINGS));\n    if (seed) global.SEED = seed;\n\n    const id = Game.encodeID(global.SETTINGS, global.SEED);\n    window.history.replaceState(null, '', `#${id}`);\n\n    if (dom && this.current === 'Settings') {\n      const view = this.Views[this.current] as SettingsView;\n      view.seed.textContent = id;\n      view.seed.classList.remove('error');\n    }\n  }\n\n  createElementWithId(type: string, id: string) {\n    const element = document.createElement(type);\n    element.setAttribute('id', id);\n    return element;\n  }\n\n  createTopbar(left: HTMLElement | null, center: HTMLElement | null, right: HTMLElement | null) {\n    const topbar = this.createElementWithId('header', 'topbar');\n    topbar.appendChild(left || document.createElement('div'));\n    topbar.appendChild(center || document.createElement('div'));\n    topbar.appendChild(right || document.createElement('div'));\n    return topbar;\n  }\n\n  createBackButton(fn: (e: MouseEvent) => void) {\n    const back = this.createElementWithId('div', 'back');\n    back.appendChild(this.BACK);\n    back.addEventListener('mouseup', fn);\n    return back;\n  }\n\n  focusContentEditable(element: HTMLElement) {\n    element.focus();\n    document.execCommand('selectAll', false);\n    const sel = document.getSelection();\n    if (sel && !sel.isCollapsed) sel.collapseToEnd();\n  }\n\n  permaFocus(element: HTMLElement) {\n    element.addEventListener('blur', () => setTimeout(() => this.focusContentEditable(element), 20));\n    this.focusContentEditable(element);\n  }\n\n  setTheme(theme: Theme) {\n    document.documentElement.setAttribute('data-theme', theme.toLowerCase());\n  }\n\n  addAnagramRows(table: HTMLTableElement, group: string[]) {\n    for (const r of group) {\n      const w = r.replace(/[^A-Z]/, '');\n      const tr = document.createElement('tr');\n      const grade = global.STATS.stats(w, global.SETTINGS.dice, global.SETTINGS.dict).grade;\n      if (grade < global.SETTINGS.grade) tr.classList.add('hard');\n\n      let td = document.createElement('td');\n      const b = document.createElement('b');\n      const s = r.startsWith('(') ? `${r}\\xa0` : r.endsWith(')') ? `\\xa0${r}` : `\\xa0${r}\\xa0`;\n      b.textContent = `\\xa0${s}\\xa0`;\n      td.appendChild(b);\n      tr.appendChild(td);\n      td = document.createElement('td');\n      td.textContent = define(w, global.DICT);\n      tr.appendChild(td);\n\n      table.appendChild(tr);\n    }\n  }\n\n  createRadios(id: string, values: Array<string | [string]>, listener: () => void) {\n    const radios = this.createElementWithId('span', id);\n    radios.classList.add('toggle-group');\n    radios.classList.add('horizontal');\n    radios.setAttribute('role', 'radiogroup');\n    for (let val of values) {\n      let checked = false;\n      if (Array.isArray(val)) {\n        checked = true;\n        val = val[0];\n      }\n\n      const radio = this.createElementWithId('input', `${id}${val}`);\n      radio.classList.add('hide');\n      radio.setAttribute('type', 'radio');\n      radio.setAttribute('name', id);\n      radio.setAttribute('value', val);\n      if (checked) radio.setAttribute('checked', 'checked');\n\n      const label = document.createElement('label');\n      label.classList.add('toggle');\n      label.setAttribute('for', `${id}${val}`);\n      label.textContent = val.toUpperCase();\n\n      radio.addEventListener('click', listener.bind(radio));\n\n      radios.appendChild(radio);\n      radios.appendChild(label);\n    }\n    return radios;\n  }\n})();","// https://github.com/parcel-bundler/parcel/issues/1762\nimport 'regenerator-runtime/runtime';\nimport {UI} from './ui/ui';\n// tslint:disable-next-line:no-floating-promises\nUI.create();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}